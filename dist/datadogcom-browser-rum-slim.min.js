var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{W:function(){return Oe},L:function(){return qo}});const n={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},r=console,o={};Object.keys(n).forEach((t=>{o[t]=r[t]}));const i="Datadog Browser SDK:",s={debug:o.debug.bind(r,i),log:o.log.bind(r,i),info:o.info.bind(r,i),warn:o.warn.bind(r,i),error:o.error.bind(r,i)},a="https://docs.datadoghq.com",c=`${a}/real_user_monitoring/browser/troubleshooting`;function u(t,e){return(...n)=>{try{return t(...n)}catch(t){s.error(e,t)}}}let d,l=!1;function f(t){l=t}function p(t){return function(){return m(t,this,arguments)}}function m(t,e,n){try{return t.apply(e,n)}catch(t){if(g(t),d)try{d(t)}catch(t){g(t)}}}function g(...t){l&&s.error("[MONITOR]",...t)}function y(t,e){return-1!==t.indexOf(e)}function v(t){if(Array.from)return Array.from(t);const e=[];if(t instanceof Set)t.forEach((t=>e.push(t)));else for(let n=0;n<t.length;n++)e.push(t[n]);return e}function h(t,e){for(let n=0;n<t.length;n+=1){const r=t[n];if(e(r,n))return r}}function b(t){return Object.keys(t).map((e=>t[e]))}function w(t){return Object.keys(t).map((e=>[e,t[e]]))}function S(t,e){return t.slice(0,e.length)===e}function C(t,...e){return e.forEach((e=>{for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})),t}function x(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get(){return this},configurable:!0});let t=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof t&&(t="object"==typeof self?self:"object"==typeof window?window:{}),t}const T=/[^\u0000-\u007F]/;function k(t){return T.test(t)?void 0!==window.TextEncoder?(new TextEncoder).encode(t).length:new Blob([t]).size:t.length}function _(t,e){const n=x();let r;return n.Zone&&"function"==typeof n.Zone.__symbol__&&(r=t[n.Zone.__symbol__(e)]),r||(r=t[e]),r}function E(t,e){return _(x(),"setTimeout")(p(t),e)}function I(t){_(x(),"clearTimeout")(t)}function R(t,e){return _(x(),"setInterval")(p(t),e)}function A(t){_(x(),"clearInterval")(t)}function O(t,e,n){const r=!n||void 0===n.leading||n.leading,o=!n||void 0===n.trailing||n.trailing;let i,s,a=!1;return{throttled:(...n)=>{a?i=n:(r?t(...n):i=n,a=!0,s=E((()=>{o&&i&&t(...i),a=!1,i=void 0}),e))},cancel:()=>{I(s),a=!1,i=void 0}}}function N(){}function M(t,e,n){if("object"!=typeof t||null===t)return JSON.stringify(t);const r=$(Object.prototype),o=$(Array.prototype),i=$(Object.getPrototypeOf(t)),s=$(t);try{return JSON.stringify(t,e,n)}catch(t){return"<error: unable to serialize object>"}finally{r(),o(),i(),s()}}function $(t){const e=t,n=e.toJSON;return n?(delete e.toJSON,()=>{e.toJSON=n}):N}function P(t){return C({},t)}function L(t,e){return Object.keys(t).some((n=>t[n]===e))}function V(t){return 0===Object.keys(t).length}function D(t=2){const e=new Map;let n=!1;function r(r=0){if(n||0===t)return;const o=2===t?3072:16384;let i=r;e.forEach((t=>{i+=t.getBytesCount()})),i>o&&(!function(t){s.warn(`Customer data exceeds the recommended ${t/1024}KiB threshold. More details: ${c}/#customer-data-exceeds-the-recommended-threshold-warning`)}(o),n=!0)}return{createDetachedTracker:()=>{const t=B((()=>r(t.getBytesCount())));return t},getOrCreateTracker:t=>(e.has(t)||e.set(t,B(r)),e.get(t)),setCompressionStatus:e=>{0===t&&(t=e,r())},getCompressionStatus:()=>t,stop:()=>{e.forEach((t=>t.stop())),e.clear()}}}function B(t){let e=0;const{throttled:n,cancel:r}=O((n=>{e=k(M(n)),t()}),200),o=()=>{r(),e=0};return{updateCustomerData:t=>{V(t)?o():n(t)},resetCustomerData:o,getBytesCount:()=>e,stop:()=>{r()}}}function U(t){return null===t?"null":Array.isArray(t)?"array":typeof t}function q(t,e,n=function(){if("undefined"!=typeof WeakSet){const t=new WeakSet;return{hasAlreadyBeenSeen(e){const n=t.has(e);return n||t.add(e),n}}}const t=[];return{hasAlreadyBeenSeen(e){const n=t.indexOf(e)>=0;return n||t.push(e),n}}}()){if(void 0===e)return t;if("object"!=typeof e||null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=e.flags||[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.sticky?"y":"",e.unicode?"u":""].join("");return new RegExp(e.source,t)}if(n.hasAlreadyBeenSeen(e))return;if(Array.isArray(e)){const r=Array.isArray(t)?t:[];for(let t=0;t<e.length;++t)r[t]=q(r[t],e[t],n);return r}const r="object"===U(t)?t:{};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=q(r[t],e[t],n));return r}function j(t){return q(void 0,t)}function F(...t){let e;for(const n of t)null!=n&&(e=q(e,n));return e}function z(t,e=225280){const n=$(Object.prototype),r=$(Array.prototype),o=[],i=new WeakMap,s=H(t,"$",void 0,o,i),a=JSON.stringify(s);let c=a?a.length:0;if(!(c>e)){for(;o.length>0&&c<e;){const n=o.shift();let r=0;if(Array.isArray(n.source))for(let s=0;s<n.source.length;s++){const a=H(n.source[s],n.path,s,o,i);if(c+=void 0!==a?JSON.stringify(a).length:4,c+=r,r=1,c>e){G(e,"truncated",t);break}n.target[s]=a}else for(const s in n.source)if(Object.prototype.hasOwnProperty.call(n.source,s)){const a=H(n.source[s],n.path,s,o,i);if(void 0!==a&&(c+=JSON.stringify(a).length+r+s.length+3,r=1),c>e){G(e,"truncated",t);break}n.target[s]=a}}return n(),r(),s}G(e,"discarded",t)}function H(t,e,n,r,o){const i=function(t){const e=t;if(e&&"function"==typeof e.toJSON)try{return e.toJSON()}catch(t){}return t}(t);if(!i||"object"!=typeof i)return function(t){if("bigint"==typeof t)return`[BigInt] ${t.toString()}`;if("function"==typeof t)return`[Function] ${t.name||"unknown"}`;if("symbol"==typeof t)return`[Symbol] ${t.description||t.toString()}`;return t}(i);const s=function(t){try{if(t instanceof Event)return{isTrusted:t.isTrusted};const e=Object.prototype.toString.call(t).match(/\[object (.*)\]/);if(e&&e[1])return`[${e[1]}]`}catch(t){}return"[Unserializable]"}(i);if("[Object]"!==s&&"[Array]"!==s&&"[Error]"!==s)return s;const a=t;if(o.has(a))return`[Reference seen at ${o.get(a)}]`;const c=void 0!==n?`${e}.${n}`:e,u=Array.isArray(i)?[]:{};return o.set(a,c),r.push({source:i,target:u,path:c}),u}function G(t,e,n){s.warn(`The data provided has been ${e} as it is over the limit of ${t} characters:`,n)}class J{constructor(t){this.onFirstSubscribe=t,this.observers=[]}subscribe(t){return this.observers.push(t),1===this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:()=>{this.observers=this.observers.filter((e=>t!==e)),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}}notify(t){this.observers.forEach((e=>e(t)))}}function W(...t){return new J((e=>{const n=t.map((t=>t.subscribe((t=>e.notify(t)))));return()=>n.forEach((t=>t.unsubscribe()))}))}function K(t){let e={};const n=new J,r={getContext:()=>j(e),setContext:o=>{"object"===U(o)?(e=z(o),null==t||t.updateCustomerData(e)):r.clearContext(),n.notify()},setContextProperty:(r,o)=>{e[r]=z(o),null==t||t.updateCustomerData(e),n.notify()},removeContextProperty:r=>{delete e[r],null==t||t.updateCustomerData(e),n.notify()},clearContext:()=>{e={},null==t||t.resetCustomerData(),n.notify()},changeObservable:n};return r}const Y={GRANTED:"granted",NOT_GRANTED:"not-granted"};function X(t,e,n,r,o){return Z(t,e,[n],r,o)}function Z(t,e,n,r,{once:o,capture:i,passive:s}={}){const a=p((e=>{(e.isTrusted||e.__ddIsTrusted||t.allowUntrustedEvents)&&(o&&l(),r(e))})),c=s?{capture:i,passive:s}:i,u=window.EventTarget&&e instanceof EventTarget?window.EventTarget.prototype:e,d=_(u,"addEventListener");function l(){const t=_(u,"removeEventListener");n.forEach((n=>t.call(e,n,a,c)))}return n.forEach((t=>d.call(e,t,a,c))),{stop:l}}const Q=[];function tt(t,e,n,r){const o=function(t,e){return`_dd_c_${t}_${e}`}(n,r);function i(){const t=localStorage.getItem(o);return null!==t?JSON.parse(t):{}}Q.push(X(t,window,"storage",(({key:t})=>{o===t&&e.setContext(i())}))),e.changeObservable.subscribe((function(){localStorage.setItem(o,JSON.stringify(e.getContext()))})),e.setContext(F(i(),e.getContext()))}function et(){let t="",e=0;return{isAsync:!1,get isEmpty(){return!t},write(n,r){const o=k(n);e+=o,t+=n,r&&r(o)},finish(t){t(this.finishSync())},finishSync(){const n={output:t,outputBytesCount:e,rawBytesCount:e,pendingData:""};return t="",e=0,n},estimateEncodedBytesCount:t=>t.length}}function nt(t){const e=[];let n=dt(t,"stack");const r=String(t);return n&&S(n,r)&&(n=n.slice(r.length)),n&&n.split("\n").forEach((t=>{const n=function(t){const e=ot.exec(t);if(!e)return;const n=e[2]&&0===e[2].indexOf("native"),r=e[2]&&0===e[2].indexOf("eval"),o=it.exec(e[2]);r&&o&&(e[2]=o[1],e[3]=o[2],e[4]=o[3]);return{args:n?[e[2]]:[],column:e[4]?+e[4]:void 0,func:e[1]||"?",line:e[3]?+e[3]:void 0,url:n?void 0:e[2]}}(t)||function(t){const e=st.exec(t);if(!e)return;return{args:[],column:e[3]?+e[3]:void 0,func:"?",line:e[2]?+e[2]:void 0,url:e[1]}}(t)||function(t){const e=at.exec(t);if(!e)return;return{args:[],column:e[4]?+e[4]:void 0,func:e[1]||"?",line:+e[3],url:e[2]}}(t)||function(t){const e=ct.exec(t);if(!e)return;const n=e[3]&&e[3].indexOf(" > eval")>-1,r=ut.exec(e[3]);n&&r&&(e[3]=r[1],e[4]=r[2],e[5]=void 0);return{args:e[2]?e[2].split(","):[],column:e[5]?+e[5]:void 0,func:e[1]||"?",line:e[4]?+e[4]:void 0,url:e[3]}}(t);n&&(!n.func&&n.line&&(n.func="?"),e.push(n))})),{message:dt(t,"message"),name:dt(t,"name"),stack:e}}const rt="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",ot=new RegExp(`^\\s*at (.*?) ?\\(${rt}(?::(\\d+))?(?::(\\d+))?\\)?\\s*$`,"i"),it=new RegExp("\\((\\S*)(?::(\\d+))(?::(\\d+))\\)");const st=new RegExp(`^\\s*at ?${rt}(?::(\\d+))?(?::(\\d+))??\\s*$`,"i");const at=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;const ct=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,ut=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function dt(t,e){if("object"!=typeof t||!t||!(e in t))return;const n=t[e];return"string"==typeof n?n:void 0}function lt(t,e,n,r){const o=[{url:e,column:r,line:n}],{name:i,message:s}=function(t){let e,n;"[object String]"==={}.toString.call(t)&&([,e,n]=ft.exec(t));return{name:e,message:n}}(t);return{name:i,message:s,stack:o}}const ft=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function pt(){const t=new Error;let e;if(!t.stack)try{throw t}catch(t){}return m((()=>{const n=nt(t);n.stack=n.stack.slice(2),e=mt(n)})),e}function mt(t){let e=gt(t);return t.stack.forEach((t=>{const n="?"===t.func?"<anonymous>":t.func,r=t.args&&t.args.length>0?`(${t.args.join(", ")})`:"",o=t.line?`:${t.line}`:"",i=t.line&&t.column?`:${t.column}`:"";e+=`\n  at ${n}${r} @ ${t.url}${o}${i}`})),e}function gt(t){return`${t.name||"Error"}: ${t.message}`}function yt(t){return 0!==t&&100*Math.random()<=t}function vt(t,e){return+t.toFixed(e)}function ht(t){return"number"==typeof t}function bt(t){return{relative:t,timeStamp:wt(t)}}function wt(t){const e=Ct()-performance.now();return e>Ot()?Math.round(It(e,t)):function(t){return Math.round(It(Ot(),t))}(t)}function St(t){return ht(t)?vt(1e6*t,0):t}function Ct(){return(new Date).getTime()}function xt(){return Ct()}function Tt(){return performance.now()}function kt(){return{relative:Tt(),timeStamp:xt()}}function _t(){return{relative:0,timeStamp:Ot()}}function Et(t,e){return e-t}function It(t,e){return t+e}function Rt(t){return t-Ot()}let At;function Ot(){return void 0===At&&(At=performance.timing.navigationStart),At}function Nt(t){const e=C({},t);return["id","name","email"].forEach((t=>{t in e&&(e[t]=String(e[t]))})),e}function Mt(t,e){e.silentMultipleInit||s.error(`${t} is already initialized.`)}function $t(t){return t?(parseInt(t,10)^16*Math.random()>>parseInt(t,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,$t)}const Pt=/([\w-]+)\s*=\s*([^;]+)/g;function Lt(t,e){for(Pt.lastIndex=0;;){const n=Pt.exec(t);if(!n)break;if(n[1]===e)return n[2]}}function Vt(t,e,n=""){const r=t.charCodeAt(e-1),o=r>=55296&&r<=56319?e+1:e;return t.length<=o?t:`${t.slice(0,o)}${n}`}function Dt(t,e,n){function r(n){(function(t){return!e.wasInPageStateDuringPeriod("frozen",t.startClocks.relative,t.duration)})(n)&&t.notify(11,function(t,e){const n={date:t.startClocks.timeStamp,vital:{id:$t(),type:t.type,name:t.name,duration:St(t.duration),description:t.description},type:"vital"};e&&(n._dd={vital:{computed_value:!0}});return{rawRumEvent:n,startTime:t.startClocks.relative,customerContext:t.context,domainContext:{}}}(n,!0))}return{addDurationVital:r,startDurationVital:(t,e={})=>Bt(n,t,e),stopDurationVital:(t,e={})=>{Ut(r,n,t,e)}}}function Bt({vitalsByName:t,vitalsByReference:e},n,r={}){const o={name:n,startClocks:kt(),context:r.context,description:r.description},i={__dd_vital_reference:!0};return t.set(n,o),e.set(i,o),i}function Ut(t,{vitalsByName:e,vitalsByReference:n},r,o={}){const i="string"==typeof r?e.get(r):n.get(r);i&&(t(function(t,e,n,r){var o;return{name:t.name,type:"duration",startClocks:e,duration:Et(e.timeStamp,r.timeStamp),context:F(t.context,n.context),description:null!==(o=n.description)&&void 0!==o?o:t.description}}(i,i.startClocks,o,kt())),"string"==typeof r?e.delete(r):n.delete(r))}function qt(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}function jt(){const t=[];return{add:e=>{t.push(e)>500&&t.splice(0,1)},remove:e=>{qt(t,e)},drain:e=>{t.forEach((t=>t(e))),t.length=0}}}function Ft(t,e,n,{computeHandlingStack:r}={}){let o=t[e];if("function"!=typeof o){if(!(e in t)||!S(e,"on"))return{stop:N};o=N}let i=!1;const s=function(){if(i)return o.apply(this,arguments);const t=v(arguments);let e;m(n,null,[{target:this,parameters:t,onPostCall:t=>{e=t},handlingStack:r?pt():void 0}]);const s=o.apply(this,t);return e&&m(e,null,[s]),s};return t[e]=s,{stop:()=>{i=!0,t[e]===s&&(t[e]=o)}}}function zt(t){return Ht(t,location.href).href}function Ht(t,e){const n=function(){if(void 0===Jt)try{const t=new Gt("http://test/path");Jt="http://test/path"===t.href}catch(t){Jt=!1}return Jt?Gt:void 0}();if(n)try{return void 0!==e?new n(t,e):new n(t)}catch(n){throw new Error(`Failed to construct URL: ${String(n)} ${M({url:t,base:e})}`)}if(void 0===e&&!/:/.test(t))throw new Error(`Invalid URL: '${t}'`);let r=document;const o=r.createElement("a");if(void 0!==e){r=document.implementation.createHTMLDocument("");const t=r.createElement("base");t.href=e,r.head.appendChild(t),r.body.appendChild(o)}return o.href=t,o}const Gt=URL;let Jt,Wt,Kt,Yt;function Xt(){return Wt||(Wt=new J((t=>{if(!window.fetch)return;const{stop:e}=Ft(window,"fetch",(e=>function({parameters:t,onPostCall:e,handlingStack:n},r){const[o,i]=t;let s=i&&i.method;void 0===s&&o instanceof Request&&(s=o.method);const a=void 0!==s?String(s).toUpperCase():"GET",c=o instanceof Request?o.url:zt(String(o)),u=kt(),d={state:"start",init:i,input:o,method:a,startClocks:u,url:c,handlingStack:n};r.notify(d),t[0]=d.input,t[1]=d.init,e((t=>function(t,e,n){const r=n;function o(e){r.state="resolve",C(r,e),t.notify(r)}e.then(p((t=>{o({response:t,responseType:t.type,status:t.status,isAborted:!1})})),p((t=>{var e,n;o({status:0,isAborted:(null===(n=null===(e=r.init)||void 0===e?void 0:e.signal)||void 0===n?void 0:n.aborted)||t instanceof DOMException&&t.code===DOMException.ABORT_ERR,error:t})})))}(r,t,d)))}(e,t)),{computeHandlingStack:!0});return e}))),Wt}function Zt(t,e,n=0,r){const o=new Date;o.setTime(o.getTime()+n);const i=`expires=${o.toUTCString()}`,s=r&&r.crossSite?"none":"strict",a=r&&r.domain?`;domain=${r.domain}`:"",c=r&&r.secure?";secure":"",u=r&&r.partitioned?";partitioned":"";document.cookie=`${t}=${e};${i};path=/;samesite=${s}${a}${c}${u}`}function Qt(t){return Lt(document.cookie,t)}function te(t){return Kt||(Kt=function(t){const e=new Map;for(Pt.lastIndex=0;;){const n=Pt.exec(t);if(!n)break;e.set(n[1],n[2])}return e}(document.cookie)),Kt.get(t)}function ee(t,e){Zt(t,"",0,e)}function ne(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||te("datadog-synthetics-injects-rum"))}let re;function oe(){return null!=re?re:re=function(t=window){var e;const n=t.navigator.userAgent;if(t.chrome||/HeadlessChrome/.test(n))return 1;if(0===(null===(e=t.navigator.vendor)||void 0===e?void 0:e.indexOf("Apple"))||/safari/i.test(n)&&!/chrome|android/i.test(n))return 2;if(t.document.documentMode)return 0;return 3}()}const ie="cookie",se="local-storage",ae=/^([a-zA-Z]+)=([a-z0-9-]+)$/;function ce(t){return V(t)}function ue(t){return void 0!==t.isExpired||!((void 0===(e=t).created||Ct()-Number(e.created)<144e5)&&(void 0===e.expire||Ct()<Number(e.expire)));var e}function de(t){return w(t).map((([t,e])=>"anonymousId"===t?`aid=${e}`:`${t}=${e}`)).join("&")}function le(t){const e={};return function(t){return!!t&&(-1!==t.indexOf("&")||ae.test(t))}(t)&&t.split("&").forEach((t=>{const n=ae.exec(t);if(null!==n){const[,t,r]=n;"aid"===t?e.anonymousId=r:e[t]=r}})),e}function fe(t){const e=function(t){const e={};e.secure=!!t.useSecureSessionCookie||!!t.usePartitionedCrossSiteSessionCookie,e.crossSite=!!t.usePartitionedCrossSiteSessionCookie,e.partitioned=!!t.usePartitionedCrossSiteSessionCookie,t.trackSessionAcrossSubdomains&&(e.domain=function(){if(void 0===Yt){const t=`dd_site_test_${$t()}`,e="test",n=window.location.hostname.split(".");let r=n.pop();for(;n.length&&!Qt(t);)r=`${n.pop()}.${r}`,Zt(t,e,1e3,{domain:r});ee(t,{domain:r}),Yt=r}return Yt}());return e}(t);return function(t){if(void 0===document.cookie||null===document.cookie)return!1;try{const e=`dd_cookie_test_${$t()}`,n="test";Zt(e,n,6e4,t);const r=Qt(e)===n;return ee(e,t),r}catch(t){return s.error(t),!1}}(e)?{type:ie,cookieOptions:e}:void 0}function pe(t){var e;return{isLockEnabled:1===oe(),persistSession:(e=t,t=>{Zt("_dd_s",de(t),9e5,e)}),retrieveSession:me,expireSession:e=>function(t,e){const n={isExpired:"1"};Zt("_dd_s",de(n),144e5,t)}(t)}}function me(){return le(Qt("_dd_s"))}function ge(){try{const t=$t(),e=`_dd_test_${t}`;localStorage.setItem(e,t);const n=localStorage.getItem(e);return localStorage.removeItem(e),t===n?{type:se}:void 0}catch(t){return}}function ye(t){localStorage.setItem("_dd_s",de(t))}function ve(){return le(localStorage.getItem("_dd_s"))}function he(t){ye({isExpired:"1"})}const be=[];let we;function Se(t,e,n=0){var r;const{isLockEnabled:o,persistSession:i,expireSession:s}=e,a=t=>i(C({},t,{lock:u})),c=()=>{const t=e.retrieveSession(),n=t.lock;return t.lock&&delete t.lock,{session:t,lock:n}};if(we||(we=t),t!==we)return void be.push(t);if(o&&n>=100)return void xe(e);let u,d=c();if(o){if(d.lock)return void Ce(t,e,n);if(u=$t(),a(d.session),d=c(),d.lock!==u)return void Ce(t,e,n)}let l=t.process(d.session);if(o&&(d=c(),d.lock!==u))Ce(t,e,n);else{if(l&&(ue(l)?s(l):(l.expire=String(Ct()+9e5),o?a(l):i(l))),o&&(!l||!ue(l))){if(d=c(),d.lock!==u)return void Ce(t,e,n);i(d.session),l=d.session}null===(r=t.after)||void 0===r||r.call(t,l||d.session),xe(e)}}function Ce(t,e,n){E((()=>{Se(t,e,n+1)}),10)}function xe(t){we=void 0;const e=be.shift();e&&Se(e,t)}function Te(t){switch(t.sessionPersistence){case ie:return fe(t);case se:return ge();case void 0:{let e=fe(t);return e||(e=ge()),e}default:s.error(`Invalid session persistence '${String(t.sessionPersistence)}'`)}}function ke(t,e,n){const r=new J,o=new J,i=new J,s=t.type===ie?pe(t.cookieOptions):{isLockEnabled:!1,persistSession:ye,retrieveSession:ve,expireSession:he},{expireSession:a}=s,c=R((function(){Se({process:t=>ue(t)?{isExpired:"1"}:void 0,after:f},s)}),1e3);let u;p();const{throttled:d,cancel:l}=O((()=>{Se({process:t=>{if(ce(t))return;const r=f(t);return function(t){if(ce(t))return!1;const{trackingType:r,isTracked:o}=n(t[e]);t[e]=r,delete t.isExpired,o&&!t.id&&(t.id=$t(),t.created=String(Ct()))}(r),r},after:t=>{ce(t)||m()||function(t){u=t,r.notify()}(t),u=t}},s)}),1e3);function f(t){return ue(t)&&(t={isExpired:"1"}),m()&&(!function(t){return u.id!==t.id||u[e]!==t[e]}(t)?(i.notify({previousState:u,newState:t}),u=t):(u={isExpired:"1"},o.notify())),t}function p(){Se({process:t=>{if(ce(t))return{isExpired:"1"}},after:t=>{u=t}},s)}function m(){return void 0!==u[e]}return{expandOrRenewSession:d,expandSession:function(){Se({process:t=>m()?f(t):void 0},s)},getSession:()=>u,renewObservable:r,expireObservable:o,sessionStateUpdateObservable:i,restartSession:p,expire:()=>{l(),a(u),f({isExpired:"1"})},stop:()=>{A(c)},updateSessionState:function(t){Se({process:e=>C({},e,t),after:f},s)}}}const _e="datadoghq.com",Ee=["ddsource","ddtags"];function Ie(t,e,n){const r=function(t,e){const n=`/api/v2/${e}`,r=t.proxy;if("string"==typeof r){const t=zt(r);return e=>`${t}?ddforward=${encodeURIComponent(`${n}?${e}`)}`}if("function"==typeof r)return t=>r({path:n,parameters:t});const o=function(t,e){const{site:n=_e,internalAnalyticsSubdomain:r}=e;if("logs"===t&&e.usePciIntake&&n===_e)return"pci.browser-intake-datadoghq.com";if(r&&n===_e)return`${r}.${_e}`;if("dd0g-gov.com"===n)return`http-intake.logs.${n}`;const o=n.split("."),i=o.pop();return`browser-intake-${o.join("-")}.${i}`}(e,t);return t=>`https://${o}${n}?${t}`}(t,e);return{build(o,i){const s=function({clientToken:t,internalAnalyticsSubdomain:e},n,r,o,{retry:i,encoding:s}){const a=["sdk_version:5.35.0",`api:${o}`].concat(r);i&&a.push(`retry_count:${i.count}`,`retry_after:${i.lastFailureStatus}`);const c=["ddsource=browser",`ddtags=${encodeURIComponent(a.join(","))}`,`dd-api-key=${t}`,`dd-evp-origin-version=${encodeURIComponent("5.35.0")}`,"dd-evp-origin=browser",`dd-request-id=${$t()}`];s&&c.push(`dd-evp-encoding=${s}`);"rum"===n&&c.push(`batch_time=${xt()}`);e&&c.reverse();return c.join("&")}(t,e,n,o,i);return r(s)},urlPrefix:r(""),trackType:e}}function Re(t,e){const n=200-t.length-1;(e.length>n||function(t){if(!function(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch(t){return!1}}())return!1;return new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(t)}(e))&&s.warn(`${t} value doesn't meet tag requirements and will be sanitized. More details: ${a}/getting_started/tagging/#defining-tags`);return`${t}:${e.replace(/,/g,"_")}`}function Ae(t){const e=t.site||_e,n=function(t){const{env:e,service:n,version:r,datacenter:o}=t,i=[];return e&&i.push(Re("env",e)),n&&i.push(Re("service",n)),r&&i.push(Re("version",r)),o&&i.push(Re("datacenter",o)),i}(t),r=function(t,e){return{logsEndpointBuilder:Ie(t,"logs",e),rumEndpointBuilder:Ie(t,"rum",e),sessionReplayEndpointBuilder:Ie(t,"replay",e)}}(t,n),o=function(t,e){if(!t.replica)return;const n=C({},t,{site:_e,clientToken:t.replica.clientToken}),r={logsEndpointBuilder:Ie(n,"logs",e),rumEndpointBuilder:Ie(n,"rum",e)};return C({applicationId:t.replica.applicationId},r)}(t,n);return C({replica:o,site:e},r)}const Oe={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"},Ne={ALL:"all",SAMPLED:"sampled"};function Me(t,e){return null==t||"string"==typeof t||(s.error(`${e} must be defined as a string`),!1)}function $e(t,e){return!!(void 0===t||(n=t,ht(n)&&n>=0&&n<=100))||(s.error(`${e} Sample Rate should be a number between 0 and 100`),!1);var n}function Pe(t){var e,n,r,o,i;if(t&&t.clientToken){if((!(c=t.site)||"string"!=typeof c||/(datadog|ddog|datad0g|dd0g)/.test(c)||(s.error(`Site should be a valid Datadog site. More details: ${a}/getting_started/site/.`),0))&&$e(t.sessionSampleRate,"Session")&&$e(t.telemetrySampleRate,"Telemetry")&&$e(t.telemetryConfigurationSampleRate,"Telemetry Configuration")&&$e(t.telemetryUsageSampleRate,"Telemetry Usage")&&Me(t.version,"Version")&&Me(t.env,"Env")&&Me(t.service,"Service")){var c;if(void 0===t.trackingConsent||L(Y,t.trackingConsent))return C({beforeSend:t.beforeSend&&u(t.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:Te(t),sessionSampleRate:null!==(e=t.sessionSampleRate)&&void 0!==e?e:100,telemetrySampleRate:null!==(n=t.telemetrySampleRate)&&void 0!==n?n:20,telemetryConfigurationSampleRate:null!==(r=t.telemetryConfigurationSampleRate)&&void 0!==r?r:5,telemetryUsageSampleRate:null!==(o=t.telemetryUsageSampleRate)&&void 0!==o?o:5,service:t.service||void 0,silentMultipleInit:!!t.silentMultipleInit,allowUntrustedEvents:!!t.allowUntrustedEvents,trackingConsent:null!==(i=t.trackingConsent)&&void 0!==i?i:Y.GRANTED,storeContextsAcrossPages:!!t.storeContextsAcrossPages,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},Ae(t));s.error('Tracking Consent should be either "granted" or "not-granted"')}}else s.error("Client Token is not configured, we will not send any data.")}function Le(t){const e=U(t);return"string"===e||"function"===e||t instanceof RegExp}function Ve(t){0!==t.status||t.isAborted||(t.traceId=void 0,t.spanId=void 0,t.traceSampled=void 0)}const De=["tracecontext","datadog"];function Be(t){var e,n,r;if(!t.applicationId)return void s.error("Application ID is not configured, no RUM data will be collected.");if(!$e(t.sessionReplaySampleRate,"Session Replay")||!$e(t.traceSampleRate,"Trace"))return;if(void 0!==t.excludedActivityUrls&&!Array.isArray(t.excludedActivityUrls))return void s.error("Excluded Activity Urls should be an array");const o=function(t){if(void 0===t.allowedTracingUrls)return[];if(!Array.isArray(t.allowedTracingUrls))return void s.error("Allowed Tracing URLs should be an array");if(0!==t.allowedTracingUrls.length&&void 0===t.service)return void s.error("Service needs to be configured when tracing is enabled");const e=[];return t.allowedTracingUrls.forEach((t=>{Le(t)?e.push({match:t,propagatorTypes:De}):!function(t){const e=t;return"object"===U(e)&&Le(e.match)&&Array.isArray(e.propagatorTypes)}(t)?s.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",t):e.push(t)})),e}(t);if(!o)return;const i=Pe(t);if(!i)return;const a=null!==(e=t.sessionReplaySampleRate)&&void 0!==e?e:0;return C({applicationId:t.applicationId,version:t.version||void 0,actionNameAttribute:t.actionNameAttribute,sessionReplaySampleRate:a,startSessionReplayRecordingManually:void 0!==t.startSessionReplayRecordingManually?!!t.startSessionReplayRecordingManually:0===a,traceSampleRate:null!==(n=t.traceSampleRate)&&void 0!==n?n:100,rulePsr:ht(t.traceSampleRate)?t.traceSampleRate/100:void 0,allowedTracingUrls:o,excludedActivityUrls:null!==(r=t.excludedActivityUrls)&&void 0!==r?r:[],workerUrl:t.workerUrl,compressIntakeRequests:!!t.compressIntakeRequests,trackUserInteractions:!!t.trackUserInteractions,trackViewsManually:!!t.trackViewsManually,trackResources:!!t.trackResources,trackLongTasks:!!t.trackLongTasks,subdomain:t.subdomain,defaultPrivacyLevel:L(Oe,t.defaultPrivacyLevel)?t.defaultPrivacyLevel:Oe.MASK,enablePrivacyForActionName:!!t.enablePrivacyForActionName,customerDataTelemetrySampleRate:1,traceContextInjection:L(Ne,t.traceContextInjection)?t.traceContextInjection:Ne.ALL,plugins:t.plugins||[]},i)}function Ue({ignoreInitIfSyntheticsWillInjectRum:t,startDeflateWorker:e},n,r,o,i){const a=jt();let c,u,d,l;const f=r.observable.subscribe(p);function p(){if(!d||!l||!r.isGranted())return;let t;if(f.unsubscribe(),l.trackViewsManually){if(!c)return;a.remove(c.callback),t=c.options}const e=i(l,u,t);a.drain(e)}const m=t=>{a.add((e=>e.addDurationVital(t)))};return{init(n,o){n?(d=n,t&&ne()||(function(t,e,n){if(t)for(const r of t){const t=r[e];t&&t(n)}}(n.plugins,"onInit",{initConfiguration:n,publicApi:o}),function(t){if(d=t,l)return void Mt("DD_RUM",t);const n=Be(t);n&&(n.sessionStoreStrategyType?n.compressIntakeRequests&&e&&(u=e(n,"Datadog RUM",N),!u)||(l=n,Xt().subscribe(N),r.tryToInit(n.trackingConsent),p()):s.warn("No storage available for session. We will not send any data."))}(n))):s.error("Missing configuration")},get initConfiguration(){return d},getInternalContext:N,stopSession:N,addTiming(t,e=xt()){a.add((n=>n.addTiming(t,e)))},startView(t,e=kt()){const n=n=>{n.startView(t,e)};a.add(n),c||(c={options:t,callback:n},p())},setViewName(t){a.add((e=>e.setViewName(t)))},setViewContext(t){a.add((e=>e.setViewContext(t)))},setViewContextProperty(t,e){a.add((n=>n.setViewContextProperty(t,e)))},addAction(t,e=n()){a.add((n=>n.addAction(t,e)))},addError(t,e=n()){a.add((n=>n.addError(t,e)))},startDurationVital:(t,e)=>Bt(o,t,e),stopDurationVital(t,e){Ut(m,o,t,e)},addDurationVital:m}}const qe={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function je(){const t=function(){let t;const e=window;if(e.Zone&&(t=_(e,"MutationObserver"),e.MutationObserver&&t===e.MutationObserver)){const n=_(new e.MutationObserver(N),"originalInstance");t=n&&n.constructor}t||(t=e.MutationObserver);return t}();return new J((e=>{if(!t)return;const n=new t(p((()=>e.notify())));return n.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),()=>n.disconnect()}))}const Fe="agent",ze="console",He="custom",Ge="source",Je="report";function We(t,e,n){let r=0,o=!1;return{isLimitReached(){if(0===r&&E((()=>{r=0}),6e4),r+=1,r<=e||o)return o=!1,!1;if(r===e+1){o=!0;try{n({message:`Reached max number of ${t}s by minute: ${e}`,source:Fe,startClocks:kt()})}finally{o=!1}}return!0}}}function Ke(){var t;const e=window.navigator;return{status:e.onLine?"connected":"not_connected",interfaces:e.connection&&e.connection.type?[e.connection.type]:void 0,effective_type:null===(t=e.connection)||void 0===t?void 0:t.effectiveType}}function Ye(){const t=function(){const t=window._DATADOG_SYNTHETICS_PUBLIC_ID||te("datadog-synthetics-public-id");return"string"==typeof t?t:void 0}(),e=function(){const t=window._DATADOG_SYNTHETICS_RESULT_ID||te("datadog-synthetics-result-id");return"string"==typeof t?t:void 0}();if(t&&e)return{test_id:t,result_id:e,injected:ne()}}function Xe(t,e,n){const r=j(t),o=n(r);return w(e).forEach((([e,n])=>{const o=function(t,e){let n=t;for(const t of e.split(".")){if(!tn(n,t))return;n=n[t]}return n}(r,e),i=U(o);i===n?Ze(t,e,z(o)):"object"!==n||"undefined"!==i&&"null"!==i||Ze(t,e,{})})),o}function Ze(t,e,n){let r=t;const o=e.split(".");for(let t=0;t<o.length;t+=1){const e=o[t];if(!Qe(r))return;t!==o.length-1?r=r[e]:r[e]=n}}function Qe(t){return"object"===U(t)}function tn(t,e){return Qe(t)&&Object.prototype.hasOwnProperty.call(t,e)}const en={"view.name":"string","view.url":"string","view.referrer":"string"},nn={context:"object"},rn={service:"string",version:"string"};let on;function sn(t,e,n,r,o,i,a,c,u,d){on={view:C({},nn,en),error:C({"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string"},nn,en,rn),resource:C({"resource.url":"string"},{},nn,en,rn),action:C({"action.target.name":"string"},nn,en,rn),long_task:C({},nn,en),vital:C({},nn,en)};const l={error:We("error",t.eventRateLimiterThreshold,d),action:We("action",t.eventRateLimiterThreshold,d),vital:We("vital",t.eventRateLimiterThreshold,d)},f=Ye();e.subscribe(11,(({startTime:d,rawRumEvent:p,domainContext:m,savedCommonContext:g,customerContext:y})=>{const v=r.findView(d),h=o.findUrl(d),b=n.findTrackedSession(d);if(b&&v&&h){const n=g||u(),r=i.findActionId(d),o=F({_dd:{format_version:2,drift:Math.round(Ct()-It(Ot(),performance.now())),configuration:{session_sample_rate:vt(t.sessionSampleRate,3),session_replay_sample_rate:vt(t.sessionReplaySampleRate,3)},browser_sdk_version:"5.35.0"},application:{id:t.applicationId},date:xt(),service:v.service||t.service,version:v.version||t.version,source:"browser",session:{id:b.id,type:f?"synthetics":c.get()?"ci_test":"user"},view:{id:v.id,name:v.name,url:h.url,referrer:h.referrer},action:(w=p,-1!==["error","resource","long_task"].indexOf(w.type)&&r?{id:r}:void 0),synthetics:f,ci_test:c.get(),display:a.get(),connectivity:Ke()},p);o.context=F(n.context,v.context,y),"has_replay"in o.session||(o.session.has_replay=n.hasReplay),"view"===o.type&&(o.session.sampled_for_replay=1===b.sessionReplay),V(n.user)||(o.usr=n.user),function(t,e,n,r){var o;if(e){const r=Xe(t,on[t.type],(t=>e(t,n)));if(!1===r&&"view"!==t.type)return!1;!1===r&&s.warn("Can't dismiss view events using beforeSend!")}return!(null===(o=r[t.type])||void 0===o?void 0:o.isLimitReached())}(o,t.beforeSend,m,l)&&(V(o.context)&&delete o.context,e.notify(12,o))}var w}))}const an=class{constructor(){this.callbacks={}}notify(t,e){const n=this.callbacks[t];n&&n.forEach((t=>t(e)))}subscribe(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),{unsubscribe:()=>{this.callbacks[t]=this.callbacks[t].filter((t=>e!==t))}}}};function cn({expireDelay:t,maxEntries:e}){let n=[];const r=R((()=>function(){const e=Tt()-t;for(;n.length>0&&n[n.length-1].endTime<e;)n.pop()}()),6e4);return{add:function(t,r){const o={value:t,startTime:r,endTime:Infinity,remove:()=>{qt(n,o)},close:t=>{o.endTime=t}};return e&&n.length>=e&&n.pop(),n.unshift(o),o},find:function(t=Infinity,e={returnInactive:!1}){for(const r of n)if(r.startTime<=t){if(e.returnInactive||t<=r.endTime)return r.value;break}},closeActive:function(t){const e=n[0];e&&Infinity===e.endTime&&e.close(t)},findAll:function(t=Infinity,e=0){const r=It(t,e);return n.filter((e=>e.startTime<=r&&t<=e.endTime)).map((t=>t.value))},reset:function(){n=[]},stop:function(){A(r)}}}let un;const dn=new WeakMap;function ln(t){return un||(un=function(t){return new J((e=>{const{stop:n}=Ft(XMLHttpRequest.prototype,"open",fn),{stop:r}=Ft(XMLHttpRequest.prototype,"send",(n=>{!function({target:t,handlingStack:e},n,r){const o=dn.get(t);if(!o)return;const i=o;i.state="start",i.startClocks=kt(),i.isAborted=!1,i.xhr=t,i.handlingStack=e;let s=!1;const{stop:a}=Ft(t,"onreadystatechange",(()=>{t.readyState===XMLHttpRequest.DONE&&c()})),c=()=>{if(u(),a(),s)return;s=!0;const e=o;e.state="complete",e.duration=Et(i.startClocks.timeStamp,xt()),e.status=t.status,r.notify(P(e))},{stop:u}=X(n,t,"loadend",c);r.notify(i)}(n,t,e)}),{computeHandlingStack:!0}),{stop:o}=Ft(XMLHttpRequest.prototype,"abort",pn);return()=>{n(),r(),o()}}))}(t)),un}function fn({target:t,parameters:[e,n]}){dn.set(t,{state:"open",method:String(e).toUpperCase(),url:zt(String(n))})}function pn({target:t}){const e=dn.get(t);e&&(e.isAborted=!0)}const mn=[["document",t=>"initial_document"===t],["xhr",t=>"xmlhttprequest"===t],["fetch",t=>"fetch"===t],["beacon",t=>"beacon"===t],["css",(t,e)=>/\.css$/i.test(e)],["js",(t,e)=>/\.js$/i.test(e)],["image",(t,e)=>y(["image","img","icon"],t)||null!==/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(e)],["font",(t,e)=>null!==/\.(woff|eot|woff2|ttf)$/i.exec(e)],["media",(t,e)=>y(["audio","video"],t)||null!==/\.(mp3|mp4)$/i.exec(e)]];function gn(t){const e=t.name;if(!function(t){try{return!!Ht(t)}catch(t){return!1}}(e))return"other";const n=function(t){const e=Ht(t).pathname;return"/"===e[0]?e:`/${e}`}(e);for(const[e,r]of mn)if(r(t.initiatorType,n))return e;return"other"}function yn(...t){for(let e=1;e<t.length;e+=1)if(t[e-1]>t[e])return!1;return!0}function vn(t){return"xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType}function hn(t){const{duration:e,startTime:n,responseEnd:r}=t;return St(0===e&&n<r?Et(n,r):e)}function bn(t){if(!Sn(t))return;const{startTime:e,fetchStart:n,workerStart:r,redirectStart:o,redirectEnd:i,domainLookupStart:s,domainLookupEnd:a,connectStart:c,secureConnectionStart:u,connectEnd:d,requestStart:l,responseStart:f,responseEnd:p}=t,m={download:Cn(e,f,p),first_byte:Cn(e,l,f)};return 0<r&&r<n&&(m.worker=Cn(e,r,n)),n<d&&(m.connect=Cn(e,c,d),c<=u&&u<=d&&(m.ssl=Cn(e,u,d))),n<a&&(m.dns=Cn(e,s,a)),e<i&&(m.redirect=Cn(e,o,i)),m}function wn(t){return t.duration>=0}function Sn(t){const e=yn(t.startTime,t.fetchStart,t.domainLookupStart,t.domainLookupEnd,t.connectStart,t.connectEnd,t.requestStart,t.responseStart,t.responseEnd),n=!function(t){return t.redirectEnd>t.startTime}(t)||yn(t.startTime,t.redirectStart,t.redirectEnd,t.fetchStart);return e&&n}function Cn(t,e,n){if(t<=e&&e<=n)return{duration:St(Et(e,n)),start:St(Et(t,e))}}function xn(t){return""===t.nextHopProtocol?void 0:t.nextHopProtocol}function Tn(t){return""===t.deliveryType?"other":t.deliveryType}function kn(t){if(t.startTime<t.responseStart){const{encodedBodySize:e,decodedBodySize:n,transferSize:r}=t;return{size:n,encoded_body_size:e,decoded_body_size:n,transfer_size:r}}return{size:void 0,encoded_body_size:void 0,decoded_body_size:void 0,transfer_size:void 0}}function _n(t){return t&&!function(t){return Ee.every((e=>y(t,e)))}(t)}const En=/data:(.+)?(;base64)?,/g;function In(t){return!(t.length<=24e3)&&("data:"===t.substring(0,5)&&(t=t.substring(0,24e3),!0))}function Rn(t){return`${t.match(En)[0]}[...]`}let An=1;function On(t,e,n){const r={clearTracingIfNeeded:Ve,traceFetch:t=>{},traceXhr:(t,e)=>{}};!function(t,e,n){const r=ln(e).subscribe((e=>{const r=e;if(_n(r.url))switch(r.state){case"start":n.traceXhr(r,r.xhr),r.requestIndex=Nn(),t.notify(6,{requestIndex:r.requestIndex,url:r.url});break;case"complete":n.clearTracingIfNeeded(r),t.notify(7,{duration:r.duration,method:r.method,requestIndex:r.requestIndex,spanId:r.spanId,startClocks:r.startClocks,status:r.status,traceId:r.traceId,traceSampled:r.traceSampled,type:"xhr",url:r.url,xhr:r.xhr,isAborted:r.isAborted,handlingStack:r.handlingStack})}}))}(t,e,r),function(t,e){const n=Xt().subscribe((n=>{const r=n;if(_n(r.url))switch(r.state){case"start":e.traceFetch(r),r.requestIndex=Nn(),t.notify(6,{requestIndex:r.requestIndex,url:r.url});break;case"resolve":!function(t,e){const n=t.response&&function(t){try{return t.clone()}catch(t){return}}(t.response);n&&n.body?function(t,e,n){const r=t.getReader(),o=[];let i=0;function s(){let t,s;if(r.cancel().catch(N),n.collectStreamBody){let e;if(1===o.length)e=o[0];else{e=new Uint8Array(i);let t=0;o.forEach((n=>{e.set(n,t),t+=n.length}))}t=e.slice(0,n.bytesLimit),s=e.length>n.bytesLimit}e(void 0,t,s)}!function t(){r.read().then(p((e=>{e.done?s():(n.collectStreamBody&&o.push(e.value),i+=e.value.length,i>n.bytesLimit?s():t())})),p((t=>e(t))))}()}(n.body,(()=>{e(Et(t.startClocks.timeStamp,xt()))}),{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1}):e(Et(t.startClocks.timeStamp,xt()))}(r,(n=>{e.clearTracingIfNeeded(r),t.notify(7,{duration:n,method:r.method,requestIndex:r.requestIndex,responseType:r.responseType,spanId:r.spanId,startClocks:r.startClocks,status:r.status,traceId:r.traceId,traceSampled:r.traceSampled,type:"fetch",url:r.url,response:r.response,init:r.init,input:r.input,isAborted:r.isAborted,handlingStack:r.handlingStack})}))}}))}(t,r)}function Nn(){const t=An;return An+=1,t}function Mn(t){return ht(t)&&t<0?void 0:t}function $n(t,e){const n=Pn(t)?{action:{id:t.id,loading_time:Mn(St(t.duration)),frustration:{type:t.frustrationTypes},error:{count:t.counts.errorCount},long_task:{count:t.counts.longTaskCount},resource:{count:t.counts.resourceCount}},_dd:{action:{target:t.target,position:t.position,name_source:void 0}}}:void 0,r=Pn(t)?void 0:t.context,o=F({action:{id:$t(),target:{name:t.name},type:t.type},date:t.startClocks.timeStamp,type:"action",view:{in_foreground:e.wasInPageStateAt("active",t.startClocks.relative)}},n),i=Pn(t)?{events:t.events}:{};return!Pn(t)&&t.handlingStack&&(i.handlingStack=t.handlingStack),{customerContext:r,rawRumEvent:o,startTime:t.startClocks.relative,domainContext:i}}function Pn(t){return"custom"!==t.type}function Ln({stackTrace:t,originalError:e,handlingStack:n,startClocks:r,nonErrorPrefix:o,source:i,handling:s}){const a=Dn(e),c=function(t,e,n,r){return(null==t?void 0:t.message)&&(null==t?void 0:t.name)?t.message:e?"Empty message":`${n} ${M(z(r))}`}(t,a,o,e),u=function(t,e){if(void 0===e)return!1;if(t)return!0;return e.stack.length>0&&(e.stack.length>1||void 0!==e.stack[0].url)}(a,t)?mt(t):"No stack, consider using an instance of Error",d=a?Bn(e,i):void 0;return{startClocks:r,source:i,handling:s,handlingStack:n,originalError:e,type:t?t.name:void 0,message:c,stack:u,causes:d,fingerprint:Vn(e)}}function Vn(t){return Dn(t)&&"dd_fingerprint"in t?String(t.dd_fingerprint):void 0}function Dn(t){return t instanceof Error||"[object Error]"===Object.prototype.toString.call(t)}function Bn(t,e){let n=t;const r=[];for(;Dn(null==n?void 0:n.cause)&&r.length<10;){const t=nt(n.cause);r.push({message:n.cause.message,source:e,type:null==t?void 0:t.name,stack:t&&mt(t)}),n=n.cause}return r.length?r:void 0}function Un(t){const e=(e,n)=>{const r=Ln({stackTrace:e,originalError:n,startClocks:kt(),nonErrorPrefix:"Uncaught",source:Ge,handling:"unhandled"});t.notify(r)},{stop:n}=(r=e,Ft(window,"onerror",(({parameters:[t,e,n,o,i]})=>{let s;s=Dn(i)?nt(i):lt(t,e,n,o),r(s,null!=i?i:t)})));var r;const{stop:o}=function(t){return Ft(window,"onunhandledrejection",(({parameters:[e]})=>{const n=e.reason||"Empty reason",r=nt(n);t(r,n)}))}(e);return{stop:()=>{n(),o()}}}let qn={};function jn(t){return W(...t.map((t=>(qn[t]||(qn[t]=function(t){return new J((e=>{const o=r[t];return r[t]=(...r)=>{o.apply(console,r);const i=pt();m((()=>{e.notify(function(t,e,r){const o=t.map((t=>function(t){if("string"==typeof t)return z(t);if(Dn(t))return gt(nt(t));return M(z(t),void 0,2)}(t))).join(" ");let i;if(e===n.error){const e=h(t,Dn);i={stack:e?mt(nt(e)):void 0,fingerprint:Vn(e),causes:e?Bn(e,"console"):void 0,startClocks:kt(),message:o,source:ze,handling:"handled",handlingStack:r}}return{api:e,message:o,error:i,handlingStack:r}}(r,t,i))}))},()=>{r[t]=o}}))}(t)),qn[t]))))}const Fn="intervention",zn="csp_violation";function Hn(t,e){const n=[];y(e,zn)&&n.push(function(t){return new J((e=>{const{stop:n}=X(t,document,"securitypolicyviolation",(t=>{e.notify(function(t){const e=`'${t.blockedURI}' blocked by '${t.effectiveDirective}' directive`;return Gn({type:t.effectiveDirective,message:`${zn}: ${e}`,originalError:t,csp:{disposition:t.disposition},stack:Jn(t.effectiveDirective,t.originalPolicy?`${e} of the policy "${Vt(t.originalPolicy,100,"...")}"`:"no policy",t.sourceFile,t.lineNumber,t.columnNumber)})}(t))}));return n}))}(t));const r=e.filter((t=>t!==zn));return r.length&&n.push(function(t){return new J((e=>{if(!window.ReportingObserver)return;const n=p(((t,n)=>t.forEach((t=>e.notify(function(t){const{type:e,body:n}=t;return Gn({type:n.id,message:`${e}: ${n.message}`,originalError:t,stack:Jn(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}(t)))))),r=new window.ReportingObserver(n,{types:t,buffered:!0});return r.observe(),()=>{r.disconnect()}}))}(r)),W(...n)}function Gn(t){return C({startClocks:kt(),source:Je,handling:"unhandled"},t)}function Jn(t,e,n,r,o){return n?mt({name:t,message:e,stack:[{func:"?",url:n,line:null!=r?r:void 0,column:null!=o?o:void 0}]}):void 0}function Wn(t,e,r,o){const i=new J;return function(t){const e=jn([n.error]).subscribe((e=>t.notify(e.error)))}(i),Un(i),function(t,e){const n=Hn(t,[zn,Fn]).subscribe((t=>e.notify(t)))}(e,i),i.subscribe((e=>t.notify(13,{error:e}))),function(t,e,n){return t.subscribe(13,(({error:n,customerContext:r,savedCommonContext:o})=>{t.notify(11,C({customerContext:r,savedCommonContext:o},function(t,e,n){const r={date:t.startClocks.timeStamp,error:{id:$t(),message:t.message,source:t.source,stack:t.stack,handling_stack:t.handlingStack,type:t.type,handling:t.handling,causes:t.causes,source_type:"browser",fingerprint:t.fingerprint,csp:t.csp},type:"error",view:{in_foreground:e.wasInPageStateAt("active",t.startClocks.relative)}},o={error:t.originalError,handlingStack:t.handlingStack};return{rawRumEvent:r,startTime:t.startClocks.relative,domainContext:o}}(n,e)))})),{addError:({error:e,handlingStack:n,startClocks:r,context:o},i)=>{const s=Ln({stackTrace:Dn(e)?nt(e):void 0,originalError:e,handlingStack:n,startClocks:r,nonErrorPrefix:"Provided",source:He,handling:"handled"});t.notify(13,{customerContext:o,savedCommonContext:i,error:s})}}}(t,r)}function Kn(t,e){const n=Ct();let r=!1;const{stop:o}=Z(t,window,["click","mousedown","keydown","touchstart","pointerdown"],(e=>{if(!e.cancelable)return;const n={entryType:"first-input",processingStart:Tt(),processingEnd:Tt(),startTime:e.timeStamp,duration:0,name:"",cancelable:!1,target:null,toJSON:()=>({})};"pointerdown"===e.type?function(t,e){Z(t,window,["pointerup","pointercancel"],(t=>{"pointerup"===t.type&&i(e)}),{once:!0})}(t,n):i(n)}),{passive:!0,capture:!0});return{stop:o};function i(t){if(!r){r=!0,o();const i=t.processingStart-t.startTime;i>=0&&i<Ct()-n&&e(t)}}}var Yn;function Xn(t,e){return new J((n=>{if(!window.PerformanceObserver)return;const r=t=>{const e=function(t){return t.filter((t=>!function(t){return!(t.entryType!==Yn.RESOURCE||_n(t.name)&&wn(t))}(t)))}(t);e.length>0&&n.notify(e)};let o,i=!0;const s=new PerformanceObserver(p((t=>{i?o=E((()=>r(t.getEntries()))):r(t.getEntries())})));try{s.observe(e)}catch(t){if(y([Yn.RESOURCE,Yn.NAVIGATION,Yn.LONG_TASK,Yn.PAINT],e.type)){e.buffered&&(o=E((()=>r(performance.getEntriesByType(e.type)))));try{s.observe({entryTypes:[e.type]})}catch(t){return}}}let a;return i=!1,function(t){!Zn&&void 0!==window.performance&&"getEntries"in performance&&"addEventListener"in performance&&(Zn=X(t,performance,"resourcetimingbufferfull",(()=>{performance.clearResourceTimings()})))}(t),Qn(Yn.FIRST_INPUT)||e.type!==Yn.FIRST_INPUT||({stop:a}=Kn(t,(t=>{r([t])}))),()=>{s.disconnect(),a&&a(),I(o)}}))}let Zn;function Qn(t){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(t)}function tr(t,e){if(window.requestIdleCallback&&window.cancelIdleCallback){const n=window.requestIdleCallback(p(t),e);return()=>window.cancelIdleCallback(n)}return function(t){const e=Ct(),n=E((()=>{t({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Ct()-e))})}),0);return()=>I(n)}(t)}!function(t){t.EVENT="event",t.FIRST_INPUT="first-input",t.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",t.LAYOUT_SHIFT="layout-shift",t.LONG_TASK="longtask",t.LONG_ANIMATION_FRAME="long-animation-frame",t.NAVIGATION="navigation",t.PAINT="paint",t.RESOURCE="resource"}(Yn||(Yn={}));function er(){return rr(63)}let nr;function rr(t){return nr||(nr=or),nr(t)}function or(t){const e=(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(2));return 63===t&&(e[e.length-1]>>>=1),{toString(t=10){let n=e[1],r=e[0],o="";do{const e=n%t*4294967296+r;n=Math.floor(n/t),r=Math.floor(e/t),o=(e%t).toString(t)+o}while(n||r);return o}}}function ir(t){return window.CSS&&window.CSS.escape?window.CSS.escape(t):t.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,(function(t,e){return e?"\0"===t?"ï¿½":`${t.slice(0,-1)}\\${t.charCodeAt(t.length-1).toString(16)} `:`\\${t}`}))}function sr(t){if(t.parentElement)return t.parentElement;for(;t.parentNode;){if(t.parentNode.nodeType===Node.ELEMENT_NODE)return t.parentNode;t=t.parentNode}return null}const ar=new class{constructor(t){this.map=new WeakMap,t&&t.forEach((t=>this.map.set(t,1)))}add(t){return this.map.set(t,1),this}delete(t){return this.map.delete(t)}has(t){return this.map.has(t)}};function cr(t){if(!performance||!("getEntriesByName"in performance))return;const e=performance.getEntriesByName(t.url,"resource");if(!e.length||!("toJSON"in e[0]))return;const n=e.filter((t=>!ar.has(t))).filter((t=>wn(t)&&Sn(t))).filter((e=>function(t,e,n){const r=1;return t.startTime>=e-r&&ur(t)<=It(n,r)}(e,t.startClocks.relative,ur({startTime:t.startClocks.relative,duration:t.duration}))));return 1===n.length?(ar.add(n[0]),n[0].toJSON()):void 0}function ur(t){return It(t.startTime,t.duration)}function dr(t,e,n){if(document.readyState===e||"complete"===document.readyState)return n(),{stop:N};return X(t,window,"complete"===e?"load":"DOMContentLoaded",n,{once:!0})}function lr(t){return t.nodeType===Node.TEXT_NODE}function fr(t){return t.nodeType===Node.ELEMENT_NODE}function pr(t){const e=function(t){const e=t.querySelector("meta[name=dd-trace-id]"),n=t.querySelector("meta[name=dd-trace-time]");return mr(e&&e.content,n&&n.content)}(t)||function(t){const e=function(t){for(let e=0;e<t.childNodes.length;e+=1){const n=gr(t.childNodes[e]);if(n)return n}if(t.body)for(let e=t.body.childNodes.length-1;e>=0;e-=1){const n=t.body.childNodes[e],r=gr(n);if(r)return r;if(!lr(n))break}}(t);if(!e)return;return mr(Lt(e,"trace-id"),Lt(e,"trace-time"))}(t);if(e&&!(e.traceTime<=Ct()-12e4))return e.traceId}function mr(t,e){const n=e&&Number(e);if(t&&n)return{traceId:t,traceTime:n}}function gr(t){if(t&&function(t){return t.nodeType===Node.COMMENT_NODE}(t)){const e=/^\s*DATADOG;(.*?)\s*$/.exec(t.data);if(e)return e[1]}}function yr(){if(Qn(Yn.NAVIGATION)){const t=performance.getEntriesByType(Yn.NAVIGATION)[0];if(t)return t}const t=function(){const t={},e=performance.timing;for(const n in e)if(ht(e[n])){const r=n,o=e[r];t[r]=0===o?0:Rt(o)}return t}(),e=C({entryType:Yn.NAVIGATION,initiatorType:"navigation",name:window.location.href,startTime:0,duration:t.responseEnd,decodedBodySize:0,encodedBodySize:0,transferSize:0,workerStart:0,toJSON:()=>C({},e,{toJSON:void 0})},t);return e}function vr(t,e){dr(t,"interactive",(()=>{const t=C(yr().toJSON(),{entryType:Yn.RESOURCE,initiatorType:"initial_document",traceId:pr(document),toJSON:()=>C({},t,{toJSON:void 0})});e(t)}))}function hr(t,e,n,r=function(){const t=[];function e(e){let r;if(e.didTimeout){const t=performance.now();r=()=>30-(performance.now()-t)}else r=e.timeRemaining.bind(e);for(;r()>0&&t.length;)t.shift()();t.length&&n()}function n(){tr(e,{timeout:1e3})}return{push(e){1===t.push(e)&&n()}}}(),o=vr){t.subscribe(7,(t=>{s((()=>function(t,e,n){const r=cr(t),o=r?bt(r.startTime):t.startClocks,i=function(t,e){if(!(t.traceSampled&&t.traceId&&t.spanId))return;return{_dd:{span_id:t.spanId.toString(),trace_id:t.traceId.toString(),rule_psr:e.rulePsr}}}(t,e);if(!e.trackResources&&!i)return;const s="xhr"===t.type?"xhr":"fetch",a=r?wr(r):void 0,c=function(t,e,n){return t.wasInPageStateDuringPeriod("frozen",e.relative,n)?void 0:St(n)}(n,o,t.duration),u=F({date:o.timeStamp,resource:{id:$t(),type:s,duration:c,method:t.method,status_code:t.status,protocol:r&&xn(r),url:In(t.url)?Rn(t.url):t.url,delivery_type:r&&Tn(r)},type:"resource",_dd:{discarded:!e.trackResources}},i,a);return{startTime:o.relative,rawRumEvent:u,domainContext:{performanceEntry:r,xhr:t.xhr,response:t.response,requestInput:t.input,requestInit:t.init,error:t.error,isAborted:t.isAborted,handlingStack:t.handlingStack}}}(t,e,n)))}));const i=Xn(e,{type:Yn.RESOURCE,buffered:!0}).subscribe((t=>{for(const n of t)vn(n)||s((()=>br(n,e)))}));function s(e){r.push((()=>{const n=e();n&&t.notify(11,n)}))}return o(e,(t=>{s((()=>br(t,e)))})),{stop:()=>{i.unsubscribe()}}}function br(t,e){const n=bt(t.startTime),r=function(t,e){if(!t.traceId)return;return{_dd:{trace_id:t.traceId,span_id:er().toString(),rule_psr:e.rulePsr}}}(t,e);if(!e.trackResources&&!r)return;const o=gn(t),i=wr(t),s=F({date:n.timeStamp,resource:{id:$t(),type:o,url:t.name,status_code:(a=t.responseStatus,0===a?void 0:a),protocol:xn(t),delivery_type:Tn(t)},type:"resource",_dd:{discarded:!e.trackResources}},r,i);var a;return{startTime:n.relative,rawRumEvent:s,domainContext:{performanceEntry:t}}}function wr(t){const{renderBlockingStatus:e}=t;return{resource:C({duration:hn(t),render_blocking_status:e},kn(t),bn(t))}}function Sr(t,e,n){const{stop:r,eventCounts:o}=function({lifeCycle:t,isChildEvent:e,onChange:n=N}){const r={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},o=t.subscribe(12,(t=>{var o;if("view"!==t.type&&"vital"!==t.type&&e(t))switch(t.type){case"error":r.errorCount+=1,n();break;case"action":r.actionCount+=1,t.action.frustration&&(r.frustrationCount+=t.action.frustration.type.length),n();break;case"long_task":r.longTaskCount+=1,n();break;case"resource":(null===(o=t._dd)||void 0===o?void 0:o.discarded)||(r.resourceCount+=1,n())}}));return{stop:()=>{o.unsubscribe()},eventCounts:r}}({lifeCycle:t,isChildEvent:t=>t.view.id===e,onChange:n});return{stop:r,eventCounts:o}}Oe.ALLOW,Oe.MASK,Oe.MASK_USER_INPUT;const Cr=["data-dd-action-name","data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],xr=[Er,function(t){if(t.id&&!_r(t.id))return`#${ir(t.id)}`}],Tr=[Er,function(t){if("BODY"===t.tagName)return;const e=function(t){if(t.classList)return t.classList;const e=(t.getAttribute("class")||"").trim();return e?e.split(/\s+/):[]}(t);for(let n=0;n<e.length;n+=1){const r=e[n];if(!_r(r))return`${ir(t.tagName)}.${ir(r)}`}},function(t){return ir(t.tagName)}];function kr(t,e){if(!function(t){if("isConnected"in t)return t.isConnected;return t.ownerDocument.documentElement.contains(t)}(t))return;let n,r=t;for(;r&&"HTML"!==r.nodeName;){const t=Rr(r,xr,Ar,e,n);if(t)return t;n=Rr(r,Tr,Or,e,n)||Nr(Ir(r),n),r=sr(r)}return n}function _r(t){return/[0-9]/.test(t)}function Er(t,e){if(e){const t=n(e);if(t)return t}for(const t of Cr){const e=n(t);if(e)return e}function n(e){if(t.hasAttribute(e))return`${ir(t.tagName)}[${e}="${ir(t.getAttribute(e))}"]`}}function Ir(t){let e=sr(t).firstElementChild,n=1;for(;e&&e!==t;)e.tagName===t.tagName&&(n+=1),e=e.nextElementSibling;return`${ir(t.tagName)}:nth-of-type(${n})`}function Rr(t,e,n,r,o){for(const i of e){const e=i(t,r);if(e&&n(t,e,o))return Nr(e,o)}}function Ar(t,e,n){return 1===t.ownerDocument.querySelectorAll(Nr(e,n)).length}function Or(t,e,n){let r;if(void 0===n)r=t=>{return r=e,(n=t).matches?n.matches(r):!!n.msMatchesSelector&&n.msMatchesSelector(r);var n,r};else{const t=function(){if(void 0===Mr)try{document.querySelector(":scope"),Mr=!0}catch(t){Mr=!1}return Mr}()?Nr(`${e}:scope`,n):Nr(e,n);r=e=>null!==e.querySelector(t)}let o=sr(t).firstElementChild;for(;o;){if(o!==t&&r(o))return!1;o=o.nextElementSibling}return!0}function Nr(t,e){return e?`${t}>${e}`:t}let Mr;function $r(t,e,n=yr){return function(t,e){let n;const{stop:r}=dr(t,"complete",(()=>{n=E((()=>e()))}));return{stop:()=>{r(),I(n)}}}(t,(()=>{const t=n();(function(t){return t.loadEventEnd<=0})(t)||e(function(t){return{domComplete:t.domComplete,domContentLoaded:t.domContentLoadedEventEnd,domInteractive:t.domInteractive,loadEvent:t.loadEventEnd,firstByte:t.responseStart>=0&&t.responseStart<=Tt()?t.responseStart:void 0}}(t))}))}function Pr(t,e=window){let n,r;return"hidden"===document.visibilityState?n=0:(n=1/0,({stop:r}=Z(t,e,["pagehide","visibilitychange"],(t=>{"pagehide"!==t.type&&"hidden"!==document.visibilityState||(n=t.timeStamp,r())}),{capture:!0}))),{get timeStamp(){return n},stop(){null==r||r()}}}function Lr(t,e,n){const r={},{stop:o}=$r(t,(t=>{e(t.loadEvent),r.navigationTimings=t,n()})),i=Pr(t),{stop:s}=function(t,e,n){return{stop:Xn(t,{type:Yn.PAINT,buffered:!0}).subscribe((t=>{const r=h(t,(t=>"first-contentful-paint"===t.name&&t.startTime<e.timeStamp&&t.startTime<6e5));r&&n(r.startTime)})).unsubscribe}}(t,i,(t=>{r.firstContentfulPaint=t,n()})),{stop:a}=function(t,e,n,r){let o=1/0;const{stop:i}=Z(t,n,["pointerdown","keydown"],(t=>{o=t.timeStamp}),{capture:!0,once:!0});let s=0;const a=Xn(t,{type:Yn.LARGEST_CONTENTFUL_PAINT,buffered:!0}).subscribe((n=>{const i=function(t,e){for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(e(r,n,t))return r}}(n,(t=>t.entryType===Yn.LARGEST_CONTENTFUL_PAINT&&t.startTime<o&&t.startTime<e.timeStamp&&t.startTime<6e5&&t.size>s));if(i){let e;i.element&&(e=kr(i.element,t.actionNameAttribute)),r({value:i.startTime,targetSelector:e}),s=i.size}}));return{stop:()=>{i(),a.unsubscribe()}}}(t,i,window,(t=>{r.largestContentfulPaint=t,n()})),{stop:c}=function(t,e,n){const r=Xn(t,{type:Yn.FIRST_INPUT,buffered:!0}).subscribe((r=>{const o=h(r,(t=>t.startTime<e.timeStamp));if(o){const e=Et(o.startTime,o.processingStart);let r;o.target&&fr(o.target)&&(r=kr(o.target,t.actionNameAttribute)),n({delay:e>=0?e:0,time:o.startTime,targetSelector:r})}}));return{stop:()=>{r.unsubscribe()}}}(t,i,(t=>{r.firstInput=t,n()}));return{stop:function(){o(),s(),a(),c(),i.stop()},initialViewMetrics:r}}function Vr(t,e,n){if(!Br())return{stop:N};let r,o,i=0;n({value:0});const s=function(){let t,e,n=0,r=0;return{update:o=>{let i;return void 0===t||o.startTime-e>=1e3||o.startTime-t>=5e3?(t=e=o.startTime,r=n=o.value,i=!0):(n+=o.value,e=o.startTime,i=o.value>r,i&&(r=o.value)),{cumulatedValue:n,isMaxValue:i}}}}(),a=Xn(t,{type:Yn.LAYOUT_SHIFT,buffered:!0}).subscribe((a=>{for(const c of a){if(c.hadRecentInput||c.startTime<e)continue;const{cumulatedValue:a,isMaxValue:u}=s.update(c);if(u){const t=Dr(c.sources);r=t?new WeakRef(t):void 0,o=Et(e,c.startTime)}if(a>i){i=a;const e=null==r?void 0:r.deref();n({value:vt(i,4),targetSelector:e&&kr(e,t.actionNameAttribute),time:o})}}}));return{stop:()=>{a.unsubscribe()}}}function Dr(t){var e;if(t)return null===(e=h(t,(t=>!!t.node&&fr(t.node))))||void 0===e?void 0:e.node}function Br(){return Qn(Yn.LAYOUT_SHIFT)&&"WeakRef"in window}const Ur=new Map;let qr,jr=0,Fr=1/0,zr=0;const Hr=()=>qr?jr:window.performance.interactionCount||0;function Gr(t,e,n){if(!(Qn(Yn.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return{getInteractionToNextPaint:()=>{},setViewEnd:N,stop:N};const{getViewInteractionCount:r,stopViewInteractionCount:o}=function(t){"interactionCount"in performance||qr||(qr=new window.PerformanceObserver(p((t=>{t.getEntries().forEach((t=>{const e=t;e.interactionId&&(Fr=Math.min(Fr,e.interactionId),zr=Math.max(zr,e.interactionId),jr=(zr-Fr)/7+1)}))}))),qr.observe({type:"event",buffered:!0,durationThreshold:0}));const e="initial_load"===t?0:Hr();let n={stopped:!1};function r(){return Hr()-e}return{getViewInteractionCount:()=>n.stopped?n.interactionCount:r(),stopViewInteractionCount:()=>{n={stopped:!0,interactionCount:r()}}}}(n);let i=1/0;const s=function(t){const e=[];function n(){e.sort(((t,e)=>e.duration-t.duration)).splice(10)}return{process(t){const r=e.findIndex((e=>t.interactionId===e.interactionId)),o=e[e.length-1];-1!==r?t.duration>e[r].duration&&(e[r]=t,n()):(e.length<10||t.duration>o.duration)&&(e.push(t),n())},estimateP98Interaction(){const n=Math.min(e.length-1,Math.floor(t()/50));return e[n]}}}(r);let a,c,u=-1;function d(n){for(const t of n)t.interactionId&&t.startTime>=e&&t.startTime<=i&&s.process(t);const r=s.estimateP98Interaction();r&&r.duration!==u&&(u=r.duration,c=Et(e,r.startTime),a=function(t){const e=Ur.get(t);return Ur.delete(t),e}(r.startTime),!a&&r.target&&fr(r.target)&&(a=kr(r.target,t.actionNameAttribute)))}const l=Xn(t,{type:Yn.FIRST_INPUT,buffered:!0}).subscribe(d),f=Xn(t,{type:Yn.EVENT,durationThreshold:40,buffered:!0}).subscribe(d);return{getInteractionToNextPaint:()=>u>=0?{value:Math.min(u,6e4),targetSelector:a,time:c}:r()?{value:0}:void 0,setViewEnd:t=>{i=t,o()},stop:()=>{f.unsubscribe(),l.unsubscribe()}}}function Jr(t,e,n,r,o,i){return function(t,e,n){let r,o=!1;const i=E(p((()=>u({hadActivity:!1}))),100),s=void 0!==n?E(p((()=>u({hadActivity:!0,end:xt()}))),n):void 0,a=t.subscribe((({isBusy:t})=>{I(i),I(r);const e=xt();t||(r=E(p((()=>u({hadActivity:!0,end:e}))),100))})),c=()=>{o=!0,I(i),I(r),I(s),a.unsubscribe()};function u(t){o||(c(),e(t))}return{stop:c}}(function(t,e,n,r){return new J((o=>{const i=[];let s,a=0;return i.push(e.subscribe(c),n.subscribe(c),Xn(r,{type:Yn.RESOURCE}).subscribe((t=>{t.some((t=>!Wr(r,t.name)))&&c()})),t.subscribe(6,(t=>{Wr(r,t.url)||(void 0===s&&(s=t.requestIndex),a+=1,c())})),t.subscribe(7,(t=>{Wr(r,t.url)||void 0===s||t.requestIndex<s||(a-=1,c())}))),()=>{i.forEach((t=>t.unsubscribe()))};function c(){o.notify({isBusy:a>0})}}))}(t,e,n,r),o,i)}function Wr(t,e){return function(t,e,n=!1){return t.some((t=>{try{if("function"==typeof t)return t(e);if(t instanceof RegExp)return t.test(e);if("string"==typeof t)return n?S(e,t):t===e}catch(t){s.error(t)}return!1}))}(t.excludedActivityUrls,e)}let Kr;function Yr(t){return Kr||(Kr=function(t){return new J((e=>{const{throttled:n}=O((()=>{e.notify(Xr())}),200);return X(t,window,"resize",n,{capture:!0,passive:!0}).stop}))}(t)),Kr}function Xr(){const t=window.visualViewport;return t?{width:Number(t.width*t.scale),height:Number(t.height*t.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}function Zr(t,e,n,r=function(t,e=1e3){return new J((n=>{function r(){n.notify(function(){const t=function(){let t;const e=window.visualViewport;return t=e?e.pageTop-e.offsetTop:void 0!==window.scrollY?window.scrollY:window.pageYOffset||0,Math.round(t)}(),{height:e}=Xr(),n=Math.round((document.scrollingElement||document.documentElement).scrollHeight),r=Math.round(e+t);return{scrollHeight:n,scrollDepth:r,scrollTop:t}}())}if(window.ResizeObserver){const n=O(r,e,{leading:!1,trailing:!0}),o=document.scrollingElement||document.documentElement,i=new ResizeObserver(p(n.throttled));o&&i.observe(o);const s=X(t,window,"scroll",n.throttled,{passive:!0});return()=>{n.cancel(),i.disconnect(),s.stop()}}}))}(t)){let o=0,i=0,s=0;const a=r.subscribe((({scrollDepth:t,scrollTop:r,scrollHeight:a})=>{let c=!1;if(t>o&&(o=t,c=!0),a>i){i=a;const t=Tt();s=Et(e.relative,t),c=!0}c&&n({maxDepth:Math.min(o,i),maxDepthScrollTop:r,maxScrollHeight:i,maxScrollHeightTime:s})}));return{stop:()=>a.unsubscribe()}}function Qr(t,e,n,r,o,i,s){const a={},{stop:c,setLoadEvent:u}=function(t,e,n,r,o,i,s){let a="initial_load"===o,c=!0;const u=[],d=Pr(r);function l(){if(!c&&!a&&u.length>0){const t=Math.max(...u);t<d.timeStamp&&s(t)}}const{stop:f}=Jr(t,e,n,r,(t=>{c&&(c=!1,t.hadActivity&&u.push(Et(i.timeStamp,t.end)),l())}));return{stop:()=>{f(),d.stop()},setLoadEvent:t=>{a&&(a=!1,u.push(t),l())}}}(t,e,n,r,i,s,(t=>{a.loadingTime=t,o()})),{stop:d}=Zr(r,s,(t=>{a.scroll=t})),{stop:l}=Vr(r,s.relative,(t=>{a.cumulativeLayoutShift=t,o()})),{stop:f,getInteractionToNextPaint:p,setViewEnd:m}=Gr(r,s.relative,i);return{stop:()=>{c(),l(),d()},stopINPTracking:f,setLoadEvent:u,setViewEnd:m,getCommonViewMetrics:()=>(a.interactionToNextPaint=p(),a)}}function to(t,e,n,r,o,i,a,c){const u=new Set;let d,l=f("initial_load",_t(),c);function f(i,a,c){const d=function(t,e,n,r,o,i,a=kt(),c){const u=$t(),d=new J,l={};let f,p=0;const m=P(o),g=K();let y,v,h,b,w=!0;c&&(y=c.name,v=c.service||void 0,h=c.version||void 0,c.context&&(b=c.context,g.setContext(b)));const S={id:u,name:y,startClocks:a,service:v,version:h,context:b};t.notify(1,S),t.notify(2,S);const{throttled:C,cancel:x}=O(U,3e3,{leading:!1}),{setLoadEvent:T,setViewEnd:k,stop:_,stopINPTracking:I,getCommonViewMetrics:M}=Qr(t,e,n,r,C,i,a),{stop:$,initialViewMetrics:L}="initial_load"===i?Lr(r,T,C):{stop:N,initialViewMetrics:{}},{stop:V,eventCounts:D}=Sr(t,u,C),B=R(U,3e5);function U(){x(),p+=1;const e=void 0===f?xt():f.timeStamp;t.notify(3,{customTimings:l,documentVersion:p,id:u,name:y,service:v,version:h,context:g.getContext(),loadingType:i,location:m,startClocks:a,commonViewMetrics:M(),initialViewMetrics:L,duration:Et(a.timeStamp,e),isActive:void 0===f,sessionIsActive:w,eventCounts:D})}return U(),g.changeObservable.subscribe(U),{get name(){return y},service:v,version:h,contextManager:g,stopObservable:d,end(e={}){var n,r;f||(f=null!==(n=e.endClocks)&&void 0!==n?n:kt(),w=null===(r=e.sessionIsActive)||void 0===r||r,t.notify(4,{endClocks:f}),t.notify(5,{endClocks:f}),A(B),k(f.relative),_(),U(),E((()=>{this.stop()}),3e5))},stop(){$(),V(),I(),d.notify()},addTiming(t,e){if(f)return;const n=function(t){return t<31536e6}(e)?e:Et(a.timeStamp,e);l[function(t){const e=t.replace(/[^a-zA-Z0-9-_.@$]/g,"_");e!==t&&s.warn(`Invalid timing name: ${t}, sanitized to: ${e}`);return e}(t)]=n,C()},setViewName(t){y=t,U()}}}(e,n,r,o,t,i,a,c);return u.add(d),d.stopObservable.subscribe((()=>{u.delete(d)})),d}return e.subscribe(9,(()=>{l=f("route_change",void 0,{name:l.name,service:l.service,version:l.version,context:l.contextManager.getContext()})})),e.subscribe(8,(()=>{l.end({sessionIsActive:!1})})),e.subscribe(10,(t=>{t.reason===qe.UNLOADING&&l.end()})),a&&(d=function(t){return t.subscribe((({oldLocation:t,newLocation:e})=>{var n,r;r=e,((n=t).pathname!==r.pathname||!function(t){const e=t.substring(1);return""!==e&&!!document.getElementById(e)}(r.hash)&&eo(r.hash)!==eo(n.hash))&&(l.end(),l=f("route_change"))}))}(i)),{addTiming:(t,e=xt())=>{l.addTiming(t,e)},startView:(t,e)=>{l.end({endClocks:e}),l=f("route_change",e,t)},setViewContext:t=>{l.contextManager.setContext(t)},setViewContextProperty:(t,e)=>{l.contextManager.setContextProperty(t,e)},setViewName:t=>{l.setViewName(t)},stop:()=>{d&&d.unsubscribe(),l.end(),u.forEach((t=>t.stop()))}}}function eo(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}function no(t,e,n,r,o,i,s,a,c,u){return t.subscribe(3,(n=>t.notify(11,function(t,e,n,r,o){var i,s,a,c,u,d,l,f,p,m,g,y,v,h,b,w;const S=r.getReplayStats(t.id),C=o.findAll(t.startClocks.relative,t.duration),x={_dd:{document_version:t.documentVersion,replay_stats:S,page_states:C,configuration:{start_session_replay_recording_manually:e.startSessionReplayRecordingManually}},date:t.startClocks.timeStamp,type:"view",view:{action:{count:t.eventCounts.actionCount},frustration:{count:t.eventCounts.frustrationCount},cumulative_layout_shift:null===(i=t.commonViewMetrics.cumulativeLayoutShift)||void 0===i?void 0:i.value,cumulative_layout_shift_time:St(null===(s=t.commonViewMetrics.cumulativeLayoutShift)||void 0===s?void 0:s.time),cumulative_layout_shift_target_selector:null===(a=t.commonViewMetrics.cumulativeLayoutShift)||void 0===a?void 0:a.targetSelector,first_byte:St(null===(c=t.initialViewMetrics.navigationTimings)||void 0===c?void 0:c.firstByte),dom_complete:St(null===(u=t.initialViewMetrics.navigationTimings)||void 0===u?void 0:u.domComplete),dom_content_loaded:St(null===(d=t.initialViewMetrics.navigationTimings)||void 0===d?void 0:d.domContentLoaded),dom_interactive:St(null===(l=t.initialViewMetrics.navigationTimings)||void 0===l?void 0:l.domInteractive),error:{count:t.eventCounts.errorCount},first_contentful_paint:St(t.initialViewMetrics.firstContentfulPaint),first_input_delay:St(null===(f=t.initialViewMetrics.firstInput)||void 0===f?void 0:f.delay),first_input_time:St(null===(p=t.initialViewMetrics.firstInput)||void 0===p?void 0:p.time),first_input_target_selector:null===(m=t.initialViewMetrics.firstInput)||void 0===m?void 0:m.targetSelector,interaction_to_next_paint:St(null===(g=t.commonViewMetrics.interactionToNextPaint)||void 0===g?void 0:g.value),interaction_to_next_paint_time:St(null===(y=t.commonViewMetrics.interactionToNextPaint)||void 0===y?void 0:y.time),interaction_to_next_paint_target_selector:null===(v=t.commonViewMetrics.interactionToNextPaint)||void 0===v?void 0:v.targetSelector,is_active:t.isActive,name:t.name,largest_contentful_paint:St(null===(h=t.initialViewMetrics.largestContentfulPaint)||void 0===h?void 0:h.value),largest_contentful_paint_target_selector:null===(b=t.initialViewMetrics.largestContentfulPaint)||void 0===b?void 0:b.targetSelector,load_event:St(null===(w=t.initialViewMetrics.navigationTimings)||void 0===w?void 0:w.loadEvent),loading_time:Mn(St(t.commonViewMetrics.loadingTime)),loading_type:t.loadingType,long_task:{count:t.eventCounts.longTaskCount},resource:{count:t.eventCounts.resourceCount},time_spent:St(t.duration)},display:t.commonViewMetrics.scroll?{scroll:{max_depth:t.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:t.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:t.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:St(t.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,session:{has_replay:!!S||void 0,is_active:!!t.sessionIsActive&&void 0},privacy:{replay_level:e.defaultPrivacyLevel}};V(t.customTimings)||(x.view.custom_timings=function(t,e){const n={};for(const r of Object.keys(t))n[r]=e(t[r]);return n}(t.customTimings,St));return{rawRumEvent:x,startTime:t.startClocks.relative,domainContext:{location:t.location}}}(n,e,0,c,a)))),to(n,t,r,o,e,i,!e.trackViewsManually,u)}let ro=[];function oo(t,e,n,r){const o=new J,i=new J,s=ke(t.sessionStoreStrategyType,e,n);ro.push((()=>s.stop()));const a=cn({expireDelay:144e5});function c(){return{id:s.getSession().id,trackingType:s.getSession()[e],isReplayForced:!!s.getSession().forcedReplay,anonymousId:s.getSession().anonymousId}}return ro.push((()=>a.stop())),s.renewObservable.subscribe((()=>{a.add(c(),Tt()),o.notify()})),s.expireObservable.subscribe((()=>{i.notify(),a.closeActive(Tt())})),s.expandOrRenewSession(),a.add(c(),_t().relative),r.observable.subscribe((()=>{r.isGranted()?s.expandOrRenewSession():s.expire()})),function(t,e){const{stop:n}=Z(t,window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0});ro.push(n)}(t,(()=>{r.isGranted()&&s.expandOrRenewSession()})),function(t,e){const n=()=>{"visible"===document.visibilityState&&e()},{stop:r}=X(t,document,"visibilitychange",n);ro.push(r);const o=R(n,6e4);ro.push((()=>{A(o)}))}(t,(()=>s.expandSession())),function(t,e){const{stop:n}=X(t,window,"resume",e,{capture:!0});ro.push(n)}(t,(()=>s.restartSession())),{findSession:(t,e)=>a.find(t,e),renewObservable:o,expireObservable:i,sessionStateUpdateObservable:s.sessionStateUpdateObservable,expire:s.expire,updateSessionState:s.updateSessionState}}function io(t,e,n){const r=oo(t,"rum",(e=>function(t,e){let n;n=function(t){return"0"===t||"1"===t||"2"===t}(e)?e:yt(t.sessionSampleRate)?yt(t.sessionReplaySampleRate)?"1":"2":"0";return{trackingType:n,isTracked:so(n)}}(t,e)),n);return r.expireObservable.subscribe((()=>{e.notify(8)})),r.renewObservable.subscribe((()=>{e.notify(9)})),r.sessionStateUpdateObservable.subscribe((({previousState:t,newState:e})=>{if(!t.forcedReplay&&e.forcedReplay){const t=r.findSession();t&&(t.isReplayForced=!0)}})),{findTrackedSession:t=>{const e=r.findSession(t);if(e&&so(e.trackingType))return{id:e.id,sessionReplay:"1"===e.trackingType?1:e.isReplayForced?2:0,anonymousId:e.anonymousId}},expire:r.expire,expireObservable:r.expireObservable,setForcedReplay:()=>r.updateSessionState({forcedReplay:"1"})}}function so(t){return"2"===t||"1"===t}function ao({encoder:t,request:e,flushController:n,messageBytesLimit:r}){let o={};const i=n.flushObservable.subscribe((n=>function(n){const r=b(o).join("\n");o={};const i=(a=n.reason,y(b(qe),a)),s=i?e.sendOnExit:e.send;var a;if(i&&t.isAsync){const e=t.finishSync();e.outputBytesCount&&s(co(e));const n=[e.pendingData,r].filter(Boolean).join("\n");n&&s({data:n,bytesCount:k(n)})}else r&&t.write(t.isEmpty?r:`\n${r}`),t.finish((t=>{s(co(t))}))}(n)));function a(e,i){const a=M(e),u=t.estimateEncodedBytesCount(a);u>=r?s.warn(`Discarded a message whose size was bigger than the maximum allowed size ${r}KB. More details: ${c}/#technical-limitations`):(function(t){return void 0!==t&&void 0!==o[t]}(i)&&function(e){const r=o[e];delete o[e];const i=t.estimateEncodedBytesCount(r);n.notifyAfterRemoveMessage(i)}(i),function(e,r,i){n.notifyBeforeAddMessage(r),void 0!==i?(o[i]=e,n.notifyAfterAddMessage()):t.write(t.isEmpty?e:`\n${e}`,(t=>{n.notifyAfterAddMessage(t-r)}))}(a,u,i))}return{flushController:n,add:a,upsert:a,stop:i.unsubscribe}}function co(t){let e;return e="string"==typeof t.output?t.output:new Blob([t.output],{type:"text/plain"}),{data:e,bytesCount:t.outputBytesCount,encoding:t.encoding}}const uo="log",lo=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"];let fo=jt(),po=t=>{fo.add((()=>po(t)))};function mo(t,e){po(C({type:uo,status:"error"},function(t){if(Dn(t)){const e=nt(t);return{error:{kind:e.name,stack:mt(go(e))},message:e.message}}return{error:{stack:"No stack, consider using an instance of Error"},message:`Uncaught ${M(t)}`}}(t),e))}function go(t){return t.stack=t.stack.filter((t=>!t.url||lo.some((e=>S(t.url,e))))),t}function yo(t,e,n,r,o){0===e.transportStatus&&0===e.queuedPayloads.size()&&e.bandwidthMonitor.canHandle(t)?ho(t,e,n,{onSuccess:()=>bo(0,e,n,r,o),onFailure:()=>{e.queuedPayloads.enqueue(t),vo(e,n,r,o)}}):e.queuedPayloads.enqueue(t)}function vo(t,e,n,r){2===t.transportStatus&&E((()=>{ho(t.queuedPayloads.first(),t,e,{onSuccess:()=>{t.queuedPayloads.dequeue(),t.currentBackoffTime=1e3,bo(1,t,e,n,r)},onFailure:()=>{t.currentBackoffTime=Math.min(6e4,2*t.currentBackoffTime),vo(t,e,n,r)}})}),t.currentBackoffTime)}function ho(t,e,n,{onSuccess:r,onFailure:o}){e.bandwidthMonitor.add(t),n(t,(n=>{e.bandwidthMonitor.remove(t),!function(t){return"opaque"!==t.type&&(0===t.status&&!navigator.onLine||408===t.status||429===t.status||(e=t.status,e>=500));var e}(n)?(e.transportStatus=0,r()):(e.transportStatus=e.bandwidthMonitor.ongoingRequestCount>0?1:2,t.retry={count:t.retry?t.retry.count+1:1,lastFailureStatus:n.status},o())}))}function bo(t,e,n,r,o){0===t&&e.queuedPayloads.isFull()&&!e.queueFullReported&&(o({message:`Reached max ${r} events size queued for upload: 3MiB`,source:Fe,startClocks:kt()}),e.queueFullReported=!0);const i=e.queuedPayloads;for(e.queuedPayloads=wo();i.size()>0;)yo(i.dequeue(),e,n,r,o)}function wo(){const t=[];return{bytesCount:0,enqueue(e){this.isFull()||(t.push(e),this.bytesCount+=e.bytesCount)},first:()=>t[0],dequeue(){const e=t.shift();return e&&(this.bytesCount-=e.bytesCount),e},size:()=>t.length,isFull(){return this.bytesCount>=3145728}}}function So(t,e,n){const r={transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle(t){return 0===this.ongoingRequestCount||this.ongoingByteCount+t.bytesCount<=81920&&this.ongoingRequestCount<32},add(t){this.ongoingRequestCount+=1,this.ongoingByteCount+=t.bytesCount},remove(t){this.ongoingRequestCount-=1,this.ongoingByteCount-=t.bytesCount}},queuedPayloads:wo(),queueFullReported:!1},o=(n,r)=>function(t,e,n,r){if(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(t){return!1}}()&&n.bytesCount<e){const e=t.build("fetch",n);fetch(e,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(p((t=>null==r?void 0:r({status:t.status,type:t.type}))),p((()=>{xo(t.build("xhr",n),n.data,r)})))}else{xo(t.build("xhr",n),n.data,r)}}(t,e,n,r);return{send:e=>{yo(e,r,o,t.trackType,n)},sendOnExit:n=>{!function(t,e,n){if(navigator.sendBeacon&&n.bytesCount<e)try{const e=t.build("beacon",n);if(navigator.sendBeacon(e,n.data))return}catch(t){!function(t){Co||(Co=!0,mo(t))}(t)}xo(t.build("xhr",n),n.data)}(t,e,n)}}}let Co=!1;function xo(t,e,n){const r=new XMLHttpRequest;r.open("POST",t,!0),e instanceof Blob&&r.setRequestHeader("Content-Type",e.type),X({allowUntrustedEvents:!0},r,"loadend",(()=>{null==n||n({status:r.status})}),{once:!0}),r.send(e)}function To({messagesLimit:t,bytesLimit:e,durationLimit:n,pageExitObservable:r,sessionExpireObservable:o}){const i=r.subscribe((t=>l(t.reason))),s=o.subscribe((()=>l("session_expire"))),a=new J((()=>()=>{i.unsubscribe(),s.unsubscribe()}));let c,u=0,d=0;function l(t){if(0===d)return;const e=d,n=u;d=0,u=0,f(),a.notify({reason:t,messagesCount:e,bytesCount:n})}function f(){I(c),c=void 0}return{flushObservable:a,get messagesCount(){return d},notifyBeforeAddMessage(t){u+t>=e&&l("bytes_limit"),d+=1,u+=t,void 0===c&&(c=E((()=>{l("duration_limit")}),n))},notifyAfterAddMessage(n=0){u+=n,d>=t?l("messages_limit"):u>=e&&l("bytes_limit")},notifyAfterRemoveMessage(t){u-=t,d-=1,0===d&&f()}}}function ko(t,e,n,r,o,i,s){const a=t.replica,c=function(t,e,n,r,o,i,s=ao){const a=u(t,e),c=n&&u(t,n);function u(t,{endpoint:e,encoder:n}){return s({encoder:n,request:So(e,t.batchBytesLimit,r),flushController:To({messagesLimit:t.batchMessagesLimit,bytesLimit:t.batchBytesLimit,durationLimit:t.flushTimeout,pageExitObservable:o,sessionExpireObservable:i}),messageBytesLimit:t.messageBytesLimit})}return{flushObservable:a.flushController.flushObservable,add(t,e=!0){a.add(t),c&&e&&c.add(n.transformMessage?n.transformMessage(t):t)},upsert:(t,e)=>{a.upsert(t,e),c&&c.upsert(n.transformMessage?n.transformMessage(t):t,e)},stop:()=>{a.stop(),c&&c.stop()}}}(t,{endpoint:t.rumEndpointBuilder,encoder:s(2)},a&&{endpoint:a.rumEndpointBuilder,transformMessage:t=>F(t,{application:{id:a.applicationId}}),encoder:s(3)},r,o,i);return e.subscribe(12,(t=>{"view"===t.type?c.upsert(t,t.view.id):c.add(t)})),c}function _o(t,e){let n=P(e);return new J((r=>{const{stop:o}=function(t,e){const{stop:n}=Ft(Eo("pushState"),"pushState",(({onPostCall:t})=>{t(e)})),{stop:r}=Ft(Eo("replaceState"),"replaceState",(({onPostCall:t})=>{t(e)})),{stop:o}=X(t,window,"popstate",e);return{stop:()=>{n(),r(),o()}}}(t,s),{stop:i}=function(t,e){return X(t,window,"hashchange",e)}(t,s);function s(){if(n.href===e.href)return;const t=P(e);r.notify({newLocation:t,oldLocation:n}),n=t}return()=>{o(),i()}}))}function Eo(t){return Object.prototype.hasOwnProperty.call(history,t)?history:History.prototype}let Io,Ro,Ao;function Oo(){0!==Io.batchCount&&$o()}function No(t,e){t.sum+=e,t.min=Math.min(t.min,e),t.max=Math.max(t.max,e)}function Mo(t,e){t.sum+=e.sum,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)}function $o(){Io={batchCount:0,batchBytesCount:{min:1/0,max:0,sum:0},batchMessagesCount:{min:1/0,max:0,sum:0},globalContextBytes:{min:1/0,max:0,sum:0},userContextBytes:{min:1/0,max:0,sum:0},featureFlagBytes:{min:1/0,max:0,sum:0}}}function Po(){Ao=!1,Ro={globalContextBytes:{min:1/0,max:0,sum:0},userContextBytes:{min:1/0,max:0,sum:0},featureFlagBytes:{min:1/0,max:0,sum:0}}}function Lo(t,e=500){const n=cn({expireDelay:144e5,maxEntries:4e3});let r;i(Vo(),Tt());const{stop:o}=Z(t,window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],(t=>{i(function(t){if("freeze"===t.type)return"frozen";if("pagehide"===t.type)return t.persisted?"frozen":"terminated";return Vo()}(t),t.timeStamp)}),{capture:!0});function i(t,e=Tt()){t!==r&&(r=t,n.closeActive(e),n.add({state:r,startTime:e},e))}const s={findAll:(t,r)=>{const o=n.findAll(t,r);if(0===o.length)return;const i=[],s=Math.max(0,o.length-e);for(let e=o.length-1;e>=s;e--){const n=o[e],r=Et(t,n.startTime);i.push({state:n.state,start:St(r)})}return i},wasInPageStateAt:(t,e)=>s.wasInPageStateDuringPeriod(t,e,0),wasInPageStateDuringPeriod:(t,e,r)=>n.findAll(e,r).some((e=>e.state===t)),addPageState:i,stop:()=>{o(),n.stop()}};return s}function Vo(){return"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}function Do(t,e){const n=window.cookieStore?function(t){return(e,n)=>X(t,window.cookieStore,"change",(t=>{const r=h(t.changed,(t=>t.name===e))||h(t.deleted,(t=>t.name===e));r&&n(r.value)})).stop}(t):Bo;return new J((t=>n(e,(e=>t.notify(e)))))}function Bo(t,e){const n=Lt(document.cookie,t),r=R((()=>{const r=Lt(document.cookie,t);r!==n&&e(r)}),1e3);return()=>{A(r)}}function Uo(t,{session:e,viewContext:n,errorType:r}){const o=e?e.id:"no-session-id",i=[];void 0!==r&&i.push(`error-type=${r}`),n&&(i.push(`seed=${n.id}`),i.push(`from=${n.startClocks.timeStamp}`));return`${function(t){const e=t.site,n=t.subdomain||function(t){switch(t.site){case _e:case"datadoghq.eu":return"app";case"datad0g.com":return"dd";default:return}}(t);return`https://${n?`${n}.`:""}${e}`}(t)}${`/rum/replay/sessions/${o}`}?${i.join("&")}`}const qo=function(t,e,n={}){const r=D(0),o=K(r.getOrCreateTracker(2)),i=K(r.getOrCreateTracker(1)),a=function(t){const e=new J;return{tryToInit(e){t||(t=e)},update(n){t=n,e.notify()},isGranted:()=>t===Y.GRANTED,observable:e}}(),c={vitalsByName:new Map,vitalsByReference:new WeakMap};function u(){return function(t,e,n){return{context:t.getContext(),user:e.getContext(),hasReplay:!!n.isRecording()||void 0}}(o,i,e)}let d=Ue(n,u,a,c,((s,l,f)=>{s.storeContextsAcrossPages&&(tt(s,o,"rum",2),tt(s,i,"rum",1)),r.setCompressionStatus(l?1:2);const p=t(s,e,r,u,f,l&&n.createDeflateEncoder?t=>n.createDeflateEncoder(s,l,t):et,a,c);return e.onRumStart(p.lifeCycle,s,p.session,p.viewHistory,l),d=function(t,e){return C({init:t=>{Mt("DD_RUM",t)},initConfiguration:t.initConfiguration},e)}(d,p),p}));const l=p((t=>{const e="object"==typeof t?t:{name:t};e.context&&r.getOrCreateTracker(3).updateCustomerData(e.context),d.startView(e)})),g=function(t){const e=C({version:"5.35.0",onReady(t){t()}},t);return Object.defineProperty(e,"_setDebug",{get:()=>f,enumerable:!1}),e}({init:p((t=>{d.init(t,g)})),setTrackingConsent:p((t=>{a.update(t)})),setViewName:p((t=>{d.setViewName(t)})),setViewContext:p((t=>{d.setViewContext(t)})),setViewContextProperty:p(((t,e)=>{d.setViewContextProperty(t,e)})),setGlobalContext:p((t=>{o.setContext(t)})),getGlobalContext:p((()=>o.getContext())),setGlobalContextProperty:p(((t,e)=>{o.setContextProperty(t,e)})),removeGlobalContextProperty:p((t=>o.removeContextProperty(t))),clearGlobalContext:p((()=>o.clearContext())),getInternalContext:p((t=>d.getInternalContext(t))),getInitConfiguration:p((()=>j(d.initConfiguration))),addAction:(t,e)=>{const n=pt();m((()=>{d.addAction({name:z(t),context:z(e),startClocks:kt(),type:"custom",handlingStack:n})}))},addError:(t,e)=>{const n=pt();m((()=>{d.addError({error:t,handlingStack:n,context:z(e),startClocks:kt()})}))},addTiming:p(((t,e)=>{d.addTiming(z(t),e)})),setUser:p((t=>{(function(t){const e="object"===U(t);return e||s.error("Unsupported user:",t),e})(t)&&i.setContext(Nt(t))})),getUser:p((()=>i.getContext())),setUserProperty:p(((t,e)=>{const n=Nt({[t]:e})[t];i.setContextProperty(t,n)})),removeUserProperty:p((t=>i.removeContextProperty(t))),clearUser:p((()=>i.clearContext())),startView:l,stopSession:p((()=>{d.stopSession()})),getSessionReplayLink:p((()=>e.getSessionReplayLink())),startSessionReplayRecording:p((t=>{e.start(t)})),stopSessionReplayRecording:p((()=>e.stop())),addDurationVital:p(((t,e)=>{var n;d.addDurationVital({name:z(t),type:"duration",startClocks:(n=e.startTime,{relative:Rt(n),timeStamp:n}),duration:e.duration,context:z(e&&e.context),description:z(e&&e.description)})})),startDurationVital:p(((t,e)=>d.startDurationVital(z(t),{context:z(e&&e.context),description:z(e&&e.description)}))),stopDurationVital:p(((t,e)=>{d.stopDurationVital("string"==typeof t?z(t):t,{context:z(e&&e.context),description:z(e&&e.description)})}))});return g}((function(t,e,n,r,o,i,s,a){const c=[],u=new an,d=t=>{u.notify(13,{error:t})},l=function(t){return new J((e=>{const{stop:n}=Z(t,window,["visibilitychange","freeze"],(t=>{"visibilitychange"===t.type&&"hidden"===document.visibilityState?e.notify({reason:qe.HIDDEN}):"freeze"===t.type&&e.notify({reason:qe.FROZEN})}),{capture:!0}),r=X(t,window,"beforeunload",(()=>{e.notify({reason:qe.UNLOADING})})).stop;return()=>{n(),r()}}))}(t),f=l.subscribe((t=>{u.notify(10,t)}));c.push((()=>f.unsubscribe()));const p=io(t,u,s),m=ko(t,u,0,d,l,p.expireObservable,i);c.push((()=>m.stop())),function(t,e,n,r,o){$o(),Po(),n.subscribe(12,(t=>{Ao=!0,No(Ro.globalContextBytes,r.getOrCreateTracker(2).getBytesCount()),No(Ro.userContextBytes,r.getOrCreateTracker(1).getBytesCount()),No(Ro.featureFlagBytes,y(["view","error"],t.type)?r.getOrCreateTracker(0).getBytesCount():0)})),o.subscribe((({bytesCount:t,messagesCount:e})=>{Ao&&(Io.batchCount+=1,No(Io.batchBytesCount,t),No(Io.batchMessagesCount,e),Mo(Io.globalContextBytes,Ro.globalContextBytes),Mo(Io.userContextBytes,Ro.userContextBytes),Mo(Io.featureFlagBytes,Ro.featureFlagBytes),Po())})),R(Oo,1e4)}(0,0,u,n,m.flushObservable);const g=je(),v=_o(t,location),h=Lo(t),{observable:b,stop:w}=function(){const t=new J,{stop:e}=Ft(window,"open",(()=>t.notify()));return{observable:t,stop:e}}();c.push(w);const{viewHistory:S,urlContexts:x,actionContexts:T,addAction:k,stop:_}=function(t,e,n,r,o,i,s,a,c,u){const d=function(t){const e=cn({expireDelay:144e5});return t.subscribe(1,(t=>{e.add(function(t){return{service:t.service,version:t.version,context:t.context,id:t.id,name:t.name,startClocks:t.startClocks}}(t),t.startClocks.relative)})),t.subscribe(5,(({endClocks:t})=>{e.closeActive(t.relative)})),t.subscribe(3,(t=>{const n=e.find(t.startClocks.relative);n&&t.name&&(n.name=t.name),n&&t.context&&(n.context=t.context)})),t.subscribe(9,(()=>{e.reset()})),{findView:t=>e.find(t),stop:()=>{e.stop()}}}(t),l=function(t,e,n){const r=cn({expireDelay:144e5});let o;t.subscribe(1,(({startClocks:t})=>{const e=n.href;r.add(s({url:e,referrer:o||document.referrer}),t.relative),o=e})),t.subscribe(5,(({endClocks:t})=>{r.closeActive(t.relative)}));const i=e.subscribe((({newLocation:t})=>{const e=r.find();if(e){const n=Tt();r.closeActive(n),r.add(s({url:t.href,referrer:e.referrer}),n)}}));function s({url:t,referrer:e}){return{url:t,referrer:e}}return{findUrl:t=>r.find(t),stop:()=>{i.unsubscribe(),r.stop()}}}(t,i,n),f=function(t,e,n,r,o){return t.subscribe(0,(e=>t.notify(11,$n(e,o)))),{addAction:(e,n)=>{t.notify(11,C({savedCommonContext:n},$n(e,o)))},actionContexts:{findActionId:N},stop:N}}(t,0,0,0,o),p=function(t){let e;e=Xr();const n=Yr(t).subscribe((t=>{e=t})).unsubscribe;return{get:()=>e?{viewport:e}:void 0,stop:()=>{n()}}}(e),m=function(t,e=Do(t,"datadog-ci-visibility-test-execution-id")){var n;let r=te("datadog-ci-visibility-test-execution-id")||(null===(n=window.Cypress)||void 0===n?void 0:n.env("traceId"));const o=e.subscribe((t=>{r=t}));return{get:()=>{if("string"==typeof r)return{test_execution_id:r}},stop:()=>o.unsubscribe()}}(e);return sn(e,t,r,d,l,f.actionContexts,p,m,c,u),{viewHistory:d,pageStateHistory:o,urlContexts:l,addAction:f.addAction,actionContexts:f.actionContexts,stop:()=>{f.stop(),m.stop(),p.stop(),l.stop(),d.stop(),o.stop()}}}(u,t,location,p,h,v,0,0,r,d);c.push(_);const{addTiming:E,startView:I,setViewName:A,setViewContext:O,setViewContextProperty:M,stop:$}=no(u,t,location,g,b,v,0,h,e,o);c.push($);const{stop:P}=hr(u,t,h);c.push(P),function(t,e){const n=Xn(e,{type:Yn.LONG_TASK,buffered:!0}).subscribe((n=>{for(const r of n){if(r.entryType!==Yn.LONG_TASK)break;if(!e.trackLongTasks)break;const n=bt(r.startTime),o={date:n.timeStamp,long_task:{id:$t(),entry_type:"long-task",duration:St(r.duration)},type:"long_task",_dd:{discarded:!1}};t.notify(11,{rawRumEvent:o,startTime:n.relative,domainContext:{performanceEntry:r}})}}))}(u,t);const{addError:L}=Wn(u,t,h);On(u,t);const V=Dt(u,h,a),D=function(t,e,n,r,o){return{get:i=>{const s=n.findView(i),a=o.findUrl(i),c=e.findTrackedSession(i);if(c&&s&&a){const e=r.findActionId(i);return{application_id:t,session_id:c.id,user_action:e?{id:e}:void 0,view:{id:s.id,name:s.name,referrer:a.referrer,url:a.url}}}}}}(t.applicationId,p,S,T,x);return{addAction:k,addError:L,addTiming:E,startView:I,setViewContext:O,setViewContextProperty:M,setViewName:A,lifeCycle:u,viewHistory:S,session:p,stopSession:()=>p.expire(),getInternalContext:D.get,startDurationVital:V.startDurationVital,stopDurationVital:V.stopDurationVital,addDurationVital:V.addDurationVital,stop:()=>{c.forEach((t=>t()))}}}),function(){let t=N;return{start:N,stop:N,onRumStart(e,n){t=()=>function(t){return Uo(t,{errorType:"slim-package"})}(n)},isRecording:()=>!1,getReplayStats:()=>{},getSessionReplayLink:()=>t()}}());!function(t,e,n){const r=t[e];r&&!r.q&&r.version&&s.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),t[e]=n,r&&r.q&&r.q.forEach((t=>u(t,"onReady callback threw an error:")()))}(x(),"DD_RUM",qo);var jo=e.W,Fo=e.L;export{jo as DefaultPrivacyLevel,Fo as datadogRum};