var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{W:()=>Ie,L:()=>Lr});const n={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},o=console,r={};Object.keys(n).forEach((t=>{r[t]=o[t]}));const i="Datadog Browser SDK:",s={debug:r.debug.bind(o,i),log:r.log.bind(o,i),info:r.info.bind(o,i),warn:r.warn.bind(o,i),error:r.error.bind(o,i)},a="https://docs.datadoghq.com",c=`${a}/real_user_monitoring/browser/troubleshooting`;function u(t,e){return(...n)=>{try{return t(...n)}catch(t){s.error(e,t)}}}let d,l=!1;function f(t){l=t}function p(t){return function(){return m(t,this,arguments)}}function m(t,e,n){try{return t.apply(e,n)}catch(t){!function(t){if(g(t),d)try{d(t)}catch(t){g(t)}}(t)}}function g(...t){l&&s.error("[MONITOR]",...t)}function y(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get(){return this},configurable:!0});let t=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof t&&(t="object"==typeof self?self:"object"==typeof window?window:{}),t}const v=/[^\u0000-\u007F]/;function b(t){return v.test(t)?void 0!==window.TextEncoder?(new TextEncoder).encode(t).length:new Blob([t]).size:t.length}function h(t,e){const n=y();let o;return n.Zone&&"function"==typeof n.Zone.__symbol__&&(o=t[n.Zone.__symbol__(e)]),o||(o=t[e]),o}function w(t,e){return h(y(),"setTimeout")(p(t),e)}function S(t){h(y(),"clearTimeout")(t)}function C(t,e){return h(y(),"setInterval")(p(t),e)}function x(t){h(y(),"clearInterval")(t)}function T(t,e,n){const o=!n||void 0===n.leading||n.leading,r=!n||void 0===n.trailing||n.trailing;let i,s,a=!1;return{throttled:(...n)=>{a?i=n:(o?t(...n):i=n,a=!0,s=w((()=>{r&&i&&t(...i),a=!1,i=void 0}),e))},cancel:()=>{S(s),a=!1,i=void 0}}}function k(){}function _(t,e,n){if("object"!=typeof t||null===t)return JSON.stringify(t);const o=E(Object.prototype),r=E(Array.prototype),i=E(Object.getPrototypeOf(t)),s=E(t);try{return JSON.stringify(t,e,n)}catch(t){return"<error: unable to serialize object>"}finally{o(),r(),i(),s()}}function E(t){const e=t,n=e.toJSON;return n?(delete e.toJSON,()=>{e.toJSON=n}):k}function I(t){return Object.assign({},t)}function O(t,e){return Object.keys(t).some((n=>t[n]===e))}function R(t){return 0===Object.keys(t).length}function A(t=2){const e=new Map;let n=!1;function o(o=0){if(n||0===t)return;const r=2===t?3072:16384;let i=o;e.forEach((t=>{i+=t.getBytesCount()})),i>r&&(!function(t){s.warn(`Customer data exceeds the recommended ${t/1024}KiB threshold. More details: ${c}/#customer-data-exceeds-the-recommended-threshold-warning`)}(r),n=!0)}return{createDetachedTracker:()=>{const t=N((()=>o(t.getBytesCount())));return t},getOrCreateTracker:t=>(e.has(t)||e.set(t,N(o)),e.get(t)),setCompressionStatus:e=>{0===t&&(t=e,o())},getCompressionStatus:()=>t,stop:()=>{e.forEach((t=>t.stop())),e.clear()}}}function N(t){let e=0;const{throttled:n,cancel:o}=T((n=>{e=b(_(n)),t()}),200),r=()=>{o(),e=0};return{updateCustomerData:t=>{R(t)?r():n(t)},resetCustomerData:r,getBytesCount:()=>e,stop:()=>{o()}}}function M(t){return null===t?"null":Array.isArray(t)?"array":typeof t}function $(t,e,n=function(){if("undefined"!=typeof WeakSet){const t=new WeakSet;return{hasAlreadyBeenSeen(e){const n=t.has(e);return n||t.add(e),n}}}const t=[];return{hasAlreadyBeenSeen(e){const n=t.indexOf(e)>=0;return n||t.push(e),n}}}()){if(void 0===e)return t;if("object"!=typeof e||null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=e.flags||[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.sticky?"y":"",e.unicode?"u":""].join("");return new RegExp(e.source,t)}if(n.hasAlreadyBeenSeen(e))return;if(Array.isArray(e)){const o=Array.isArray(t)?t:[];for(let t=0;t<e.length;++t)o[t]=$(o[t],e[t],n);return o}const o="object"===M(t)?t:{};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=$(o[t],e[t],n));return o}function P(t){return $(void 0,t)}function L(...t){let e;for(const n of t)null!=n&&(e=$(e,n));return e}function V(t,e=225280){const n=E(Object.prototype),o=E(Array.prototype),r=[],i=new WeakMap,s=j(t,"$",void 0,r,i),a=JSON.stringify(s);let c=a?a.length:0;if(!(c>e)){for(;r.length>0&&c<e;){const n=r.shift();let o=0;if(Array.isArray(n.source))for(let s=0;s<n.source.length;s++){const a=j(n.source[s],n.path,s,r,i);if(c+=void 0!==a?JSON.stringify(a).length:4,c+=o,o=1,c>e){U(e,"truncated",t);break}n.target[s]=a}else for(const s in n.source)if(Object.prototype.hasOwnProperty.call(n.source,s)){const a=j(n.source[s],n.path,s,r,i);if(void 0!==a&&(c+=JSON.stringify(a).length+o+s.length+3,o=1),c>e){U(e,"truncated",t);break}n.target[s]=a}}return n(),o(),s}U(e,"discarded",t)}function j(t,e,n,o,r){const i=function(t){const e=t;if(e&&"function"==typeof e.toJSON)try{return e.toJSON()}catch(t){}return t}(t);if(!i||"object"!=typeof i)return function(t){if("bigint"==typeof t)return`[BigInt] ${t.toString()}`;if("function"==typeof t)return`[Function] ${t.name||"unknown"}`;if("symbol"==typeof t)return`[Symbol] ${t.description||t.toString()}`;return t}(i);const s=D(i);if("[Object]"!==s&&"[Array]"!==s&&"[Error]"!==s)return s;const a=t;if(r.has(a))return`[Reference seen at ${r.get(a)}]`;const c=void 0!==n?`${e}.${n}`:e,u=Array.isArray(i)?[]:{};return r.set(a,c),o.push({source:i,target:u,path:c}),u}function D(t){try{if(t instanceof Event)return{type:(e=t).type,isTrusted:e.isTrusted,currentTarget:e.currentTarget?D(e.currentTarget):null,target:e.target?D(e.target):null};if(t instanceof RegExp)return`[RegExp] ${t.toString()}`;const n=Object.prototype.toString.call(t).match(/\[object (.*)\]/);if(n&&n[1])return`[${n[1]}]`}catch(t){}var e;return"[Unserializable]"}function U(t,e,n){s.warn(`The data provided has been ${e} as it is over the limit of ${t} characters:`,n)}class B{constructor(t){this.onFirstSubscribe=t,this.observers=[]}subscribe(t){return this.observers.push(t),1===this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:()=>{this.observers=this.observers.filter((e=>t!==e)),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}}notify(t){this.observers.forEach((e=>e(t)))}}function q(...t){return new B((e=>{const n=t.map((t=>t.subscribe((t=>e.notify(t)))));return()=>n.forEach((t=>t.unsubscribe()))}))}function F(t){let e={};const n=new B,o={getContext:()=>P(e),setContext:r=>{"object"===M(r)?(e=V(r),null==t||t.updateCustomerData(e)):o.clearContext(),n.notify()},setContextProperty:(o,r)=>{e[o]=V(r),null==t||t.updateCustomerData(e),n.notify()},removeContextProperty:o=>{delete e[o],null==t||t.updateCustomerData(e),n.notify()},clearContext:()=>{e={},null==t||t.resetCustomerData(),n.notify()},changeObservable:n};return o}const z={GRANTED:"granted",NOT_GRANTED:"not-granted"};function H(t,e,n,o,r){return G(t,e,[n],o,r)}function G(t,e,n,o,{once:r,capture:i,passive:s}={}){const a=p((e=>{(e.isTrusted||e.__ddIsTrusted||t.allowUntrustedEvents)&&(r&&l(),o(e))})),c=s?{capture:i,passive:s}:i,u=window.EventTarget&&e instanceof EventTarget?window.EventTarget.prototype:e,d=h(u,"addEventListener");function l(){const t=h(u,"removeEventListener");n.forEach((n=>t.call(e,n,a,c)))}return n.forEach((t=>d.call(e,t,a,c))),{stop:l}}const J=[];function W(t,e,n,o){const r=function(t,e){return`_dd_c_${t}_${e}`}(n,o);function i(){const t=localStorage.getItem(r);return null!==t?JSON.parse(t):{}}J.push(H(t,window,"storage",(({key:t})=>{r===t&&e.setContext(i())}))),e.changeObservable.subscribe((function(){localStorage.setItem(r,JSON.stringify(e.getContext()))})),e.setContext(L(i(),e.getContext()))}function K(){let t="",e=0;return{isAsync:!1,get isEmpty(){return!t},write(n,o){const r=b(n);e+=r,t+=n,o&&o(r)},finish(t){t(this.finishSync())},finishSync(){const n={output:t,outputBytesCount:e,rawBytesCount:e,pendingData:""};return t="",e=0,n},estimateEncodedBytesCount:t=>t.length}}function Y(t){const e=[];let n=rt(t,"stack");const o=String(t);return n&&n.startsWith(o)&&(n=n.slice(o.length)),n&&n.split("\n").forEach((t=>{const n=function(t){const e=Z.exec(t);if(!e)return;const n=e[2]&&0===e[2].indexOf("native"),o=e[2]&&0===e[2].indexOf("eval"),r=Q.exec(e[2]);o&&r&&(e[2]=r[1],e[3]=r[2],e[4]=r[3]);return{args:n?[e[2]]:[],column:e[4]?+e[4]:void 0,func:e[1]||"?",line:e[3]?+e[3]:void 0,url:n?void 0:e[2]}}(t)||function(t){const e=tt.exec(t);if(!e)return;return{args:[],column:e[3]?+e[3]:void 0,func:"?",line:e[2]?+e[2]:void 0,url:e[1]}}(t)||function(t){const e=et.exec(t);if(!e)return;return{args:[],column:e[4]?+e[4]:void 0,func:e[1]||"?",line:+e[3],url:e[2]}}(t)||function(t){const e=nt.exec(t);if(!e)return;const n=e[3]&&e[3].indexOf(" > eval")>-1,o=ot.exec(e[3]);n&&o&&(e[3]=o[1],e[4]=o[2],e[5]=void 0);return{args:e[2]?e[2].split(","):[],column:e[5]?+e[5]:void 0,func:e[1]||"?",line:e[4]?+e[4]:void 0,url:e[3]}}(t);n&&(!n.func&&n.line&&(n.func="?"),e.push(n))})),{message:rt(t,"message"),name:rt(t,"name"),stack:e}}const X="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Z=new RegExp(`^\\s*at (.*?) ?\\(${X}(?::(\\d+))?(?::(\\d+))?\\)?\\s*$`,"i"),Q=new RegExp("\\((\\S*)(?::(\\d+))(?::(\\d+))\\)");const tt=new RegExp(`^\\s*at ?${X}(?::(\\d+))?(?::(\\d+))??\\s*$`,"i");const et=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;const nt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,ot=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function rt(t,e){if("object"!=typeof t||!t||!(e in t))return;const n=t[e];return"string"==typeof n?n:void 0}function it(t,e,n,o){const r=[{url:e,column:o,line:n}],{name:i,message:s}=function(t){let e,n;"[object String]"==={}.toString.call(t)&&([,e,n]=st.exec(t));return{name:e,message:n}}(t);return{name:i,message:s,stack:r}}const st=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function at(){const t=new Error;let e;return m((()=>{const n=Y(t);n.stack=n.stack.slice(2),e=ct(n)})),e}function ct(t){let e=ut(t);return t.stack.forEach((t=>{const n="?"===t.func?"<anonymous>":t.func,o=t.args&&t.args.length>0?`(${t.args.join(", ")})`:"",r=t.line?`:${t.line}`:"",i=t.line&&t.column?`:${t.column}`:"";e+=`\n  at ${n}${o} @ ${t.url}${r}${i}`})),e}function ut(t){return`${t.name||"Error"}: ${t.message}`}function dt(t){return 0!==t&&100*Math.random()<=t}function lt(t,e){return+t.toFixed(e)}function ft(t){return"number"==typeof t}function pt(t){return{relative:t,timeStamp:mt(t)}}function mt(t){const e=yt()-performance.now();return e>kt()?Math.round(Ct(e,t)):function(t){return Math.round(Ct(kt(),t))}(t)}function gt(t){return ft(t)?lt(1e6*t,0):t}function yt(){return(new Date).getTime()}function vt(){return yt()}function bt(){return performance.now()}function ht(){return{relative:bt(),timeStamp:vt()}}function wt(){return{relative:0,timeStamp:kt()}}function St(t,e){return e-t}function Ct(t,e){return t+e}function xt(t){return t-kt()}let Tt;function kt(){return void 0===Tt&&(Tt=performance.timing.navigationStart),Tt}function _t(t){const e=Object.assign({},t);return["id","name","email"].forEach((t=>{t in e&&(e[t]=String(e[t]))})),e}function Et(t,e){e.silentMultipleInit||s.error(`${t} is already initialized.`)}function It(t){return t?(parseInt(t,10)^16*Math.random()>>parseInt(t,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,It)}const Ot=/([\w-]+)\s*=\s*([^;]+)/g;function Rt(t,e){for(Ot.lastIndex=0;;){const n=Ot.exec(t);if(!n)break;if(n[1]===e)return n[2]}}function At(t,e,n=""){const o=t.charCodeAt(e-1),r=o>=55296&&o<=56319?e+1:e;return t.length<=r?t:`${t.slice(0,r)}${n}`}function Nt(t,e,n){function o(n){(function(t){return!e.wasInPageStateDuringPeriod("frozen",t.startClocks.relative,t.duration)})(n)&&t.notify(11,function(t,e){const n={date:t.startClocks.timeStamp,vital:{id:It(),type:t.type,name:t.name,duration:gt(t.duration),description:t.description},type:"vital"};e&&(n._dd={vital:{computed_value:!0}});return{rawRumEvent:n,startTime:t.startClocks.relative,customerContext:t.context,domainContext:{}}}(n,!0))}return{addDurationVital:o,startDurationVital:(t,e={})=>Mt(n,t,e),stopDurationVital:(t,e={})=>{$t(o,n,t,e)}}}function Mt({vitalsByName:t,vitalsByReference:e},n,o={}){const r={name:n,startClocks:ht(),context:o.context,description:o.description},i={__dd_vital_reference:!0};return t.set(n,r),e.set(i,r),i}function $t(t,{vitalsByName:e,vitalsByReference:n},o,r={}){const i="string"==typeof o?e.get(o):n.get(o);i&&(t(function(t,e,n,o){var r;return{name:t.name,type:"duration",startClocks:e,duration:St(e.timeStamp,o.timeStamp),context:L(t.context,n.context),description:null!==(r=n.description)&&void 0!==r?r:t.description}}(i,i.startClocks,r,ht())),"string"==typeof o?e.delete(o):n.delete(o))}function Pt(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}function Lt(){const t=[];return{add:e=>{t.push(e)>500&&t.splice(0,1)},remove:e=>{Pt(t,e)},drain:e=>{t.forEach((t=>t(e))),t.length=0}}}function Vt(t,e,n,{computeHandlingStack:o}={}){let r=t[e];if("function"!=typeof r){if(!(e in t)||!e.startsWith("on"))return{stop:k};r=k}let i=!1;const s=function(){if(i)return r.apply(this,arguments);const t=Array.from(arguments);let e;m(n,null,[{target:this,parameters:t,onPostCall:t=>{e=t},handlingStack:o?at():void 0}]);const s=r.apply(this,t);return e&&m(e,null,[s]),s};return t[e]=s,{stop:()=>{i=!0,t[e]===s&&(t[e]=r)}}}function jt(t){return Dt(t,location.href).href}function Dt(t,e){const n=function(){if(void 0===Bt)try{const t=new Ut("http://test/path");Bt="http://test/path"===t.href}catch(t){Bt=!1}return Bt?Ut:void 0}();if(n)try{return void 0!==e?new n(t,e):new n(t)}catch(n){throw new Error(`Failed to construct URL: ${String(n)} ${_({url:t,base:e})}`)}if(void 0===e&&!/:/.test(t))throw new Error(`Invalid URL: '${t}'`);let o=document;const r=o.createElement("a");if(void 0!==e){o=document.implementation.createHTMLDocument("");const t=o.createElement("base");t.href=e,o.head.appendChild(t),o.body.appendChild(r)}return r.href=t,r}const Ut=URL;let Bt,qt,Ft,zt;function Ht(){return qt||(qt=new B((t=>{if(!window.fetch)return;const{stop:e}=Vt(window,"fetch",(e=>function({parameters:t,onPostCall:e,handlingStack:n},o){const[r,i]=t;let s=i&&i.method;void 0===s&&r instanceof Request&&(s=r.method);const a=void 0!==s?String(s).toUpperCase():"GET",c=r instanceof Request?r.url:jt(String(r)),u=ht(),d={state:"start",init:i,input:r,method:a,startClocks:u,url:c,handlingStack:n};o.notify(d),t[0]=d.input,t[1]=d.init,e((t=>function(t,e,n){const o=n;function r(e){o.state="resolve",Object.assign(o,e),t.notify(o)}e.then(p((t=>{r({response:t,responseType:t.type,status:t.status,isAborted:!1})})),p((t=>{var e,n;r({status:0,isAborted:(null===(n=null===(e=o.init)||void 0===e?void 0:e.signal)||void 0===n?void 0:n.aborted)||t instanceof DOMException&&t.code===DOMException.ABORT_ERR,error:t})})))}(o,t,d)))}(e,t)),{computeHandlingStack:!0});return e}))),qt}function Gt(t,e,n=0,o){const r=new Date;r.setTime(r.getTime()+n);const i=`expires=${r.toUTCString()}`,s=o&&o.crossSite?"none":"strict",a=o&&o.domain?`;domain=${o.domain}`:"",c=o&&o.secure?";secure":"",u=o&&o.partitioned?";partitioned":"";document.cookie=`${t}=${e};${i};path=/;samesite=${s}${a}${c}${u}`}function Jt(t){return Rt(document.cookie,t)}function Wt(t){return Ft||(Ft=function(t){const e=new Map;for(Ot.lastIndex=0;;){const n=Ot.exec(t);if(!n)break;e.set(n[1],n[2])}return e}(document.cookie)),Ft.get(t)}function Kt(t,e){Gt(t,"",0,e)}function Yt(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||Wt("datadog-synthetics-injects-rum"))}let Xt;function Zt(){return null!=Xt?Xt:Xt=function(t=window){var e;const n=t.navigator.userAgent;if(t.chrome||/HeadlessChrome/.test(n))return 0;if(0===(null===(e=t.navigator.vendor)||void 0===e?void 0:e.indexOf("Apple"))||/safari/i.test(n)&&!/chrome|android/i.test(n))return 1;return 2}()}const Qt="cookie",te="local-storage";function ee(t){return Object.values(t)}function ne(t){return Object.entries(t)}const oe=/^([a-zA-Z]+)=([a-z0-9-]+)$/;function re(t,e){const n={isExpired:"1"};return e.trackAnonymousUser&&((null==t?void 0:t.anonymousId)?n.anonymousId=null==t?void 0:t.anonymousId:n.anonymousId=Math.floor(Math.random()*Math.pow(36,10)).toString(36).padStart(10,"0")),n}function ie(t){return R(t)}function se(t){return void 0!==t.isExpired||!((void 0===(e=t).created||yt()-Number(e.created)<144e5)&&(void 0===e.expire||yt()<Number(e.expire)));var e}function ae(t){return ne(t).map((([t,e])=>"anonymousId"===t?`aid=${e}`:`${t}=${e}`)).join("&")}function ce(t){const e={};return function(t){return!!t&&(-1!==t.indexOf("&")||oe.test(t))}(t)&&t.split("&").forEach((t=>{const n=oe.exec(t);if(null!==n){const[,t,o]=n;"aid"===t?e.anonymousId=o:e[t]=o}})),e}function ue(t){const e=function(t){const e={};e.secure=!!t.useSecureSessionCookie||!!t.usePartitionedCrossSiteSessionCookie,e.crossSite=!!t.usePartitionedCrossSiteSessionCookie,e.partitioned=!!t.usePartitionedCrossSiteSessionCookie,t.trackSessionAcrossSubdomains&&(e.domain=function(){if(void 0===zt){const t=`dd_site_test_${It()}`,e="test",n=window.location.hostname.split(".");let o=n.pop();for(;n.length&&!Jt(t);)o=`${n.pop()}.${o}`,Gt(t,e,1e3,{domain:o});Kt(t,{domain:o}),zt=o}return zt}());return e}(t);return function(t){if(void 0===document.cookie||null===document.cookie)return!1;try{const e=`dd_cookie_test_${It()}`,n="test";Gt(e,n,6e4,t);const o=Jt(e)===n;return Kt(e,t),o}catch(t){return s.error(t),!1}}(e)?{type:Qt,cookieOptions:e}:void 0}function de(t,e){var n;return{isLockEnabled:0===Zt(),persistSession:(n=e,t=>{Gt("_dd_s",ae(t),9e5,n)}),retrieveSession:le,expireSession:n=>function(t,e,n){const o=re(e,n);Gt("_dd_s",ae(o),n.trackAnonymousUser?31536e6:144e5,t)}(e,n,t)}}function le(){return ce(Jt("_dd_s"))}function fe(){try{const t=It(),e=`_dd_test_${t}`;localStorage.setItem(e,t);const n=localStorage.getItem(e);return localStorage.removeItem(e),t===n?{type:te}:void 0}catch(t){return}}function pe(t){return{isLockEnabled:!1,persistSession:me,retrieveSession:ge,expireSession:e=>function(t,e){me(re(t,e))}(e,t)}}function me(t){localStorage.setItem("_dd_s",ae(t))}function ge(){return ce(localStorage.getItem("_dd_s"))}const ye=[];let ve;function be(t,e,n=0){var o;const{isLockEnabled:r,persistSession:i,expireSession:s}=e,a=t=>i(Object.assign(Object.assign({},t),{lock:u})),c=()=>{const t=e.retrieveSession(),n=t.lock;return t.lock&&delete t.lock,{session:t,lock:n}};if(ve||(ve=t),t!==ve)return void ye.push(t);if(r&&n>=100)return void we(e);let u,d=c();if(r){if(d.lock)return void he(t,e,n);if(u=It(),a(d.session),d=c(),d.lock!==u)return void he(t,e,n)}let l=t.process(d.session);if(r&&(d=c(),d.lock!==u))he(t,e,n);else{if(l&&(se(l)?s(l):(l.expire=String(yt()+9e5),r?a(l):i(l))),r&&(!l||!se(l))){if(d=c(),d.lock!==u)return void he(t,e,n);i(d.session),l=d.session}null===(o=t.after)||void 0===o||o.call(t,l||d.session),we(e)}}function he(t,e,n){w((()=>{be(t,e,n+1)}),10)}function we(t){ve=void 0;const e=ye.shift();e&&be(e,t)}function Se(t){switch(t.sessionPersistence){case Qt:return ue(t);case te:return fe();case void 0:{let e=ue(t);return e||(e=fe()),e}default:s.error(`Invalid session persistence '${String(t.sessionPersistence)}'`)}}function Ce(t,e,n,o){const r=new B,i=new B,s=new B,a=t.type===Qt?de(e,t.cookieOptions):pe(e),{expireSession:c}=a,u=C((function(){be({process:t=>se(t)?re(t,e):void 0,after:p},a)}),1e3);let d;m();const{throttled:l,cancel:f}=T((()=>{be({process:t=>{if(ie(t))return;const e=p(t);return function(t){if(ie(t))return!1;const{trackingType:e,isTracked:r}=o(t[n]);t[n]=e,delete t.isExpired,r&&!t.id&&(t.id=It(),t.created=String(yt()))}(e),e},after:t=>{ie(t)||g()||function(t){d=t,r.notify()}(t),d=t}},a)}),1e3);function p(t){return se(t)&&(t=re(t,e)),g()&&(!function(t){return d.id!==t.id||d[n]!==t[n]}(t)?(s.notify({previousState:d,newState:t}),d=t):(d=re(d,e),i.notify())),t}function m(){be({process:t=>{if(ie(t))return re(t,e)},after:t=>{d=t}},a)}function g(){return void 0!==d[n]}return{expandOrRenewSession:l,expandSession:function(){be({process:t=>g()?p(t):void 0},a)},getSession:()=>d,renewObservable:r,expireObservable:i,sessionStateUpdateObservable:s,restartSession:m,expire:()=>{f(),c(d),p(re(d,e))},stop:()=>{x(u)},updateSessionState:function(t){be({process:e=>Object.assign(Object.assign({},e),t),after:p},a)}}}const xe="datadoghq.com",Te=["ddsource","ddtags"];function ke(t,e,n){const o=function(t,e){const n=`/api/v2/${e}`,o=t.proxy;if("string"==typeof o){const t=jt(o);return e=>`${t}?ddforward=${encodeURIComponent(`${n}?${e}`)}`}if("function"==typeof o)return t=>o({path:n,parameters:t});const r=function(t,e){const{site:n=xe,internalAnalyticsSubdomain:o}=e;if("logs"===t&&e.usePciIntake&&n===xe)return"pci.browser-intake-datadoghq.com";if(o&&n===xe)return`${o}.${xe}`;if("dd0g-gov.com"===n)return`http-intake.logs.${n}`;const r=n.split("."),i=r.pop();return`browser-intake-${r.join("-")}.${i}`}(e,t);return t=>`https://${r}${n}?${t}`}(t,e);return{build(r,i){const s=function({clientToken:t,internalAnalyticsSubdomain:e},n,o,r,{retry:i,encoding:s}){const a=["sdk_version:6.0.0",`api:${r}`].concat(o);i&&a.push(`retry_count:${i.count}`,`retry_after:${i.lastFailureStatus}`);const c=["ddsource=browser",`ddtags=${encodeURIComponent(a.join(","))}`,`dd-api-key=${t}`,`dd-evp-origin-version=${encodeURIComponent("6.0.0")}`,"dd-evp-origin=browser",`dd-request-id=${It()}`];s&&c.push(`dd-evp-encoding=${s}`);"rum"===n&&c.push(`batch_time=${vt()}`);e&&c.reverse();return c.join("&")}(t,e,n,r,i);return o(s)},urlPrefix:o(""),trackType:e}}function _e(t,e){const n=200-t.length-1;(e.length>n||function(t){if(!function(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch(t){return!1}}())return!1;return new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(t)}(e))&&s.warn(`${t} value doesn't meet tag requirements and will be sanitized. More details: ${a}/getting_started/tagging/#defining-tags`);return`${t}:${e.replace(/,/g,"_")}`}function Ee(t){const e=t.site||xe,n=function(t){const{env:e,service:n,version:o,datacenter:r}=t,i=[];return e&&i.push(_e("env",e)),n&&i.push(_e("service",n)),o&&i.push(_e("version",o)),r&&i.push(_e("datacenter",r)),i}(t),o=function(t,e){return{logsEndpointBuilder:ke(t,"logs",e),rumEndpointBuilder:ke(t,"rum",e),sessionReplayEndpointBuilder:ke(t,"replay",e)}}(t,n),r=function(t,e){if(!t.replica)return;const n=Object.assign(Object.assign({},t),{site:xe,clientToken:t.replica.clientToken}),o={logsEndpointBuilder:ke(n,"logs",e),rumEndpointBuilder:ke(n,"rum",e)};return Object.assign({applicationId:t.replica.applicationId},o)}(t,n);return Object.assign({replica:r,site:e},o)}const Ie={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"},Oe={ALL:"all",SAMPLED:"sampled"};function Re(t,e){return null==t||"string"==typeof t||(s.error(`${e} must be defined as a string`),!1)}function Ae(t,e){return!!(void 0===t||(n=t,ft(n)&&n>=0&&n<=100))||(s.error(`${e} Sample Rate should be a number between 0 and 100`),!1);var n}function Ne(t){var e,n,o,r,i,c;if(t&&t.clientToken){if((!(d=t.site)||"string"!=typeof d||/(datadog|ddog|datad0g|dd0g)/.test(d)||(s.error(`Site should be a valid Datadog site. More details: ${a}/getting_started/site/.`),0))&&Ae(t.sessionSampleRate,"Session")&&Ae(t.telemetrySampleRate,"Telemetry")&&Ae(t.telemetryConfigurationSampleRate,"Telemetry Configuration")&&Ae(t.telemetryUsageSampleRate,"Telemetry Usage")&&Re(t.version,"Version")&&Re(t.env,"Env")&&Re(t.service,"Service")){var d;if(void 0===t.trackingConsent||O(z,t.trackingConsent))return Object.assign({beforeSend:t.beforeSend&&u(t.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:Se(t),sessionSampleRate:null!==(e=t.sessionSampleRate)&&void 0!==e?e:100,telemetrySampleRate:null!==(n=t.telemetrySampleRate)&&void 0!==n?n:20,telemetryConfigurationSampleRate:null!==(o=t.telemetryConfigurationSampleRate)&&void 0!==o?o:5,telemetryUsageSampleRate:null!==(r=t.telemetryUsageSampleRate)&&void 0!==r?r:5,service:t.service||void 0,silentMultipleInit:!!t.silentMultipleInit,allowUntrustedEvents:!!t.allowUntrustedEvents,trackingConsent:null!==(i=t.trackingConsent)&&void 0!==i?i:z.GRANTED,trackAnonymousUser:null===(c=t.trackAnonymousUser)||void 0===c||c,storeContextsAcrossPages:!!t.storeContextsAcrossPages,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},Ee(t));s.error('Tracking Consent should be either "granted" or "not-granted"')}}else s.error("Client Token is not configured, we will not send any data.")}function Me(t){const e=M(t);return"string"===e||"function"===e||t instanceof RegExp}function $e(t){0!==t.status||t.isAborted||(t.traceId=void 0,t.spanId=void 0,t.traceSampled=void 0)}const Pe=["tracecontext","datadog"];function Le(t){var e,n,o,r,i,a;if(!t.applicationId)return void s.error("Application ID is not configured, no RUM data will be collected.");if(!Ae(t.sessionReplaySampleRate,"Session Replay")||!Ae(t.traceSampleRate,"Trace"))return;if(void 0!==t.excludedActivityUrls&&!Array.isArray(t.excludedActivityUrls))return void s.error("Excluded Activity Urls should be an array");const c=function(t){if(void 0===t.allowedTracingUrls)return[];if(!Array.isArray(t.allowedTracingUrls))return void s.error("Allowed Tracing URLs should be an array");if(0!==t.allowedTracingUrls.length&&void 0===t.service)return void s.error("Service needs to be configured when tracing is enabled");const e=[];return t.allowedTracingUrls.forEach((t=>{Me(t)?e.push({match:t,propagatorTypes:Pe}):!function(t){const e=t;return"object"===M(e)&&Me(e.match)&&Array.isArray(e.propagatorTypes)}(t)?s.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",t):e.push(t)})),e}(t);if(!c)return;const u=Ne(t);if(!u)return;const d=null!==(e=t.sessionReplaySampleRate)&&void 0!==e?e:0;return Object.assign({applicationId:t.applicationId,version:t.version||void 0,actionNameAttribute:t.actionNameAttribute,sessionReplaySampleRate:d,startSessionReplayRecordingManually:void 0!==t.startSessionReplayRecordingManually?!!t.startSessionReplayRecordingManually:0===d,traceSampleRate:null!==(n=t.traceSampleRate)&&void 0!==n?n:100,rulePsr:ft(t.traceSampleRate)?t.traceSampleRate/100:void 0,allowedTracingUrls:c,excludedActivityUrls:null!==(o=t.excludedActivityUrls)&&void 0!==o?o:[],workerUrl:t.workerUrl,compressIntakeRequests:!!t.compressIntakeRequests,trackUserInteractions:!(null!==(r=t.trackUserInteractions)&&void 0!==r&&!r),trackViewsManually:!!t.trackViewsManually,trackResources:!(null!==(i=t.trackResources)&&void 0!==i&&!i),trackLongTasks:!(null!==(a=t.trackLongTasks)&&void 0!==a&&!a),subdomain:t.subdomain,defaultPrivacyLevel:O(Ie,t.defaultPrivacyLevel)?t.defaultPrivacyLevel:Ie.MASK,enablePrivacyForActionName:!!t.enablePrivacyForActionName,customerDataTelemetrySampleRate:1,traceContextInjection:O(Oe,t.traceContextInjection)?t.traceContextInjection:Oe.SAMPLED,plugins:t.plugins||[]},u)}function Ve({ignoreInitIfSyntheticsWillInjectRum:t,startDeflateWorker:e},n,o,r,i){const a=Lt();let c,u,d,l;const f=o.observable.subscribe(p);function p(){if(!d||!l||!o.isGranted())return;let t;if(f.unsubscribe(),l.trackViewsManually){if(!c)return;a.remove(c.callback),t=c.options}const e=i(l,u,t);a.drain(e)}const m=t=>{a.add((e=>e.addDurationVital(t)))};return{init(n,r){n?(d=n,t&&Yt()||(function(t,e,n){if(t)for(const o of t){const t=o[e];t&&t(n)}}(n.plugins,"onInit",{initConfiguration:n,publicApi:r}),function(t){if(d=t,l)return void Et("DD_RUM",t);const n=Le(t);n&&(n.sessionStoreStrategyType?n.compressIntakeRequests&&e&&(u=e(n,"Datadog RUM",k),!u)||(l=n,Ht().subscribe(k),o.tryToInit(n.trackingConsent),p()):s.warn("No storage available for session. We will not send any data."))}(n))):s.error("Missing configuration")},get initConfiguration(){return d},getInternalContext:k,stopSession:k,addTiming(t,e=vt()){a.add((n=>n.addTiming(t,e)))},startView(t,e=ht()){const n=n=>{n.startView(t,e)};a.add(n),c||(c={options:t,callback:n},p())},setViewName(t){a.add((e=>e.setViewName(t)))},setViewContext(t){a.add((e=>e.setViewContext(t)))},setViewContextProperty(t,e){a.add((n=>n.setViewContextProperty(t,e)))},addAction(t,e=n()){a.add((n=>n.addAction(t,e)))},addError(t,e=n()){a.add((n=>n.addError(t,e)))},startDurationVital:(t,e)=>Mt(r,t,e),stopDurationVital(t,e){$t(m,r,t,e)},addDurationVital:m}}const je={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function De(){const t=function(){let t;const e=window;if(e.Zone&&(t=h(e,"MutationObserver"),e.MutationObserver&&t===e.MutationObserver)){const n=h(new e.MutationObserver(k),"originalInstance");t=n&&n.constructor}t||(t=e.MutationObserver);return t}();return new B((e=>{if(!t)return;const n=new t(p((()=>e.notify())));return n.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),()=>n.disconnect()}))}const Ue="agent",Be="console",qe="custom",Fe="source",ze="report";function He(t,e,n){let o=0,r=!1;return{isLimitReached(){if(0===o&&w((()=>{o=0}),6e4),o+=1,o<=e||r)return r=!1,!1;if(o===e+1){r=!0;try{n({message:`Reached max number of ${t}s by minute: ${e}`,source:Ue,startClocks:ht()})}finally{r=!1}}return!0}}}function Ge(){var t;const e=window.navigator;return{status:e.onLine?"connected":"not_connected",interfaces:e.connection&&e.connection.type?[e.connection.type]:void 0,effective_type:null===(t=e.connection)||void 0===t?void 0:t.effectiveType}}function Je(){const t=function(){const t=window._DATADOG_SYNTHETICS_PUBLIC_ID||Wt("datadog-synthetics-public-id");return"string"==typeof t?t:void 0}(),e=function(){const t=window._DATADOG_SYNTHETICS_RESULT_ID||Wt("datadog-synthetics-result-id");return"string"==typeof t?t:void 0}();if(t&&e)return{test_id:t,result_id:e,injected:Yt()}}function We(t,e,n){const o=P(t),r=n(o);return ne(e).forEach((([e,n])=>{const r=function(t,e){let n=t;for(const t of e.split(".")){if(!Xe(n,t))return;n=n[t]}return n}(o,e),i=M(r);i===n?Ke(t,e,V(r)):"object"!==n||"undefined"!==i&&"null"!==i||Ke(t,e,{})})),r}function Ke(t,e,n){let o=t;const r=e.split(".");for(let t=0;t<r.length;t+=1){const e=r[t];if(!Ye(o))return;t!==r.length-1?o=o[e]:o[e]=n}}function Ye(t){return"object"===M(t)}function Xe(t,e){return Ye(t)&&Object.prototype.hasOwnProperty.call(t,e)}const Ze={"view.name":"string","view.url":"string","view.referrer":"string"},Qe={context:"object"},tn={service:"string",version:"string"};let en;function nn(t,e,n,o,r,i,a,c,u,d){en={view:Object.assign(Object.assign({},Qe),Ze),error:Object.assign(Object.assign(Object.assign({"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string"},Qe),Ze),tn),resource:Object.assign(Object.assign(Object.assign({"resource.url":"string"},Qe),Ze),tn),action:Object.assign(Object.assign(Object.assign({"action.target.name":"string"},Qe),Ze),tn),long_task:Object.assign(Object.assign({},Qe),Ze),vital:Object.assign(Object.assign({},Qe),Ze)};const l={error:He("error",t.eventRateLimiterThreshold,d),action:He("action",t.eventRateLimiterThreshold,d),vital:He("vital",t.eventRateLimiterThreshold,d)},f=Je();e.subscribe(11,(({startTime:d,rawRumEvent:p,domainContext:m,savedCommonContext:g,customerContext:y})=>{const v=o.findView(d),b=r.findUrl(d),h=n.findTrackedSession(d);if(h&&v&&b){const n=g||u(),o=i.findActionId(d),r=L({_dd:{format_version:2,drift:Math.round(yt()-Ct(kt(),performance.now())),configuration:{session_sample_rate:lt(t.sessionSampleRate,3),session_replay_sample_rate:lt(t.sessionReplaySampleRate,3)},browser_sdk_version:"6.0.0"},application:{id:t.applicationId},date:vt(),service:v.service||t.service,version:v.version||t.version,source:"browser",session:{id:h.id,type:f?"synthetics":c.get()?"ci_test":"user"},view:{id:v.id,name:v.name,url:b.url,referrer:b.referrer},action:(w=p,-1!==["error","resource","long_task"].indexOf(w.type)&&o?{id:o}:void 0),synthetics:f,ci_test:c.get(),display:a.get(),connectivity:Ge()},p);r.context=L(n.context,v.context,y),"has_replay"in r.session||(r.session.has_replay=n.hasReplay),"view"===r.type&&(r.session.sampled_for_replay=1===h.sessionReplay),h.anonymousId&&!n.user.anonymous_id&&t.trackAnonymousUser&&(n.user.anonymous_id=h.anonymousId),R(n.user)||(r.usr=n.user),function(t,e,n,o){var r;if(e){const o=We(t,en[t.type],(t=>e(t,n)));if(!1===o&&"view"!==t.type)return!1;!1===o&&s.warn("Can't dismiss view events using beforeSend!")}return!(null===(r=o[t.type])||void 0===r?void 0:r.isLimitReached())}(r,t.beforeSend,m,l)&&(R(r.context)&&delete r.context,e.notify(12,r))}var w}))}const on=class{constructor(){this.callbacks={}}notify(t,e){const n=this.callbacks[t];n&&n.forEach((t=>t(e)))}subscribe(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),{unsubscribe:()=>{this.callbacks[t]=this.callbacks[t].filter((t=>e!==t))}}}};function rn({expireDelay:t,maxEntries:e}){let n=[];const o=C((()=>function(){const e=bt()-t;for(;n.length>0&&n[n.length-1].endTime<e;)n.pop()}()),6e4);return{add:function(t,o){const r={value:t,startTime:o,endTime:Infinity,remove:()=>{Pt(n,r)},close:t=>{r.endTime=t}};return e&&n.length>=e&&n.pop(),n.unshift(r),r},find:function(t=Infinity,e={returnInactive:!1}){for(const o of n)if(o.startTime<=t){if(e.returnInactive||t<=o.endTime)return o.value;break}},closeActive:function(t){const e=n[0];e&&Infinity===e.endTime&&e.close(t)},findAll:function(t=Infinity,e=0){const o=Ct(t,e);return n.filter((e=>e.startTime<=o&&t<=e.endTime)).map((t=>t.value))},reset:function(){n=[]},stop:function(){x(o)}}}let sn;const an=new WeakMap;function cn(t){return sn||(sn=function(t){return new B((e=>{const{stop:n}=Vt(XMLHttpRequest.prototype,"open",un),{stop:o}=Vt(XMLHttpRequest.prototype,"send",(n=>{!function({target:t,handlingStack:e},n,o){const r=an.get(t);if(!r)return;const i=r;i.state="start",i.startClocks=ht(),i.isAborted=!1,i.xhr=t,i.handlingStack=e;let s=!1;const{stop:a}=Vt(t,"onreadystatechange",(()=>{t.readyState===XMLHttpRequest.DONE&&c()})),c=()=>{if(u(),a(),s)return;s=!0;const e=r;e.state="complete",e.duration=St(i.startClocks.timeStamp,vt()),e.status=t.status,o.notify(I(e))},{stop:u}=H(n,t,"loadend",c);o.notify(i)}(n,t,e)}),{computeHandlingStack:!0}),{stop:r}=Vt(XMLHttpRequest.prototype,"abort",dn);return()=>{n(),o(),r()}}))}(t)),sn}function un({target:t,parameters:[e,n]}){an.set(t,{state:"open",method:String(e).toUpperCase(),url:jt(String(n))})}function dn({target:t}){const e=an.get(t);e&&(e.isAborted=!0)}const ln=[["document",t=>"initial_document"===t],["xhr",t=>"xmlhttprequest"===t],["fetch",t=>"fetch"===t],["beacon",t=>"beacon"===t],["css",(t,e)=>/\.css$/i.test(e)],["js",(t,e)=>/\.js$/i.test(e)],["image",(t,e)=>["image","img","icon"].includes(t)||null!==/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(e)],["font",(t,e)=>null!==/\.(woff|eot|woff2|ttf)$/i.exec(e)],["media",(t,e)=>["audio","video"].includes(t)||null!==/\.(mp3|mp4)$/i.exec(e)]];function fn(t){const e=t.name;if(!function(t){try{return!!Dt(t)}catch(t){return!1}}(e))return"other";const n=function(t){const e=Dt(t).pathname;return"/"===e[0]?e:`/${e}`}(e);for(const[e,o]of ln)if(o(t.initiatorType,n))return e;return"other"}function pn(...t){for(let e=1;e<t.length;e+=1)if(t[e-1]>t[e])return!1;return!0}function mn(t){return"xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType}function gn(t){const{duration:e,startTime:n,responseEnd:o}=t;return gt(0===e&&n<o?St(n,o):e)}function yn(t){if(!bn(t))return;const{startTime:e,fetchStart:n,workerStart:o,redirectStart:r,redirectEnd:i,domainLookupStart:s,domainLookupEnd:a,connectStart:c,secureConnectionStart:u,connectEnd:d,requestStart:l,responseStart:f,responseEnd:p}=t,m={download:hn(e,f,p),first_byte:hn(e,l,f)};return 0<o&&o<n&&(m.worker=hn(e,o,n)),n<d&&(m.connect=hn(e,c,d),c<=u&&u<=d&&(m.ssl=hn(e,u,d))),n<a&&(m.dns=hn(e,s,a)),e<i&&(m.redirect=hn(e,r,i)),m}function vn(t){return t.duration>=0}function bn(t){const e=pn(t.startTime,t.fetchStart,t.domainLookupStart,t.domainLookupEnd,t.connectStart,t.connectEnd,t.requestStart,t.responseStart,t.responseEnd),n=!function(t){return t.redirectEnd>t.startTime}(t)||pn(t.startTime,t.redirectStart,t.redirectEnd,t.fetchStart);return e&&n}function hn(t,e,n){if(t<=e&&e<=n)return{duration:gt(St(e,n)),start:gt(St(t,e))}}function wn(t){return""===t.nextHopProtocol?void 0:t.nextHopProtocol}function Sn(t){return""===t.deliveryType?"other":t.deliveryType}function Cn(t){if(t.startTime<t.responseStart){const{encodedBodySize:e,decodedBodySize:n,transferSize:o}=t;return{size:n,encoded_body_size:e,decoded_body_size:n,transfer_size:o}}return{size:void 0,encoded_body_size:void 0,decoded_body_size:void 0,transfer_size:void 0}}function xn(t){return t&&!function(t){return Te.every((e=>t.includes(e)))}(t)}const Tn=/data:(.+)?(;base64)?,/g;function kn(t){return!(t.length<=24e3)&&("data:"===t.substring(0,5)&&(t=t.substring(0,24e3),!0))}function _n(t){return`${t.match(Tn)[0]}[...]`}let En=1;function In(t,e,n){const o={clearTracingIfNeeded:$e,traceFetch:t=>{},traceXhr:(t,e)=>{}};!function(t,e,n){const o=cn(e).subscribe((e=>{const o=e;if(xn(o.url))switch(o.state){case"start":n.traceXhr(o,o.xhr),o.requestIndex=On(),t.notify(6,{requestIndex:o.requestIndex,url:o.url});break;case"complete":n.clearTracingIfNeeded(o),t.notify(7,{duration:o.duration,method:o.method,requestIndex:o.requestIndex,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"xhr",url:o.url,xhr:o.xhr,isAborted:o.isAborted,handlingStack:o.handlingStack})}}))}(t,e,o),function(t,e){const n=Ht().subscribe((n=>{const o=n;if(xn(o.url))switch(o.state){case"start":e.traceFetch(o),o.requestIndex=On(),t.notify(6,{requestIndex:o.requestIndex,url:o.url});break;case"resolve":!function(t,e){const n=t.response&&function(t){try{return t.clone()}catch(t){return}}(t.response);n&&n.body?function(t,e,n){const o=t.getReader(),r=[];let i=0;function s(){let t,s;if(o.cancel().catch(k),n.collectStreamBody){let e;if(1===r.length)e=r[0];else{e=new Uint8Array(i);let t=0;r.forEach((n=>{e.set(n,t),t+=n.length}))}t=e.slice(0,n.bytesLimit),s=e.length>n.bytesLimit}e(void 0,t,s)}!function t(){o.read().then(p((e=>{e.done?s():(n.collectStreamBody&&r.push(e.value),i+=e.value.length,i>n.bytesLimit?s():t())})),p((t=>e(t))))}()}(n.body,(()=>{e(St(t.startClocks.timeStamp,vt()))}),{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1}):e(St(t.startClocks.timeStamp,vt()))}(o,(n=>{e.clearTracingIfNeeded(o),t.notify(7,{duration:n,method:o.method,requestIndex:o.requestIndex,responseType:o.responseType,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"fetch",url:o.url,response:o.response,init:o.init,input:o.input,isAborted:o.isAborted,handlingStack:o.handlingStack})}))}}))}(t,o)}function On(){const t=En;return En+=1,t}function Rn(t){return ft(t)&&t<0?void 0:t}function An(t,e){const n=Nn(t)?{action:{id:t.id,loading_time:Rn(gt(t.duration)),frustration:{type:t.frustrationTypes},error:{count:t.counts.errorCount},long_task:{count:t.counts.longTaskCount},resource:{count:t.counts.resourceCount}},_dd:{action:{target:t.target,position:t.position,name_source:void 0}}}:void 0,o=Nn(t)?void 0:t.context,r=L({action:{id:It(),target:{name:t.name},type:t.type},date:t.startClocks.timeStamp,type:"action",view:{in_foreground:e.wasInPageStateAt("active",t.startClocks.relative)}},n),i=Nn(t)?{events:t.events}:{};return!Nn(t)&&t.handlingStack&&(i.handlingStack=t.handlingStack),{customerContext:o,rawRumEvent:r,startTime:t.startClocks.relative,domainContext:i}}function Nn(t){return"custom"!==t.type}function Mn({stackTrace:t,originalError:e,handlingStack:n,startClocks:o,nonErrorPrefix:r,source:i,handling:s}){const a=Pn(e),c=function(t,e,n,o){return(null==t?void 0:t.message)&&(null==t?void 0:t.name)?t.message:e?"Empty message":`${n} ${_(V(o))}`}(t,a,r,e),u=function(t,e){if(void 0===e)return!1;if(t)return!0;return e.stack.length>0&&(e.stack.length>1||void 0!==e.stack[0].url)}(a,t)?ct(t):"No stack, consider using an instance of Error",d=a?Ln(e,i):void 0;return{startClocks:o,source:i,handling:s,handlingStack:n,originalError:e,type:t?t.name:void 0,message:c,stack:u,causes:d,fingerprint:$n(e)}}function $n(t){return Pn(t)&&"dd_fingerprint"in t?String(t.dd_fingerprint):void 0}function Pn(t){return t instanceof Error||"[object Error]"===Object.prototype.toString.call(t)}function Ln(t,e){let n=t;const o=[];for(;Pn(null==n?void 0:n.cause)&&o.length<10;){const t=Y(n.cause);o.push({message:n.cause.message,source:e,type:null==t?void 0:t.name,stack:t&&ct(t)}),n=n.cause}return o.length?o:void 0}function Vn(t){const e=(e,n)=>{const o=Mn({stackTrace:e,originalError:n,startClocks:ht(),nonErrorPrefix:"Uncaught",source:Fe,handling:"unhandled"});t.notify(o)},{stop:n}=(o=e,Vt(window,"onerror",(({parameters:[t,e,n,r,i]})=>{let s;s=Pn(i)?Y(i):it(t,e,n,r),o(s,null!=i?i:t)})));var o;const{stop:r}=function(t){return Vt(window,"onunhandledrejection",(({parameters:[e]})=>{const n=e.reason||"Empty reason",o=Y(n);t(o,n)}))}(e);return{stop:()=>{n(),r()}}}let jn={};function Dn(t){return q(...t.map((t=>(jn[t]||(jn[t]=function(t){return new B((e=>{const r=o[t];return o[t]=(...o)=>{r.apply(console,o);const i=at();m((()=>{e.notify(function(t,e,o){const r=t.map((t=>function(t){if("string"==typeof t)return V(t);if(Pn(t))return ut(Y(t));return _(V(t),void 0,2)}(t))).join(" ");let i;if(e===n.error){const e=t.find(Pn);i={stack:e?ct(Y(e)):void 0,fingerprint:$n(e),causes:e?Ln(e,"console"):void 0,startClocks:ht(),message:r,source:Be,handling:"handled",handlingStack:o}}return{api:e,message:r,error:i,handlingStack:o}}(o,t,i))}))},()=>{o[t]=r}}))}(t)),jn[t]))))}const Un="intervention",Bn="csp_violation";function qn(t,e){const n=[];e.includes(Bn)&&n.push(function(t){return new B((e=>{const{stop:n}=H(t,document,"securitypolicyviolation",(t=>{e.notify(function(t){const e=`'${t.blockedURI}' blocked by '${t.effectiveDirective}' directive`;return Fn({type:t.effectiveDirective,message:`${Bn}: ${e}`,originalError:t,csp:{disposition:t.disposition},stack:zn(t.effectiveDirective,t.originalPolicy?`${e} of the policy "${At(t.originalPolicy,100,"...")}"`:"no policy",t.sourceFile,t.lineNumber,t.columnNumber)})}(t))}));return n}))}(t));const o=e.filter((t=>t!==Bn));return o.length&&n.push(function(t){return new B((e=>{if(!window.ReportingObserver)return;const n=p(((t,n)=>t.forEach((t=>e.notify(function(t){const{type:e,body:n}=t;return Fn({type:n.id,message:`${e}: ${n.message}`,originalError:t,stack:zn(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}(t)))))),o=new window.ReportingObserver(n,{types:t,buffered:!0});return o.observe(),()=>{o.disconnect()}}))}(o)),q(...n)}function Fn(t){return Object.assign({startClocks:ht(),source:ze,handling:"unhandled"},t)}function zn(t,e,n,o,r){return n?ct({name:t,message:e,stack:[{func:"?",url:n,line:null!=o?o:void 0,column:null!=r?r:void 0}]}):void 0}function Hn(t,e,o,r){const i=new B;return function(t){const e=Dn([n.error]).subscribe((e=>t.notify(e.error)))}(i),Vn(i),function(t,e){const n=qn(t,[Bn,Un]).subscribe((t=>e.notify(t)))}(e,i),i.subscribe((e=>t.notify(13,{error:e}))),function(t,e,n){return t.subscribe(13,(({error:n,customerContext:o,savedCommonContext:r})=>{t.notify(11,Object.assign({customerContext:o,savedCommonContext:r},function(t,e,n){const o={date:t.startClocks.timeStamp,error:{id:It(),message:t.message,source:t.source,stack:t.stack,handling_stack:t.handlingStack,type:t.type,handling:t.handling,causes:t.causes,source_type:"browser",fingerprint:t.fingerprint,csp:t.csp},type:"error",view:{in_foreground:e.wasInPageStateAt("active",t.startClocks.relative)}},r={error:t.originalError,handlingStack:t.handlingStack};return{rawRumEvent:o,startTime:t.startClocks.relative,domainContext:r}}(n,e)))})),{addError:({error:e,handlingStack:n,startClocks:o,context:r},i)=>{const s=Mn({stackTrace:Pn(e)?Y(e):void 0,originalError:e,handlingStack:n,startClocks:o,nonErrorPrefix:"Provided",source:qe,handling:"handled"});t.notify(13,{customerContext:r,savedCommonContext:i,error:s})}}}(t,o)}function Gn(t,e){if(window.requestIdleCallback&&window.cancelIdleCallback){const n=window.requestIdleCallback(p(t),e);return()=>window.cancelIdleCallback(n)}return function(t){const e=yt(),n=w((()=>{t({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(yt()-e))})}),0);return()=>S(n)}(t)}function Jn(t,e){const n=yt();let o=!1;const{stop:r}=G(t,window,["click","mousedown","keydown","touchstart","pointerdown"],(e=>{if(!e.cancelable)return;const n={entryType:"first-input",processingStart:bt(),processingEnd:bt(),startTime:e.timeStamp,duration:0,name:"",cancelable:!1,target:null,toJSON:()=>({})};"pointerdown"===e.type?function(t,e){G(t,window,["pointerup","pointercancel"],(t=>{"pointerup"===t.type&&i(e)}),{once:!0})}(t,n):i(n)}),{passive:!0,capture:!0});return{stop:r};function i(t){if(!o){o=!0,r();const i=t.processingStart-t.startTime;i>=0&&i<yt()-n&&e(t)}}}var Wn;function Kn(t,e){return new B((n=>{if(!window.PerformanceObserver)return;const o=t=>{const e=function(t){return t.filter((t=>!function(t){return!(t.entryType!==Wn.RESOURCE||xn(t.name)&&vn(t))}(t)))}(t);e.length>0&&n.notify(e)};let r,i=!0;const s=new PerformanceObserver(p((t=>{i?r=w((()=>o(t.getEntries()))):o(t.getEntries())})));try{s.observe(e)}catch(t){if([Wn.RESOURCE,Wn.NAVIGATION,Wn.LONG_TASK,Wn.PAINT].includes(e.type)){e.buffered&&(r=w((()=>o(performance.getEntriesByType(e.type)))));try{s.observe({entryTypes:[e.type]})}catch(t){return}}}let a;return i=!1,function(t){!Yn&&void 0!==window.performance&&"getEntries"in performance&&"addEventListener"in performance&&(Yn=H(t,performance,"resourcetimingbufferfull",(()=>{performance.clearResourceTimings()})))}(t),Zn(Wn.FIRST_INPUT)||e.type!==Wn.FIRST_INPUT||({stop:a}=Jn(t,(t=>{o([t])}))),()=>{s.disconnect(),a&&a(),S(r)}}))}let Yn,Xn;function Zn(t){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(t)}function Qn(){return to(63)}function to(t){return Xn||(Xn=eo),Xn(t)}function eo(t){const e=(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(2));return 63===t&&(e[e.length-1]>>>=1),{toString(t=10){let n=e[1],o=e[0],r="";do{const e=n%t*4294967296+o;n=Math.floor(n/t),o=Math.floor(e/t),r=(e%t).toString(t)+r}while(n||o);return r}}}!function(t){t.EVENT="event",t.FIRST_INPUT="first-input",t.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",t.LAYOUT_SHIFT="layout-shift",t.LONG_TASK="longtask",t.LONG_ANIMATION_FRAME="long-animation-frame",t.NAVIGATION="navigation",t.PAINT="paint",t.RESOURCE="resource"}(Wn||(Wn={}));const no=new WeakSet;function oo(t){if(!performance||!("getEntriesByName"in performance))return;const e=performance.getEntriesByName(t.url,"resource");if(!e.length||!("toJSON"in e[0]))return;const n=e.filter((t=>!no.has(t))).filter((t=>vn(t)&&bn(t))).filter((e=>function(t,e,n){const o=1;return t.startTime>=e-o&&ro(t)<=Ct(n,o)}(e,t.startClocks.relative,ro({startTime:t.startClocks.relative,duration:t.duration}))));return 1===n.length?(no.add(n[0]),n[0].toJSON()):void 0}function ro(t){return Ct(t.startTime,t.duration)}function io(t,e,n){if(document.readyState===e||"complete"===document.readyState)return n(),{stop:k};return H(t,window,"complete"===e?"load":"DOMContentLoaded",n,{once:!0})}function so(t){return t.nodeType===Node.TEXT_NODE}function ao(t){return t.nodeType===Node.ELEMENT_NODE}function co(t){const e=function(t){const e=t.querySelector("meta[name=dd-trace-id]"),n=t.querySelector("meta[name=dd-trace-time]");return uo(e&&e.content,n&&n.content)}(t)||function(t){const e=function(t){for(let e=0;e<t.childNodes.length;e+=1){const n=lo(t.childNodes[e]);if(n)return n}if(t.body)for(let e=t.body.childNodes.length-1;e>=0;e-=1){const n=t.body.childNodes[e],o=lo(n);if(o)return o;if(!so(n))break}}(t);if(!e)return;return uo(Rt(e,"trace-id"),Rt(e,"trace-time"))}(t);if(e&&!(e.traceTime<=yt()-12e4))return e.traceId}function uo(t,e){const n=e&&Number(e);if(t&&n)return{traceId:t,traceTime:n}}function lo(t){if(t&&function(t){return t.nodeType===Node.COMMENT_NODE}(t)){const e=/^\s*DATADOG;(.*?)\s*$/.exec(t.data);if(e)return e[1]}}function fo(){if(Zn(Wn.NAVIGATION)){const t=performance.getEntriesByType(Wn.NAVIGATION)[0];if(t)return t}const t=function(){const t={},e=performance.timing;for(const n in e)if(ft(e[n])){const o=n,r=e[o];t[o]=0===r?0:xt(r)}return t}(),e=Object.assign({entryType:Wn.NAVIGATION,initiatorType:"navigation",name:window.location.href,startTime:0,duration:t.responseEnd,decodedBodySize:0,encodedBodySize:0,transferSize:0,workerStart:0,toJSON:()=>Object.assign(Object.assign({},e),{toJSON:void 0})},t);return e}function po(t,e){io(t,"interactive",(()=>{const t=Object.assign(fo().toJSON(),{entryType:Wn.RESOURCE,initiatorType:"initial_document",traceId:co(document),toJSON:()=>Object.assign(Object.assign({},t),{toJSON:void 0})});e(t)}))}function mo(t,e,n,o=function(){const t=[];function e(e){let o;if(e.didTimeout){const t=performance.now();o=()=>30-(performance.now()-t)}else o=e.timeRemaining.bind(e);for(;o()>0&&t.length;)t.shift()();t.length&&n()}function n(){Gn(e,{timeout:1e3})}return{push(e){1===t.push(e)&&n()}}}(),r=po){t.subscribe(7,(t=>{s((()=>function(t,e,n){const o=oo(t),r=o?pt(o.startTime):t.startClocks,i=function(t,e){if(!(t.traceSampled&&t.traceId&&t.spanId))return;return{_dd:{span_id:t.spanId.toString(),trace_id:t.traceId.toString(),rule_psr:e.rulePsr}}}(t,e);if(!e.trackResources&&!i)return;const s="xhr"===t.type?"xhr":"fetch",a=o?yo(o):void 0,c=function(t,e,n){return t.wasInPageStateDuringPeriod("frozen",e.relative,n)?void 0:gt(n)}(n,r,t.duration),u=L({date:r.timeStamp,resource:{id:It(),type:s,duration:c,method:t.method,status_code:t.status,protocol:o&&wn(o),url:kn(t.url)?_n(t.url):t.url,delivery_type:o&&Sn(o)},type:"resource",_dd:{discarded:!e.trackResources}},i,a);return{startTime:r.relative,rawRumEvent:u,domainContext:{performanceEntry:o,xhr:t.xhr,response:t.response,requestInput:t.input,requestInit:t.init,error:t.error,isAborted:t.isAborted,handlingStack:t.handlingStack}}}(t,e,n)))}));const i=Kn(e,{type:Wn.RESOURCE,buffered:!0}).subscribe((t=>{for(const n of t)mn(n)||s((()=>go(n,e)))}));function s(e){o.push((()=>{const n=e();n&&t.notify(11,n)}))}return r(e,(t=>{s((()=>go(t,e)))})),{stop:()=>{i.unsubscribe()}}}function go(t,e){const n=pt(t.startTime),o=function(t,e){if(!t.traceId)return;return{_dd:{trace_id:t.traceId,span_id:Qn().toString(),rule_psr:e.rulePsr}}}(t,e);if(!e.trackResources&&!o)return;const r=fn(t),i=yo(t),s=L({date:n.timeStamp,resource:{id:It(),type:r,url:t.name,status_code:(a=t.responseStatus,0===a?void 0:a),protocol:wn(t),delivery_type:Sn(t)},type:"resource",_dd:{discarded:!e.trackResources}},o,i);var a;return{startTime:n.relative,rawRumEvent:s,domainContext:{performanceEntry:t}}}function yo(t){const{renderBlockingStatus:e}=t;return{resource:Object.assign(Object.assign({duration:gn(t),render_blocking_status:e},Cn(t)),yn(t))}}function vo(t,e,n){const{stop:o,eventCounts:r}=function({lifeCycle:t,isChildEvent:e,onChange:n=k}){const o={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},r=t.subscribe(12,(t=>{var r;if("view"!==t.type&&"vital"!==t.type&&e(t))switch(t.type){case"error":o.errorCount+=1,n();break;case"action":o.actionCount+=1,t.action.frustration&&(o.frustrationCount+=t.action.frustration.type.length),n();break;case"long_task":o.longTaskCount+=1,n();break;case"resource":(null===(r=t._dd)||void 0===r?void 0:r.discarded)||(o.resourceCount+=1,n())}}));return{stop:()=>{r.unsubscribe()},eventCounts:o}}({lifeCycle:t,isChildEvent:t=>t.view.id===e,onChange:n});return{stop:o,eventCounts:r}}Ie.ALLOW,Ie.MASK,Ie.MASK_USER_INPUT;const bo=["data-dd-action-name","data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],ho=[xo,function(t){if(t.id&&!Co(t.id))return`#${CSS.escape(t.id)}`}],wo=[xo,function(t){if("BODY"===t.tagName)return;const e=t.classList;for(let n=0;n<e.length;n+=1){const o=e[n];if(!Co(o))return`${CSS.escape(t.tagName)}.${CSS.escape(o)}`}},function(t){return CSS.escape(t.tagName)}];function So(t,e){if(!function(t){if("isConnected"in t)return t.isConnected;return t.ownerDocument.documentElement.contains(t)}(t))return;let n,o=t;for(;o&&"HTML"!==o.nodeName;){const t=ko(o,ho,_o,e,n);if(t)return t;n=ko(o,wo,Eo,e,n)||Io(To(o),n),o=o.parentElement}return n}function Co(t){return/[0-9]/.test(t)}function xo(t,e){if(e){const t=n(e);if(t)return t}for(const t of bo){const e=n(t);if(e)return e}function n(e){if(t.hasAttribute(e))return`${CSS.escape(t.tagName)}[${e}="${CSS.escape(t.getAttribute(e))}"]`}}function To(t){let e=t.parentElement.firstElementChild,n=1;for(;e&&e!==t;)e.tagName===t.tagName&&(n+=1),e=e.nextElementSibling;return`${CSS.escape(t.tagName)}:nth-of-type(${n})`}function ko(t,e,n,o,r){for(const i of e){const e=i(t,o);if(e&&n(t,e,r))return Io(e,r)}}function _o(t,e,n){return 1===t.ownerDocument.querySelectorAll(Io(e,n)).length}function Eo(t,e,n){let o;if(void 0===n)o=t=>t.matches(e);else{const t=function(){if(void 0===Oo)try{document.querySelector(":scope"),Oo=!0}catch(t){Oo=!1}return Oo}()?Io(`${e}:scope`,n):Io(e,n);o=e=>null!==e.querySelector(t)}let r=t.parentElement.firstElementChild;for(;r;){if(r!==t&&o(r))return!1;r=r.nextElementSibling}return!0}function Io(t,e){return e?`${t}>${e}`:t}let Oo;function Ro(t,e,n=fo){return function(t,e){let n;const{stop:o}=io(t,"complete",(()=>{n=w((()=>e()))}));return{stop:()=>{o(),S(n)}}}(t,(()=>{const t=n();(function(t){return t.loadEventEnd<=0})(t)||e(function(t){return{domComplete:t.domComplete,domContentLoaded:t.domContentLoadedEventEnd,domInteractive:t.domInteractive,loadEvent:t.loadEventEnd,firstByte:t.responseStart>=0&&t.responseStart<=bt()?t.responseStart:void 0}}(t))}))}function Ao(t,e=window){let n,o;return"hidden"===document.visibilityState?n=0:(n=1/0,({stop:o}=G(t,e,["pagehide","visibilitychange"],(t=>{"pagehide"!==t.type&&"hidden"!==document.visibilityState||(n=t.timeStamp,o())}),{capture:!0}))),{get timeStamp(){return n},stop(){null==o||o()}}}function No(t,e,n){const o={},{stop:r}=Ro(t,(t=>{e(t.loadEvent),o.navigationTimings=t,n()})),i=Ao(t),{stop:s}=function(t,e,n){return{stop:Kn(t,{type:Wn.PAINT,buffered:!0}).subscribe((t=>{const o=t.find((t=>"first-contentful-paint"===t.name&&t.startTime<e.timeStamp&&t.startTime<6e5));o&&n(o.startTime)})).unsubscribe}}(t,i,(t=>{o.firstContentfulPaint=t,n()})),{stop:a}=function(t,e,n,o){let r=1/0;const{stop:i}=G(t,n,["pointerdown","keydown"],(t=>{r=t.timeStamp}),{capture:!0,once:!0});let s=0;const a=Kn(t,{type:Wn.LARGEST_CONTENTFUL_PAINT,buffered:!0}).subscribe((n=>{const i=function(t,e){for(let n=t.length-1;n>=0;n-=1){const o=t[n];if(e(o,n,t))return o}}(n,(t=>t.entryType===Wn.LARGEST_CONTENTFUL_PAINT&&t.startTime<r&&t.startTime<e.timeStamp&&t.startTime<6e5&&t.size>s));if(i){let e;i.element&&(e=So(i.element,t.actionNameAttribute)),o({value:i.startTime,targetSelector:e}),s=i.size}}));return{stop:()=>{i(),a.unsubscribe()}}}(t,i,window,(t=>{o.largestContentfulPaint=t,n()})),{stop:c}=function(t,e,n){const o=Kn(t,{type:Wn.FIRST_INPUT,buffered:!0}).subscribe((o=>{const r=o.find((t=>t.startTime<e.timeStamp));if(r){const e=St(r.startTime,r.processingStart);let o;r.target&&ao(r.target)&&(o=So(r.target,t.actionNameAttribute)),n({delay:e>=0?e:0,time:r.startTime,targetSelector:o})}}));return{stop:()=>{o.unsubscribe()}}}(t,i,(t=>{o.firstInput=t,n()}));return{stop:function(){r(),s(),a(),c(),i.stop()},initialViewMetrics:o}}function Mo(t,e,n){if(!Po())return{stop:k};let o,r,i=0;n({value:0});const s=function(){let t,e,n=0,o=0;return{update:r=>{let i;return void 0===t||r.startTime-e>=1e3||r.startTime-t>=5e3?(t=e=r.startTime,o=n=r.value,i=!0):(n+=r.value,e=r.startTime,i=r.value>o,i&&(o=r.value)),{cumulatedValue:n,isMaxValue:i}}}}(),a=Kn(t,{type:Wn.LAYOUT_SHIFT,buffered:!0}).subscribe((a=>{for(const c of a){if(c.hadRecentInput||c.startTime<e)continue;const{cumulatedValue:a,isMaxValue:u}=s.update(c);if(u){const t=$o(c.sources);o=t?new WeakRef(t):void 0,r=St(e,c.startTime)}if(a>i){i=a;const e=null==o?void 0:o.deref();n({value:lt(i,4),targetSelector:e&&So(e,t.actionNameAttribute),time:r})}}}));return{stop:()=>{a.unsubscribe()}}}function $o(t){var e;if(t)return null===(e=t.find((t=>!!t.node&&ao(t.node))))||void 0===e?void 0:e.node}function Po(){return Zn(Wn.LAYOUT_SHIFT)&&"WeakRef"in window}const Lo=new Map;let Vo,jo=0,Do=1/0,Uo=0;const Bo=()=>Vo?jo:window.performance.interactionCount||0;function qo(t,e,n){if(!(Zn(Wn.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return{getInteractionToNextPaint:()=>{},setViewEnd:k,stop:k};const{getViewInteractionCount:o,stopViewInteractionCount:r}=function(t){"interactionCount"in performance||Vo||(Vo=new window.PerformanceObserver(p((t=>{t.getEntries().forEach((t=>{const e=t;e.interactionId&&(Do=Math.min(Do,e.interactionId),Uo=Math.max(Uo,e.interactionId),jo=(Uo-Do)/7+1)}))}))),Vo.observe({type:"event",buffered:!0,durationThreshold:0}));const e="initial_load"===t?0:Bo();let n={stopped:!1};function o(){return Bo()-e}return{getViewInteractionCount:()=>n.stopped?n.interactionCount:o(),stopViewInteractionCount:()=>{n={stopped:!0,interactionCount:o()}}}}(n);let i=1/0;const s=function(t){const e=[];function n(){e.sort(((t,e)=>e.duration-t.duration)).splice(10)}return{process(t){const o=e.findIndex((e=>t.interactionId===e.interactionId)),r=e[e.length-1];-1!==o?t.duration>e[o].duration&&(e[o]=t,n()):(e.length<10||t.duration>r.duration)&&(e.push(t),n())},estimateP98Interaction(){const n=Math.min(e.length-1,Math.floor(t()/50));return e[n]}}}(o);let a,c,u=-1;function d(n){for(const t of n)t.interactionId&&t.startTime>=e&&t.startTime<=i&&s.process(t);const o=s.estimateP98Interaction();o&&o.duration!==u&&(u=o.duration,c=St(e,o.startTime),a=function(t){const e=Lo.get(t);return Lo.delete(t),e}(o.startTime),!a&&o.target&&ao(o.target)&&(a=So(o.target,t.actionNameAttribute)))}const l=Kn(t,{type:Wn.FIRST_INPUT,buffered:!0}).subscribe(d),f=Kn(t,{type:Wn.EVENT,durationThreshold:40,buffered:!0}).subscribe(d);return{getInteractionToNextPaint:()=>u>=0?{value:Math.min(u,6e4),targetSelector:a,time:c}:o()?{value:0}:void 0,setViewEnd:t=>{i=t,r()},stop:()=>{f.unsubscribe(),l.unsubscribe()}}}function Fo(t,e,n,o,r,i){return function(t,e,n){let o,r=!1;const i=w(p((()=>u({hadActivity:!1}))),100),s=void 0!==n?w(p((()=>u({hadActivity:!0,end:vt()}))),n):void 0,a=t.subscribe((({isBusy:t})=>{S(i),S(o);const e=vt();t||(o=w(p((()=>u({hadActivity:!0,end:e}))),100))})),c=()=>{r=!0,S(i),S(o),S(s),a.unsubscribe()};function u(t){r||(c(),e(t))}return{stop:c}}(function(t,e,n,o){return new B((r=>{const i=[];let s,a=0;return i.push(e.subscribe(c),n.subscribe(c),Kn(o,{type:Wn.RESOURCE}).subscribe((t=>{t.some((t=>!zo(o,t.name)))&&c()})),t.subscribe(6,(t=>{zo(o,t.url)||(void 0===s&&(s=t.requestIndex),a+=1,c())})),t.subscribe(7,(t=>{zo(o,t.url)||void 0===s||t.requestIndex<s||(a-=1,c())}))),()=>{i.forEach((t=>t.unsubscribe()))};function c(){r.notify({isBusy:a>0})}}))}(t,e,n,o),r,i)}function zo(t,e){return function(t,e,n=!1){return t.some((t=>{try{if("function"==typeof t)return t(e);if(t instanceof RegExp)return t.test(e);if("string"==typeof t)return n?e.startsWith(t):t===e}catch(t){s.error(t)}return!1}))}(t.excludedActivityUrls,e)}let Ho;function Go(t){return Ho||(Ho=function(t){return new B((e=>{const{throttled:n}=T((()=>{e.notify(Jo())}),200);return H(t,window,"resize",n,{capture:!0,passive:!0}).stop}))}(t)),Ho}function Jo(){const t=window.visualViewport;return t?{width:Number(t.width*t.scale),height:Number(t.height*t.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}function Wo(t,e,n,o=function(t,e=1e3){return new B((n=>{function o(){n.notify(function(){const t=function(){let t;const e=window.visualViewport;return t=e?e.pageTop-e.offsetTop:void 0!==window.scrollY?window.scrollY:window.pageYOffset||0,Math.round(t)}(),{height:e}=Jo(),n=Math.round((document.scrollingElement||document.documentElement).scrollHeight),o=Math.round(e+t);return{scrollHeight:n,scrollDepth:o,scrollTop:t}}())}if(window.ResizeObserver){const n=T(o,e,{leading:!1,trailing:!0}),r=document.scrollingElement||document.documentElement,i=new ResizeObserver(p(n.throttled));r&&i.observe(r);const s=H(t,window,"scroll",n.throttled,{passive:!0});return()=>{n.cancel(),i.disconnect(),s.stop()}}}))}(t)){let r=0,i=0,s=0;const a=o.subscribe((({scrollDepth:t,scrollTop:o,scrollHeight:a})=>{let c=!1;if(t>r&&(r=t,c=!0),a>i){i=a;const t=bt();s=St(e.relative,t),c=!0}c&&n({maxDepth:Math.min(r,i),maxDepthScrollTop:o,maxScrollHeight:i,maxScrollHeightTime:s})}));return{stop:()=>a.unsubscribe()}}function Ko(t,e,n,o,r,i,s){const a={},{stop:c,setLoadEvent:u}=function(t,e,n,o,r,i,s){let a="initial_load"===r,c=!0;const u=[],d=Ao(o);function l(){if(!c&&!a&&u.length>0){const t=Math.max(...u);t<d.timeStamp&&s(t)}}const{stop:f}=Fo(t,e,n,o,(t=>{c&&(c=!1,t.hadActivity&&u.push(St(i.timeStamp,t.end)),l())}));return{stop:()=>{f(),d.stop()},setLoadEvent:t=>{a&&(a=!1,u.push(t),l())}}}(t,e,n,o,i,s,(t=>{a.loadingTime=t,r()})),{stop:d}=Wo(o,s,(t=>{a.scroll=t})),{stop:l}=Mo(o,s.relative,(t=>{a.cumulativeLayoutShift=t,r()})),{stop:f,getInteractionToNextPaint:p,setViewEnd:m}=qo(o,s.relative,i);return{stop:()=>{c(),l(),d()},stopINPTracking:f,setLoadEvent:u,setViewEnd:m,getCommonViewMetrics:()=>(a.interactionToNextPaint=p(),a)}}function Yo(t,e,n,o,r,i,a,c){const u=new Set;let d,l=f("initial_load",wt(),c);function f(i,a,c){const d=function(t,e,n,o,r,i,a=ht(),c){const u=It(),d=new B,l={};let f,p=0;const m=I(r),g=F();let y,v,b,h,S=!0;c&&(y=c.name,v=c.service||void 0,b=c.version||void 0,c.context&&(h=c.context,g.setContext(h)));const _={id:u,name:y,startClocks:a,service:v,version:b,context:h};t.notify(1,_),t.notify(2,_);const{throttled:E,cancel:O}=T(U,3e3,{leading:!1}),{setLoadEvent:R,setViewEnd:A,stop:N,stopINPTracking:M,getCommonViewMetrics:$}=Ko(t,e,n,o,E,i,a),{stop:P,initialViewMetrics:L}="initial_load"===i?No(o,R,E):{stop:k,initialViewMetrics:{}},{stop:V,eventCounts:j}=vo(t,u,E),D=C(U,3e5);function U(){O(),p+=1;const e=void 0===f?vt():f.timeStamp;t.notify(3,{customTimings:l,documentVersion:p,id:u,name:y,service:v,version:b,context:g.getContext(),loadingType:i,location:m,startClocks:a,commonViewMetrics:$(),initialViewMetrics:L,duration:St(a.timeStamp,e),isActive:void 0===f,sessionIsActive:S,eventCounts:j})}return U(),g.changeObservable.subscribe(U),{get name(){return y},service:v,version:b,contextManager:g,stopObservable:d,end(e={}){var n,o;f||(f=null!==(n=e.endClocks)&&void 0!==n?n:ht(),S=null===(o=e.sessionIsActive)||void 0===o||o,t.notify(4,{endClocks:f}),t.notify(5,{endClocks:f}),x(D),A(f.relative),N(),U(),w((()=>{this.stop()}),3e5))},stop(){P(),V(),M(),d.notify()},addTiming(t,e){if(f)return;const n=function(t){return t<31536e6}(e)?e:St(a.timeStamp,e);l[function(t){const e=t.replace(/[^a-zA-Z0-9-_.@$]/g,"_");e!==t&&s.warn(`Invalid timing name: ${t}, sanitized to: ${e}`);return e}(t)]=n,E()},setViewName(t){y=t,U()}}}(e,n,o,r,t,i,a,c);return u.add(d),d.stopObservable.subscribe((()=>{u.delete(d)})),d}return e.subscribe(9,(()=>{l=f("route_change",void 0,{name:l.name,service:l.service,version:l.version,context:l.contextManager.getContext()})})),e.subscribe(8,(()=>{l.end({sessionIsActive:!1})})),e.subscribe(10,(t=>{t.reason===je.UNLOADING&&l.end()})),a&&(d=function(t){return t.subscribe((({oldLocation:t,newLocation:e})=>{var n,o;o=e,((n=t).pathname!==o.pathname||!function(t){const e=t.substring(1);return""!==e&&!!document.getElementById(e)}(o.hash)&&Xo(o.hash)!==Xo(n.hash))&&(l.end(),l=f("route_change"))}))}(i)),{addTiming:(t,e=vt())=>{l.addTiming(t,e)},startView:(t,e)=>{l.end({endClocks:e}),l=f("route_change",e,t)},setViewContext:t=>{l.contextManager.setContext(t)},setViewContextProperty:(t,e)=>{l.contextManager.setContextProperty(t,e)},setViewName:t=>{l.setViewName(t)},stop:()=>{d&&d.unsubscribe(),l.end(),u.forEach((t=>t.stop()))}}}function Xo(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}function Zo(t,e,n,o,r,i,s,a,c,u){return t.subscribe(3,(n=>t.notify(11,function(t,e,n,o,r){var i,s,a,c,u,d,l,f,p,m,g,y,v,b,h,w;const S=o.getReplayStats(t.id),C=r.findAll(t.startClocks.relative,t.duration),x={_dd:{document_version:t.documentVersion,replay_stats:S,page_states:C,configuration:{start_session_replay_recording_manually:e.startSessionReplayRecordingManually}},date:t.startClocks.timeStamp,type:"view",view:{action:{count:t.eventCounts.actionCount},frustration:{count:t.eventCounts.frustrationCount},cumulative_layout_shift:null===(i=t.commonViewMetrics.cumulativeLayoutShift)||void 0===i?void 0:i.value,cumulative_layout_shift_time:gt(null===(s=t.commonViewMetrics.cumulativeLayoutShift)||void 0===s?void 0:s.time),cumulative_layout_shift_target_selector:null===(a=t.commonViewMetrics.cumulativeLayoutShift)||void 0===a?void 0:a.targetSelector,first_byte:gt(null===(c=t.initialViewMetrics.navigationTimings)||void 0===c?void 0:c.firstByte),dom_complete:gt(null===(u=t.initialViewMetrics.navigationTimings)||void 0===u?void 0:u.domComplete),dom_content_loaded:gt(null===(d=t.initialViewMetrics.navigationTimings)||void 0===d?void 0:d.domContentLoaded),dom_interactive:gt(null===(l=t.initialViewMetrics.navigationTimings)||void 0===l?void 0:l.domInteractive),error:{count:t.eventCounts.errorCount},first_contentful_paint:gt(t.initialViewMetrics.firstContentfulPaint),first_input_delay:gt(null===(f=t.initialViewMetrics.firstInput)||void 0===f?void 0:f.delay),first_input_time:gt(null===(p=t.initialViewMetrics.firstInput)||void 0===p?void 0:p.time),first_input_target_selector:null===(m=t.initialViewMetrics.firstInput)||void 0===m?void 0:m.targetSelector,interaction_to_next_paint:gt(null===(g=t.commonViewMetrics.interactionToNextPaint)||void 0===g?void 0:g.value),interaction_to_next_paint_time:gt(null===(y=t.commonViewMetrics.interactionToNextPaint)||void 0===y?void 0:y.time),interaction_to_next_paint_target_selector:null===(v=t.commonViewMetrics.interactionToNextPaint)||void 0===v?void 0:v.targetSelector,is_active:t.isActive,name:t.name,largest_contentful_paint:gt(null===(b=t.initialViewMetrics.largestContentfulPaint)||void 0===b?void 0:b.value),largest_contentful_paint_target_selector:null===(h=t.initialViewMetrics.largestContentfulPaint)||void 0===h?void 0:h.targetSelector,load_event:gt(null===(w=t.initialViewMetrics.navigationTimings)||void 0===w?void 0:w.loadEvent),loading_time:Rn(gt(t.commonViewMetrics.loadingTime)),loading_type:t.loadingType,long_task:{count:t.eventCounts.longTaskCount},resource:{count:t.eventCounts.resourceCount},time_spent:gt(t.duration)},display:t.commonViewMetrics.scroll?{scroll:{max_depth:t.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:t.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:t.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:gt(t.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,session:{has_replay:!!S||void 0,is_active:!!t.sessionIsActive&&void 0},privacy:{replay_level:e.defaultPrivacyLevel}};R(t.customTimings)||(x.view.custom_timings=function(t,e){const n={};for(const o of Object.keys(t))n[o]=e(t[o]);return n}(t.customTimings,gt));return{rawRumEvent:x,startTime:t.startClocks.relative,domainContext:{location:t.location}}}(n,e,0,c,a)))),Yo(n,t,o,r,e,i,!e.trackViewsManually,u)}let Qo=[];function tr(t,e,n,o){const r=new B,i=new B,s=Ce(t.sessionStoreStrategyType,t,e,n);Qo.push((()=>s.stop()));const a=rn({expireDelay:144e5});function c(){return{id:s.getSession().id,trackingType:s.getSession()[e],isReplayForced:!!s.getSession().forcedReplay,anonymousId:s.getSession().anonymousId}}return Qo.push((()=>a.stop())),s.renewObservable.subscribe((()=>{a.add(c(),bt()),r.notify()})),s.expireObservable.subscribe((()=>{i.notify(),a.closeActive(bt())})),s.expandOrRenewSession(),a.add(c(),wt().relative),o.observable.subscribe((()=>{o.isGranted()?s.expandOrRenewSession():s.expire()})),function(t,e){const{stop:n}=G(t,window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0});Qo.push(n)}(t,(()=>{o.isGranted()&&s.expandOrRenewSession()})),function(t,e){const n=()=>{"visible"===document.visibilityState&&e()},{stop:o}=H(t,document,"visibilitychange",n);Qo.push(o);const r=C(n,6e4);Qo.push((()=>{x(r)}))}(t,(()=>s.expandSession())),function(t,e){const{stop:n}=H(t,window,"resume",e,{capture:!0});Qo.push(n)}(t,(()=>s.restartSession())),{findSession:(t,e)=>a.find(t,e),renewObservable:r,expireObservable:i,sessionStateUpdateObservable:s.sessionStateUpdateObservable,expire:s.expire,updateSessionState:s.updateSessionState}}function er(t,e,n){const o=tr(t,"rum",(e=>function(t,e){let n;n=function(t){return"0"===t||"1"===t||"2"===t}(e)?e:dt(t.sessionSampleRate)?dt(t.sessionReplaySampleRate)?"1":"2":"0";return{trackingType:n,isTracked:nr(n)}}(t,e)),n);return o.expireObservable.subscribe((()=>{e.notify(8)})),o.renewObservable.subscribe((()=>{e.notify(9)})),o.sessionStateUpdateObservable.subscribe((({previousState:t,newState:e})=>{if(!t.forcedReplay&&e.forcedReplay){const t=o.findSession();t&&(t.isReplayForced=!0)}})),{findTrackedSession:t=>{const e=o.findSession(t);if(e&&nr(e.trackingType))return{id:e.id,sessionReplay:"1"===e.trackingType?1:e.isReplayForced?2:0,anonymousId:e.anonymousId}},expire:o.expire,expireObservable:o.expireObservable,setForcedReplay:()=>o.updateSessionState({forcedReplay:"1"})}}function nr(t){return"2"===t||"1"===t}function or({encoder:t,request:e,flushController:n,messageBytesLimit:o}){let r={};const i=n.flushObservable.subscribe((n=>function(n){const o=ee(r).join("\n");r={};const i=(a=n.reason,ee(je).includes(a)),s=i?e.sendOnExit:e.send;var a;if(i&&t.isAsync){const e=t.finishSync();e.outputBytesCount&&s(rr(e));const n=[e.pendingData,o].filter(Boolean).join("\n");n&&s({data:n,bytesCount:b(n)})}else o&&t.write(t.isEmpty?o:`\n${o}`),t.finish((t=>{s(rr(t))}))}(n)));function a(e,i){const a=_(e),u=t.estimateEncodedBytesCount(a);u>=o?s.warn(`Discarded a message whose size was bigger than the maximum allowed size ${o}KB. More details: ${c}/#technical-limitations`):(function(t){return void 0!==t&&void 0!==r[t]}(i)&&function(e){const o=r[e];delete r[e];const i=t.estimateEncodedBytesCount(o);n.notifyAfterRemoveMessage(i)}(i),function(e,o,i){n.notifyBeforeAddMessage(o),void 0!==i?(r[i]=e,n.notifyAfterAddMessage()):t.write(t.isEmpty?e:`\n${e}`,(t=>{n.notifyAfterAddMessage(t-o)}))}(a,u,i))}return{flushController:n,add:a,upsert:a,stop:i.unsubscribe}}function rr(t){let e;return e="string"==typeof t.output?t.output:new Blob([t.output],{type:"text/plain"}),{data:e,bytesCount:t.outputBytesCount,encoding:t.encoding}}const ir="log",sr=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"];let ar=Lt(),cr=t=>{ar.add((()=>cr(t)))};function ur(t,e){cr(Object.assign(Object.assign({type:ir,status:"error"},function(t){if(Pn(t)){const e=Y(t);return{error:{kind:e.name,stack:ct(dr(e))},message:e.message}}return{error:{stack:"No stack, consider using an instance of Error"},message:`Uncaught ${_(t)}`}}(t)),e))}function dr(t){return t.stack=t.stack.filter((t=>!t.url||sr.some((e=>t.url.startsWith(e))))),t}function lr(t,e,n,o,r){0===e.transportStatus&&0===e.queuedPayloads.size()&&e.bandwidthMonitor.canHandle(t)?pr(t,e,n,{onSuccess:()=>mr(0,e,n,o,r),onFailure:()=>{e.queuedPayloads.enqueue(t),fr(e,n,o,r)}}):e.queuedPayloads.enqueue(t)}function fr(t,e,n,o){2===t.transportStatus&&w((()=>{pr(t.queuedPayloads.first(),t,e,{onSuccess:()=>{t.queuedPayloads.dequeue(),t.currentBackoffTime=1e3,mr(1,t,e,n,o)},onFailure:()=>{t.currentBackoffTime=Math.min(6e4,2*t.currentBackoffTime),fr(t,e,n,o)}})}),t.currentBackoffTime)}function pr(t,e,n,{onSuccess:o,onFailure:r}){e.bandwidthMonitor.add(t),n(t,(n=>{e.bandwidthMonitor.remove(t),!function(t){return"opaque"!==t.type&&(0===t.status&&!navigator.onLine||408===t.status||429===t.status||(e=t.status,e>=500));var e}(n)?(e.transportStatus=0,o()):(e.transportStatus=e.bandwidthMonitor.ongoingRequestCount>0?1:2,t.retry={count:t.retry?t.retry.count+1:1,lastFailureStatus:n.status},r())}))}function mr(t,e,n,o,r){0===t&&e.queuedPayloads.isFull()&&!e.queueFullReported&&(r({message:`Reached max ${o} events size queued for upload: 3MiB`,source:Ue,startClocks:ht()}),e.queueFullReported=!0);const i=e.queuedPayloads;for(e.queuedPayloads=gr();i.size()>0;)lr(i.dequeue(),e,n,o,r)}function gr(){const t=[];return{bytesCount:0,enqueue(e){this.isFull()||(t.push(e),this.bytesCount+=e.bytesCount)},first:()=>t[0],dequeue(){const e=t.shift();return e&&(this.bytesCount-=e.bytesCount),e},size:()=>t.length,isFull(){return this.bytesCount>=3145728}}}function yr(t,e,n){const o={transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle(t){return 0===this.ongoingRequestCount||this.ongoingByteCount+t.bytesCount<=81920&&this.ongoingRequestCount<32},add(t){this.ongoingRequestCount+=1,this.ongoingByteCount+=t.bytesCount},remove(t){this.ongoingRequestCount-=1,this.ongoingByteCount-=t.bytesCount}},queuedPayloads:gr(),queueFullReported:!1},r=(n,o)=>function(t,e,n,o){if(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(t){return!1}}()&&n.bytesCount<e){const e=t.build("fetch",n);fetch(e,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(p((t=>null==o?void 0:o({status:t.status,type:t.type}))),p((()=>{br(t.build("xhr",n),n.data,o)})))}else{br(t.build("xhr",n),n.data,o)}}(t,e,n,o);return{send:e=>{lr(e,o,r,t.trackType,n)},sendOnExit:n=>{!function(t,e,n){if(navigator.sendBeacon&&n.bytesCount<e)try{const e=t.build("beacon",n);if(navigator.sendBeacon(e,n.data))return}catch(t){!function(t){vr||(vr=!0,ur(t))}(t)}br(t.build("xhr",n),n.data)}(t,e,n)}}}let vr=!1;function br(t,e,n){const o=new XMLHttpRequest;o.open("POST",t,!0),e instanceof Blob&&o.setRequestHeader("Content-Type",e.type),H({allowUntrustedEvents:!0},o,"loadend",(()=>{null==n||n({status:o.status})}),{once:!0}),o.send(e)}function hr({messagesLimit:t,bytesLimit:e,durationLimit:n,pageExitObservable:o,sessionExpireObservable:r}){const i=o.subscribe((t=>l(t.reason))),s=r.subscribe((()=>l("session_expire"))),a=new B((()=>()=>{i.unsubscribe(),s.unsubscribe()}));let c,u=0,d=0;function l(t){if(0===d)return;const e=d,n=u;d=0,u=0,f(),a.notify({reason:t,messagesCount:e,bytesCount:n})}function f(){S(c),c=void 0}return{flushObservable:a,get messagesCount(){return d},notifyBeforeAddMessage(t){u+t>=e&&l("bytes_limit"),d+=1,u+=t,void 0===c&&(c=w((()=>{l("duration_limit")}),n))},notifyAfterAddMessage(n=0){u+=n,d>=t?l("messages_limit"):u>=e&&l("bytes_limit")},notifyAfterRemoveMessage(t){u-=t,d-=1,0===d&&f()}}}function wr(t,e,n,o,r,i,s){const a=t.replica,c=function(t,e,n,o,r,i,s=or){const a=u(t,e),c=n&&u(t,n);function u(t,{endpoint:e,encoder:n}){return s({encoder:n,request:yr(e,t.batchBytesLimit,o),flushController:hr({messagesLimit:t.batchMessagesLimit,bytesLimit:t.batchBytesLimit,durationLimit:t.flushTimeout,pageExitObservable:r,sessionExpireObservable:i}),messageBytesLimit:t.messageBytesLimit})}return{flushObservable:a.flushController.flushObservable,add(t,e=!0){a.add(t),c&&e&&c.add(n.transformMessage?n.transformMessage(t):t)},upsert:(t,e)=>{a.upsert(t,e),c&&c.upsert(n.transformMessage?n.transformMessage(t):t,e)},stop:()=>{a.stop(),c&&c.stop()}}}(t,{endpoint:t.rumEndpointBuilder,encoder:s(2)},a&&{endpoint:a.rumEndpointBuilder,transformMessage:t=>L(t,{application:{id:a.applicationId}}),encoder:s(3)},o,r,i);return e.subscribe(12,(t=>{"view"===t.type?c.upsert(t,t.view.id):c.add(t)})),c}function Sr(t,e){let n=I(e);return new B((o=>{const{stop:r}=function(t,e){const{stop:n}=Vt(Cr("pushState"),"pushState",(({onPostCall:t})=>{t(e)})),{stop:o}=Vt(Cr("replaceState"),"replaceState",(({onPostCall:t})=>{t(e)})),{stop:r}=H(t,window,"popstate",e);return{stop:()=>{n(),o(),r()}}}(t,s),{stop:i}=function(t,e){return H(t,window,"hashchange",e)}(t,s);function s(){if(n.href===e.href)return;const t=I(e);o.notify({newLocation:t,oldLocation:n}),n=t}return()=>{r(),i()}}))}function Cr(t){return Object.prototype.hasOwnProperty.call(history,t)?history:History.prototype}let xr,Tr,kr;function _r(){0!==xr.batchCount&&Or()}function Er(t,e){t.sum+=e,t.min=Math.min(t.min,e),t.max=Math.max(t.max,e)}function Ir(t,e){t.sum+=e.sum,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)}function Or(){xr={batchCount:0,batchBytesCount:{min:1/0,max:0,sum:0},batchMessagesCount:{min:1/0,max:0,sum:0},globalContextBytes:{min:1/0,max:0,sum:0},userContextBytes:{min:1/0,max:0,sum:0},featureFlagBytes:{min:1/0,max:0,sum:0}}}function Rr(){kr=!1,Tr={globalContextBytes:{min:1/0,max:0,sum:0},userContextBytes:{min:1/0,max:0,sum:0},featureFlagBytes:{min:1/0,max:0,sum:0}}}function Ar(t,e=500){const n=rn({expireDelay:144e5,maxEntries:4e3});let o;i(Nr(),bt());const{stop:r}=G(t,window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],(t=>{i(function(t){if("freeze"===t.type)return"frozen";if("pagehide"===t.type)return t.persisted?"frozen":"terminated";return Nr()}(t),t.timeStamp)}),{capture:!0});function i(t,e=bt()){t!==o&&(o=t,n.closeActive(e),n.add({state:o,startTime:e},e))}const s={findAll:(t,o)=>{const r=n.findAll(t,o);if(0===r.length)return;const i=[],s=Math.max(0,r.length-e);for(let e=r.length-1;e>=s;e--){const n=r[e],o=St(t,n.startTime);i.push({state:n.state,start:gt(o)})}return i},wasInPageStateAt:(t,e)=>s.wasInPageStateDuringPeriod(t,e,0),wasInPageStateDuringPeriod:(t,e,o)=>n.findAll(e,o).some((e=>e.state===t)),addPageState:i,stop:()=>{r(),n.stop()}};return s}function Nr(){return"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}function Mr(t,e){const n=window.cookieStore?function(t){return(e,n)=>H(t,window.cookieStore,"change",(t=>{const o=t.changed.find((t=>t.name===e))||t.deleted.find((t=>t.name===e));o&&n(o.value)})).stop}(t):$r;return new B((t=>n(e,(e=>t.notify(e)))))}function $r(t,e){const n=Rt(document.cookie,t),o=C((()=>{const o=Rt(document.cookie,t);o!==n&&e(o)}),1e3);return()=>{x(o)}}function Pr(t,{session:e,viewContext:n,errorType:o}){const r=e?e.id:"no-session-id",i=[];void 0!==o&&i.push(`error-type=${o}`),n&&(i.push(`seed=${n.id}`),i.push(`from=${n.startClocks.timeStamp}`));return`${function(t){const e=t.site,n=t.subdomain||function(t){switch(t.site){case xe:case"datadoghq.eu":return"app";case"datad0g.com":return"dd";default:return}}(t);return`https://${n?`${n}.`:""}${e}`}(t)}${`/rum/replay/sessions/${r}`}?${i.join("&")}`}const Lr=function(t,e,n={}){const o=A(0),r=F(o.getOrCreateTracker(2)),i=F(o.getOrCreateTracker(1)),a=function(t){const e=new B;return{tryToInit(e){t||(t=e)},update(n){t=n,e.notify()},isGranted:()=>t===z.GRANTED,observable:e}}(),c={vitalsByName:new Map,vitalsByReference:new WeakMap};function u(){return function(t,e,n){return{context:t.getContext(),user:e.getContext(),hasReplay:!!n.isRecording()||void 0}}(r,i,e)}let d=Ve(n,u,a,c,((s,l,f)=>{s.storeContextsAcrossPages&&(W(s,r,"rum",2),W(s,i,"rum",1)),o.setCompressionStatus(l?1:2);const p=t(s,e,o,u,f,l&&n.createDeflateEncoder?t=>n.createDeflateEncoder(s,l,t):K,a,c);return e.onRumStart(p.lifeCycle,s,p.session,p.viewHistory,l),d=function(t,e){return Object.assign({init:t=>{Et("DD_RUM",t)},initConfiguration:t.initConfiguration},e)}(d,p),p}));const l=p((t=>{const e="object"==typeof t?t:{name:t};e.context&&o.getOrCreateTracker(3).updateCustomerData(e.context),d.startView(e)})),g=function(t){const e=Object.assign({version:"6.0.0",onReady(t){t()}},t);return Object.defineProperty(e,"_setDebug",{get:()=>f,enumerable:!1}),e}({init:p((t=>{d.init(t,g)})),setTrackingConsent:p((t=>{a.update(t)})),setViewName:p((t=>{d.setViewName(t)})),setViewContext:p((t=>{d.setViewContext(t)})),setViewContextProperty:p(((t,e)=>{d.setViewContextProperty(t,e)})),setGlobalContext:p((t=>{r.setContext(t)})),getGlobalContext:p((()=>r.getContext())),setGlobalContextProperty:p(((t,e)=>{r.setContextProperty(t,e)})),removeGlobalContextProperty:p((t=>r.removeContextProperty(t))),clearGlobalContext:p((()=>r.clearContext())),getInternalContext:p((t=>d.getInternalContext(t))),getInitConfiguration:p((()=>P(d.initConfiguration))),addAction:(t,e)=>{const n=at();m((()=>{d.addAction({name:V(t),context:V(e),startClocks:ht(),type:"custom",handlingStack:n})}))},addError:(t,e)=>{const n=at();m((()=>{d.addError({error:t,handlingStack:n,context:V(e),startClocks:ht()})}))},addTiming:p(((t,e)=>{d.addTiming(V(t),e)})),setUser:p((t=>{(function(t){const e="object"===M(t);return e||s.error("Unsupported user:",t),e})(t)&&i.setContext(_t(t))})),getUser:p((()=>i.getContext())),setUserProperty:p(((t,e)=>{const n=_t({[t]:e})[t];i.setContextProperty(t,n)})),removeUserProperty:p((t=>i.removeContextProperty(t))),clearUser:p((()=>i.clearContext())),startView:l,stopSession:p((()=>{d.stopSession()})),getSessionReplayLink:p((()=>e.getSessionReplayLink())),startSessionReplayRecording:p((t=>{e.start(t)})),stopSessionReplayRecording:p((()=>e.stop())),addDurationVital:p(((t,e)=>{var n;d.addDurationVital({name:V(t),type:"duration",startClocks:(n=e.startTime,{relative:xt(n),timeStamp:n}),duration:e.duration,context:V(e&&e.context),description:V(e&&e.description)})})),startDurationVital:p(((t,e)=>d.startDurationVital(V(t),{context:V(e&&e.context),description:V(e&&e.description)}))),stopDurationVital:p(((t,e)=>{d.stopDurationVital("string"==typeof t?V(t):t,{context:V(e&&e.context),description:V(e&&e.description)})}))});return g}((function(t,e,n,o,r,i,s,a){var c;const u=[],d=new on,l=t=>{d.notify(13,{error:t})},f=function(t){return new B((e=>{const{stop:n}=G(t,window,["visibilitychange","freeze"],(t=>{"visibilitychange"===t.type&&"hidden"===document.visibilityState?e.notify({reason:je.HIDDEN}):"freeze"===t.type&&e.notify({reason:je.FROZEN})}),{capture:!0}),o=H(t,window,"beforeunload",(()=>{e.notify({reason:je.UNLOADING})})).stop;return()=>{n(),o()}}))}(t),p=f.subscribe((t=>{d.notify(10,t)}));u.push((()=>p.unsubscribe()));const m=er(t,d,s),g=wr(t,d,0,l,f,m.expireObservable,i);u.push((()=>g.stop())),function(t,e,n,o,r){Or(),Rr(),n.subscribe(12,(t=>{kr=!0,Er(Tr.globalContextBytes,o.getOrCreateTracker(2).getBytesCount()),Er(Tr.userContextBytes,o.getOrCreateTracker(1).getBytesCount()),Er(Tr.featureFlagBytes,["view","error"].includes(t.type)?o.getOrCreateTracker(0).getBytesCount():0)})),r.subscribe((({bytesCount:t,messagesCount:e})=>{kr&&(xr.batchCount+=1,Er(xr.batchBytesCount,t),Er(xr.batchMessagesCount,e),Ir(xr.globalContextBytes,Tr.globalContextBytes),Ir(xr.userContextBytes,Tr.userContextBytes),Ir(xr.featureFlagBytes,Tr.featureFlagBytes),Rr())})),C(_r,1e4)}(0,0,d,n,g.flushObservable);const y=De(),v=Sr(t,location),b=Ar(t),{observable:h,stop:w}=function(){const t=new B,{stop:e}=Vt(window,"open",(()=>t.notify()));return{observable:t,stop:e}}();u.push(w);const{viewHistory:S,urlContexts:x,actionContexts:T,addAction:_,stop:E}=function(t,e,n,o,r,i,s,a,c,u){const d=function(t){const e=rn({expireDelay:144e5});return t.subscribe(1,(t=>{e.add(function(t){return{service:t.service,version:t.version,context:t.context,id:t.id,name:t.name,startClocks:t.startClocks}}(t),t.startClocks.relative)})),t.subscribe(5,(({endClocks:t})=>{e.closeActive(t.relative)})),t.subscribe(3,(t=>{const n=e.find(t.startClocks.relative);n&&t.name&&(n.name=t.name),n&&t.context&&(n.context=t.context)})),t.subscribe(9,(()=>{e.reset()})),{findView:t=>e.find(t),stop:()=>{e.stop()}}}(t),l=function(t,e,n){const o=rn({expireDelay:144e5});let r;t.subscribe(1,(({startClocks:t})=>{const e=n.href;o.add(s({url:e,referrer:r||document.referrer}),t.relative),r=e})),t.subscribe(5,(({endClocks:t})=>{o.closeActive(t.relative)}));const i=e.subscribe((({newLocation:t})=>{const e=o.find();if(e){const n=bt();o.closeActive(n),o.add(s({url:t.href,referrer:e.referrer}),n)}}));function s({url:t,referrer:e}){return{url:t,referrer:e}}return{findUrl:t=>o.find(t),stop:()=>{i.unsubscribe(),o.stop()}}}(t,i,n),f=function(t,e,n,o,r){return t.subscribe(0,(e=>t.notify(11,An(e,r)))),{addAction:(e,n)=>{t.notify(11,Object.assign({savedCommonContext:n},An(e,r)))},actionContexts:{findActionId:k},stop:k}}(t,0,0,0,r),p=function(t){let e;e=Jo();const n=Go(t).subscribe((t=>{e=t})).unsubscribe;return{get:()=>e?{viewport:e}:void 0,stop:()=>{n()}}}(e),m=function(t,e=Mr(t,"datadog-ci-visibility-test-execution-id")){var n;let o=Wt("datadog-ci-visibility-test-execution-id")||(null===(n=window.Cypress)||void 0===n?void 0:n.env("traceId"));const r=e.subscribe((t=>{o=t}));return{get:()=>{if("string"==typeof o)return{test_execution_id:o}},stop:()=>r.unsubscribe()}}(e);return nn(e,t,o,d,l,f.actionContexts,p,m,c,u),{viewHistory:d,pageStateHistory:r,urlContexts:l,addAction:f.addAction,actionContexts:f.actionContexts,stop:()=>{f.stop(),m.stop(),p.stop(),l.stop(),d.stop(),r.stop()}}}(d,t,location,m,b,v,0,0,o,l);u.push(E);const{addTiming:I,startView:O,setViewName:R,setViewContext:A,setViewContextProperty:N,stop:M}=Zo(d,t,location,y,h,v,0,b,e,r);u.push(M);const{stop:$}=mo(d,t,b);if(u.push($),t.trackLongTasks)if(null===(c=PerformanceObserver.supportedEntryTypes)||void 0===c?void 0:c.includes(Wn.LONG_ANIMATION_FRAME)){const{stop:e}=function(t,e){const n=Kn(e,{type:Wn.LONG_ANIMATION_FRAME,buffered:!0}).subscribe((e=>{for(const n of e){const e=pt(n.startTime),o={date:e.timeStamp,long_task:{id:It(),entry_type:"long-animation-frame",duration:gt(n.duration),blocking_duration:gt(n.blockingDuration),first_ui_event_timestamp:gt(n.firstUIEventTimestamp),render_start:gt(n.renderStart),style_and_layout_start:gt(n.styleAndLayoutStart),start_time:gt(n.startTime),scripts:n.scripts.map((t=>({duration:gt(t.duration),pause_duration:gt(t.pauseDuration),forced_style_and_layout_duration:gt(t.forcedStyleAndLayoutDuration),start_time:gt(t.startTime),execution_start:gt(t.executionStart),source_url:t.sourceURL,source_function_name:t.sourceFunctionName,source_char_position:t.sourceCharPosition,invoker:t.invoker,invoker_type:t.invokerType,window_attribution:t.windowAttribution})))},type:"long_task",_dd:{discarded:!1}};t.notify(11,{rawRumEvent:o,startTime:e.relative,domainContext:{performanceEntry:n}})}}));return{stop:()=>n.unsubscribe()}}(d,t);u.push(e)}else!function(t,e){const n=Kn(e,{type:Wn.LONG_TASK,buffered:!0}).subscribe((n=>{for(const o of n){if(o.entryType!==Wn.LONG_TASK)break;if(!e.trackLongTasks)break;const n=pt(o.startTime),r={date:n.timeStamp,long_task:{id:It(),entry_type:"long-task",duration:gt(o.duration)},type:"long_task",_dd:{discarded:!1}};t.notify(11,{rawRumEvent:r,startTime:n.relative,domainContext:{performanceEntry:o}})}}))}(d,t);const{addError:P}=Hn(d,t,b);In(d,t);const L=Nt(d,b,a),V=function(t,e,n,o,r){return{get:i=>{const s=n.findView(i),a=r.findUrl(i),c=e.findTrackedSession(i);if(c&&s&&a){const e=o.findActionId(i);return{application_id:t,session_id:c.id,user_action:e?{id:e}:void 0,view:{id:s.id,name:s.name,referrer:a.referrer,url:a.url}}}}}}(t.applicationId,m,S,T,x);return{addAction:_,addError:P,addTiming:I,startView:O,setViewContext:A,setViewContextProperty:N,setViewName:R,lifeCycle:d,viewHistory:S,session:m,stopSession:()=>m.expire(),getInternalContext:V.get,startDurationVital:L.startDurationVital,stopDurationVital:L.stopDurationVital,addDurationVital:L.addDurationVital,stop:()=>{u.forEach((t=>t()))}}}),function(){let t=k;return{start:k,stop:k,onRumStart(e,n){t=()=>function(t){return Pr(t,{errorType:"slim-package"})}(n)},isRecording:()=>!1,getReplayStats:()=>{},getSessionReplayLink:()=>t()}}());!function(t,e,n){const o=t[e];o&&!o.q&&o.version&&s.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),t[e]=n,o&&o.q&&o.q.forEach((t=>u(t,"onReady callback threw an error:")()))}(y(),"DD_RUM",Lr);var Vr=e.W,jr=e.L;export{Vr as DefaultPrivacyLevel,jr as datadogRum};